<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"nova-mist.github.io","root":"/","images":"/images","scheme":"Gemini","version":"8.2.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"}};
  </script>
<meta name="description" content="Redis åŸºç¡€ å­¦ä¹  æ–‡æ¡£ çš„ç¬”è®°ã€‚ [toc]">
<meta property="og:type" content="article">
<meta property="og:title" content="redis-learn">
<meta property="og:url" content="https://nova-mist.github.io/2022/07/11/redis-learn/index.html">
<meta property="og:site_name" content="novamist blog">
<meta property="og:description" content="Redis åŸºç¡€ å­¦ä¹  æ–‡æ¡£ çš„ç¬”è®°ã€‚ [toc]">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/blog-image-20220711-1657502318.gif">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources@main/images/2022/image-20220520165820593.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources@main/images/2022/image-20220520204537548.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources@main/images/2022/image-20220301173950207.5b7734a4.png">
<meta property="article:published_time" content="2022-07-11T01:11:33.000Z">
<meta property="article:modified_time" content="2022-07-11T01:19:40.043Z">
<meta property="article:author" content="Nova-mist">
<meta property="article:tag" content="redis">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/blog-image-20220711-1657502318.gif">


<link rel="canonical" href="https://nova-mist.github.io/2022/07/11/redis-learn/">


<script data-pjax class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>
<title>redis-learn | novamist blog</title>
  




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">novamist blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£<span class="badge">75</span></a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾<span class="badge">28</span></a></li>
        <li class="menu-item menu-item-stars"><a href="/stars/" rel="section"><i class="fa fa-heart fa-fw"></i>æ”¶é›†</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis-%E5%9F%BA%E7%A1%80"><span class="nav-number">1.</span> <span class="nav-text">Redis åŸºç¡€</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">1.1.</span> <span class="nav-text">NoSQLæ•°æ®åº“</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Redis%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.2.</span> <span class="nav-text">Redisä»‹ç»</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-number">1.3.</span> <span class="nav-text">å®‰è£…</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.4.</span> <span class="nav-text">æ•°æ®ç±»å‹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%93%8D%E4%BD%9Cstring"><span class="nav-number">1.4.1.</span> <span class="nav-text">æ“ä½œstring</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%93%8D%E4%BD%9Chash%E8%A1%A8"><span class="nav-number">1.4.2.</span> <span class="nav-text">æ“ä½œhashè¡¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%93%8D%E4%BD%9Clist%E5%88%97%E8%A1%A8"><span class="nav-number">1.4.3.</span> <span class="nav-text">æ“ä½œliståˆ—è¡¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%93%8D%E4%BD%9Cset%E9%9B%86%E5%90%88"><span class="nav-number">1.4.4.</span> <span class="nav-text">æ“ä½œseté›†åˆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%93%8D%E4%BD%9Ckey"><span class="nav-number">1.4.5.</span> <span class="nav-text">æ“ä½œkey</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%93%8D%E4%BD%9CZSet"><span class="nav-number">1.4.6.</span> <span class="nav-text">æ“ä½œZSet</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Redis-Java-API"><span class="nav-number">1.5.</span> <span class="nav-text">Redis Java API</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%86%E5%A4%87%E7%8E%AF%E5%A2%83"><span class="nav-number">1.5.1.</span> <span class="nav-text">å‡†å¤‡ç¯å¢ƒ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%93%8D%E4%BD%9Cstring-1"><span class="nav-number">1.5.2.</span> <span class="nav-text">æ“ä½œstring</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%93%8D%E4%BD%9Chash%E8%A1%A8-1"><span class="nav-number">1.5.3.</span> <span class="nav-text">æ“ä½œhashè¡¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%93%8D%E4%BD%9Clist"><span class="nav-number">1.5.4.</span> <span class="nav-text">æ“ä½œlist</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%93%8D%E4%BD%9Cset"><span class="nav-number">1.5.5.</span> <span class="nav-text">æ“ä½œset</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis-%E8%BF%9B%E9%98%B6"><span class="nav-number">2.</span> <span class="nav-text">Redis è¿›é˜¶</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%81%E4%B9%85%E5%8C%96"><span class="nav-number">2.1.</span> <span class="nav-text">æŒä¹…åŒ–</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#RDB"><span class="nav-number">2.1.1.</span> <span class="nav-text">RDB</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AOF"><span class="nav-number">2.1.2.</span> <span class="nav-text">AOF</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#redis-%E4%BA%8B%E5%8A%A1"><span class="nav-number">2.2.</span> <span class="nav-text">redis äº‹åŠ¡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%88%A0%E9%99%A4%E4%B8%8E%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5"><span class="nav-number">2.3.</span> <span class="nav-text">æ•°æ®åˆ é™¤ä¸æ·˜æ±°ç­–ç•¥</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%87%E6%9C%9F%E6%95%B0%E6%8D%AE"><span class="nav-number">2.3.1.</span> <span class="nav-text">è¿‡æœŸæ•°æ®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%88%A0%E9%99%A4%E7%AD%96%E7%95%A5"><span class="nav-number">2.3.2.</span> <span class="nav-text">æ•°æ®åˆ é™¤ç­–ç•¥</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TODO%EF%BC%9A%E6%95%B0%E6%8D%AE%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5"><span class="nav-number">2.3.3.</span> <span class="nav-text">TODOï¼šæ•°æ®æ·˜æ±°ç­–ç•¥</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E6%9E%B6%E6%9E%84"><span class="nav-number">2.4.</span> <span class="nav-text">ä¸»ä»å¤åˆ¶æ¶æ„</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F"><span class="nav-number">2.5.</span> <span class="nav-text">å“¨å…µæ¨¡å¼</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Nova-mist"
      src="/uploads/avatar.png">
  <p class="site-author-name" itemprop="name">Nova-mist</p>
  <div class="site-description" itemprop="description">My blog about daily life and learning. :b</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">75</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">28</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Nova-mist" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;Nova-mist" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fas fa-cat fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.bilibili.com/" title="https:&#x2F;&#x2F;www.bilibili.com&#x2F;" rel="noopener" target="_blank">Bilibili</a>
        </li>
    </ul>
  </div>

        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://nova-mist.github.io/2022/07/11/redis-learn/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.png">
      <meta itemprop="name" content="Nova-mist">
      <meta itemprop="description" content="My blog about daily life and learning. :b">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="novamist blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          redis-learn
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>
      

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-07-11 09:11:33 / ä¿®æ”¹æ—¶é—´ï¼š09:19:40" itemprop="dateCreated datePublished" datetime="2022-07-11T09:11:33+08:00">2022-07-11</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="Redis-åŸºç¡€"><a href="#Redis-åŸºç¡€" class="headerlink" title="Redis åŸºç¡€"></a>Redis åŸºç¡€</h1><p><img src="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/blog-image-20220711-1657502318.gif" alt="blog-image-20220711-1657502318"></p>
<p>å­¦ä¹  <a target="_blank" rel="noopener" href="https://www.ydlclass.com/doc21xnv/frame/redis/">æ–‡æ¡£</a> çš„ç¬”è®°ã€‚</p>
<p>[toc]</p>
<span id="more"></span>

<h2 id="NoSQLæ•°æ®åº“"><a href="#NoSQLæ•°æ®åº“" class="headerlink" title="NoSQLæ•°æ®åº“"></a>NoSQLæ•°æ®åº“</h2><p><a target="_blank" rel="noopener" href="https://www.ydlclass.com/doc21xnv/frame/redis/">RedisåŸºç¡€ | æ–‡æ¡£åˆé›† (ydlclass.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://redis.io/">Redis</a></p>
<p><a target="_blank" rel="noopener" href="http://www.redis.cn/">CRUGç½‘ç«™ (redis.cn)</a></p>
<p>ğŸŸ§Goalï¼š</p>
<ul>
<li>èƒ½å¤ŸæŒæ¡Redisä¸åŒæ•°æ®ç±»å‹æ“ä½œ</li>
<li>èƒ½å¤Ÿä½¿ç”¨Java APIæ“ä½œRedis</li>
<li>èƒ½å¤Ÿç†è§£Redisçš„ä¸¤ç§æŒä¹…åŒ–æ–¹å¼</li>
</ul>
<hr>
<p>NoSQLæ³›æŒ‡éå…³ç³»å‹çš„æ•°æ®åº“ï¼ŒåŒºåˆ«äºå…³ç³»å‹æ•°æ®åº“ï¼Œä¸ä¿è¯ACIDç‰¹æ€§ã€‚</p>
<blockquote>
<p>ACIDï¼š</p>
<ul>
<li>åŸå­æ€§ï¼ˆAtomicityï¼‰</li>
<li>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰</li>
<li>äº‹åŠ¡éš”ç¦»ï¼ˆIsolationï¼‰</li>
<li>æŒä¹…æ€§ï¼ˆDurabilityï¼‰</li>
</ul>
</blockquote>
<p>NoSQLç‰¹ç‚¹ï¼š</p>
<ul>
<li>é€‚ç”¨äºé«˜å¹¶å‘ã€æµ·é‡æ•°æ®è¯»å†™åœºæ™¯ï¼Œå‡­å€Ÿé€Ÿåº¦å¿«çš„ç‰¹ç‚¹ä½œä¸ºå…³ç³»å‹æ•°æ®åº“çš„è¡¥å……ã€‚</li>
<li>ä¸é€‚ç”¨äºéœ€è¦äº‹åŠ¡æ”¯æŒçš„åœºæ™¯ï¼Œä¸èƒ½å¤„ç†å¤æ‚çš„å…³ç³»ã€‚</li>
</ul>
<hr>
<p>NoSQLæ•°æ®åº“åˆ†ç±»ï¼š</p>
<ol>
<li>memcache<ul>
<li>å¾ˆæ—©å‡ºç°çš„NoSqlæ•°æ®åº“</li>
<li>æ•°æ®éƒ½åœ¨å†…å­˜ä¸­ï¼Œä¸€èˆ¬ä¸æŒä¹…åŒ–ï¼ˆä¸èƒ½å†™å…¥ç¡¬ç›˜ï¼‰</li>
<li>æ”¯æŒç®€å•çš„key-valueæ¨¡å¼</li>
<li>ä¸€èˆ¬æ˜¯ä½œä¸ºç¼“å­˜æ•°æ®åº“è¾…åŠ©æŒä¹…åŒ–çš„æ•°æ®åº“</li>
</ul>
</li>
<li>redis<ul>
<li>æ•°æ®éƒ½åœ¨å†…å­˜ä¸­ï¼Œæ”¯æŒæŒä¹…åŒ–ï¼Œä¸»è¦ç”¨ä½œå¤‡ä»½æ¢å¤</li>
<li>é™¤äº†æ”¯æŒç®€å•çš„key-valueæ¨¡å¼ï¼Œè¿˜æ”¯æŒå¤šç§æ•°æ®ç»“æ„çš„å­˜å‚¨ï¼Œæ¯”å¦‚ listã€setã€hashã€zsetç­‰ã€‚</li>
<li>ä¸€èˆ¬æ˜¯ä½œä¸ºç¼“å­˜æ•°æ®åº“è¾…åŠ©æŒä¹…åŒ–çš„æ•°æ®åº“</li>
</ul>
</li>
<li>MongoDB<ul>
<li>æ•°æ®éƒ½åœ¨å†…å­˜ä¸­ï¼Œ å¦‚æœå†…å­˜ä¸è¶³ï¼ŒæŠŠä¸å¸¸ç”¨çš„æ•°æ®ä¿å­˜åˆ°ç¡¬ç›˜</li>
<li>key-valueæ¨¡å¼ï¼Œä½†æ˜¯å¯¹valueï¼ˆå°¤å…¶æ˜¯jsonï¼‰æä¾›äº†ä¸°å¯Œçš„æŸ¥è¯¢åŠŸèƒ½</li>
<li>æ”¯æŒäºŒè¿›åˆ¶æ•°æ®åŠå¤§å‹å¯¹è±¡</li>
</ul>
</li>
</ol>
<h2 id="Redisä»‹ç»"><a href="#Redisä»‹ç»" class="headerlink" title="Redisä»‹ç»"></a>Redisä»‹ç»</h2><p>Redisæ˜¯<strong>key-value</strong>å­˜å‚¨ç³»ç»Ÿï¼ŒåŒºåˆ«äºMySQLçš„äºŒç»´è¡¨æ ¼å½¢å¼å­˜å‚¨ã€‚</p>
<p>Redisçš„æ•°æ®æ˜¯ç¼“å­˜åœ¨è®¡ç®—æœºå†…å­˜ä¸­çš„ï¼Œå¹¶ä¸”å¯ä»¥å†™å…¥ç¡¬ç›˜ã€‚</p>
<p>ğŸ’¥åº”ç”¨åœºæ™¯ï¼š</p>
<ol>
<li>è·å–æœ€æ–°Nä¸ªæ•°æ®ã€æ’è¡Œæ¦œæ•°æ®</li>
<li>ç²¾å‡†è®¾å®šè¿‡æœŸæ—¶é—´çš„åº”ç”¨</li>
<li>è®¡æ•°å™¨åº”ç”¨ï¼ˆredisçš„å‘½ä»¤éƒ½æ˜¯åŸå­æ€§çš„ï¼‰</li>
<li>ç¼“å­˜</li>
</ol>
<hr>
<p>ğŸ’¥Redisç‰¹ç‚¹ï¼š</p>
<ul>
<li>é«˜æ•ˆæ€§ï¼ˆä½¿ç”¨å†…å­˜ï¼‰</li>
<li>åŸå­æ€§ï¼ˆä¸»é€»è¾‘çº¿ç¨‹æ˜¯å•çº¿ç¨‹çš„ï¼‰</li>
<li>å¤šç§æ•°æ®ç»“æ„<ul>
<li>stringï¼ˆå­—ç¬¦ä¸²ï¼‰ a-&gt;b é…ç½® colorâ€“&gt; red</li>
<li>listï¼ˆåˆ—è¡¨ï¼‰ a-&gt;list æ¶ˆæ¯é˜Ÿåˆ— msgâ€”&gt;[â€œhelloâ€,â€ydlclassâ€,â€itlilsâ€]</li>
<li>hashï¼ˆå“ˆå¸Œï¼‰ a-&gt;map è´­ç‰©è½¦ 1â€”â€“&gt;[â€œ1â€=&gt;â€å‰ƒé¡»åˆ€â€ï¼Œâ€œ2â€=&gt;â€œç”µè„‘â€]</li>
<li>setï¼ˆé›†åˆï¼‰ a-&gt;set å»é‡ quchongâ€“&gt;[â€œåŒ—äº¬â€ï¼Œâ€œå±±è¥¿â€ï¼Œâ€œæ²³åŒ—â€œ]</li>
<li>zset(æœ‰åºé›†åˆ) a-&gt;sorted set æ’è¡Œæ¦œ top10-&gt;[â€xxæ‹¿äº†é‡‘ç‰Œ,10â€œ,â€è·‘è·¯äº†,9.5â€]</li>
</ul>
</li>
<li>æ”¯æŒäº‹åŠ¡ã€æ¶ˆæ¯è®¢é˜…ã€æŒä¹…åŒ–â€¦</li>
</ul>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p><strong>Windows</strong></p>
<ul>
<li>è§£å‹çš„ç›®å½•ä¸è¦æœ‰ä¸­æ–‡</li>
<li>ç¡¬ç›˜ç©ºé—´å‰©ä½™ç©ºé—´æœ€å°‘è¦å¤§äºä½ çš„å†…å­˜ç©ºé—´ï¼Œå»ºè®®20Gä»¥ä¸Š</li>
</ul>
<table>
<thead>
<tr>
<th>ç›®å½•æˆ–æ–‡ä»¶</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>redis-benchmark.exe</td>
<td>æ€§èƒ½æµ‹è¯•å·¥å…·</td>
</tr>
<tr>
<td>redis-check-aof.exe</td>
<td>aofæ–‡ä»¶çš„æ£€æŸ¥å’Œä¿®å¤å·¥å…·</td>
</tr>
<tr>
<td>redis-check-dump.exe</td>
<td>rdbæ–‡ä»¶çš„æ£€æŸ¥å’Œä¿®å¤å·¥å…·</td>
</tr>
<tr>
<td>redis-cli.exe</td>
<td>clientå®¢æˆ·ç«¯è®¿é—®å‘½ä»¤</td>
</tr>
<tr>
<td>redis-server.exe</td>
<td>æœåŠ¡å™¨å¯åŠ¨ç¨‹åº</td>
</tr>
<tr>
<td>redis.window.conf</td>
<td>é…ç½®æ–‡ä»¶</td>
</tr>
</tbody></table>
<p><strong>è¿è¡Œ</strong></p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token comment"># æœåŠ¡æ®µ port:6379</span>
redis<span class="token operator">-</span>server<span class="token punctuation">.</span>exe redis<span class="token punctuation">.</span>windows<span class="token punctuation">.</span>conf
<span class="token comment"># å®¢æˆ·ç«¯</span>
redis<span class="token operator">-</span><span class="token function">cli</span><span class="token punctuation">.</span>exe <span class="token operator">-</span>h localhost <span class="token operator">-</span>p 6379<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>Could not create server TCP listening socket 127.0.0.1:6379: bind</p>
</blockquote>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">cd <span class="token string">"C:\Program Files\Redis"</span>
redis<span class="token operator">-</span>server<span class="token punctuation">.</span>exe redis<span class="token punctuation">.</span>windows<span class="token punctuation">.</span>conf
redis<span class="token operator">-</span><span class="token function">cli</span><span class="token punctuation">.</span>exe
shutdown
<span class="token keyword">exit</span>
redis<span class="token operator">-</span>server<span class="token punctuation">.</span>exe redis<span class="token punctuation">.</span>windows<span class="token punctuation">.</span>conf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ğŸŸ å…ˆè¿è¡ŒæœåŠ¡ç«¯å†è¿è¡Œå®¢æˆ·ç«¯ã€‚</p>
<hr>
<p><strong>Redis Desktop Manager</strong> å›¾å½¢åŒ–ç®¡ç†è½¯ä»¶</p>
<blockquote>
<p>æ— æ³•è¿æ¥é—®é¢˜</p>
</blockquote>
<p>ä¿®æ”¹redisé…ç½®æ–‡ä»¶redis.conf</p>
<pre class="line-numbers language-none"><code class="language-none">64 # bind 127.0.0.1
83 # protected-mode yes
protected-mode no<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>





<h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><ul>
<li>stringå­—ç¬¦ä¸²</li>
<li>liståˆ—è¡¨</li>
<li>seté›†åˆ</li>
<li>hashè¡¨</li>
<li>zsetæœ‰åºé›†åˆ</li>
</ul>
<hr>
<h3 id="æ“ä½œstring"><a href="#æ“ä½œstring" class="headerlink" title="æ“ä½œstring"></a>æ“ä½œstring</h3><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token comment"># è®¾å®š/è·å–keyçš„å€¼</span>
<span class="token function">SET</span> key value
GET key
<span class="token comment"># è®¾å®škeyçš„å€¼å¹¶è¿”å›æ—§å€¼</span>
GETSET key value
<span class="token comment"># è·å–æ‰€æœ‰ç»™å®škeyçš„å€¼</span>
MGET key1 <span class="token namespace">[key2...]</span>
<span class="token comment"># å°†å€¼å…³è”åˆ°keyå¹¶è®¾ç½®è¿‡æœŸæ—¶é—´</span>
SETEX key seconds value
<span class="token comment"># åªæœ‰åœ¨keyä¸å­˜åœ¨çš„æ—¶å€™æ‰è®¾ç½®keyçš„å€¼</span>
SETNX key value
<span class="token comment"># è¿”å›keyæ‰€å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼å¾—é•¿åº¦</span>
STRLEN key
<span class="token comment"># åŒæ—¶è®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ªé”®å€¼å¯¹</span>
MSET key value <span class="token namespace">[key value]</span>
<span class="token comment"># åŒæ—¶è®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ªé”®å€¼å¯¹ å½“ä¸”ä»…å½“æ‰€æœ‰ç»™å®škeyéƒ½ä¸å­˜åœ¨</span>
MSETNX key value <span class="token namespace">[key value]</span>
<span class="token comment"># ä»¥æ¯«ç§’ä¸ºå•ä½è®¾ç½®keyçš„ç”Ÿå­˜æ—¶é—´</span>
PSETEX key milliseconds value 
<span class="token comment"># å°†keyä¸­å‚¨å­˜çš„æ•°å­—å€¼å¢1</span>
INCR key
<span class="token comment"># å°†keyä¸­å‚¨å­˜çš„æ•°å­—å€¼å¢ä¸€ä¸ªå€¼</span>
INCRBY key increment
<span class="token comment"># å°† key æ‰€å‚¨å­˜çš„å€¼åŠ ä¸Šç»™å®šçš„æµ®ç‚¹å¢é‡å€¼</span>
INCRBYFLOAT key increment
<span class="token comment"># å‡å°‘å€¼</span>
DECR key
DECRBY key decrement key
<span class="token comment">#  å¦‚æœkeyå·²ç»å­˜åœ¨å¹¶ä¸”æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² å°†æŒ‡å®šçš„valueè¿½åŠ åˆ°è¯¥keyåŸå€¼çš„æœ«å°¾</span>
APPEND key value<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>å¸¸ç”¨</strong></p>
<pre class="line-numbers language-none"><code class="language-none">1 è®¾ç½®å€¼ è·å–å€¼
set ydlclass value
get ydlclass
2 mset mget ä¸€æ¬¡æ€§æ“ä½œå¤šç»„æ•°æ®
mset ydlclass value ydlclass1 value1 ydlclass2 value2
mget ydlclass ydlclass1 ydlclass2
3 æ²¡æœ‰è¿™ä¸ªé”®æˆ‘ä»¬æ‰è®¾ç½®
setnx dlclass value
4 å°†keyçš„å€¼ åŠ ä¸€ï¼Œå‡ä¸€
incr stock 
decr stock
5è®¾ç½® aå€¼å­˜æ´»æ—¶é—´5ç§’ï¼Œå€¼æ˜¯b    éªŒè¯ç 
setex a 5 b<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ğŸŸ å¹¶å‘æƒ…å†µä¸‹ï¼Œä¸èƒ½é€šè¿‡getã€setæ¥è¿›è¡Œç´¯åŠ ç´¯å‡çš„å¤šæ­¥æ“ä½œï¼Œåªèƒ½ä½¿ç”¨INCRBYã€DECRBYæŒ‡ä»¤ã€‚</p>
<hr>
<h3 id="æ“ä½œhashè¡¨"><a href="#æ“ä½œhashè¡¨" class="headerlink" title="æ“ä½œhashè¡¨"></a>æ“ä½œhashè¡¨</h3><p>Redis hash æ˜¯ä¸€ä¸ªstringç±»å‹çš„fieldå’Œvalueçš„æ˜ å°„è¡¨ï¼Œhashç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡ã€‚</p>
<p>Redis ä¸­æ¯ä¸ª hash å¯ä»¥å­˜å‚¨ 2çš„32 - 1 é”®å€¼å¯¹ï¼ˆ40å¤šäº¿ï¼‰</p>
<p><strong>å¯ä»¥å°†å¤§keyåˆ†è§£ä¸ºå°çš„key-valueå­˜å‚¨ã€‚</strong></p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token comment"># è®¾ç½®å“ˆå¸Œè¡¨keyä¸­çš„å­—æ®µfieldçš„å€¼</span>
HSET key field value
HSETNX key field value <span class="token comment"># fieldä¸å­˜åœ¨æ—¶æ‰è®¾ç½®</span>
HMSET key field1 value1 <span class="token namespace">[field2 value2]</span>
<span class="token comment"># æŸ¥çœ‹æŒ‡å®šå­—æ®µæ˜¯å¦å­˜åœ¨</span>
HEXISTS key field
<span class="token comment"># è·å–å­—æ®µå€¼</span>
HGET key field
<span class="token comment"># è·å–æŒ‡å®škeyçš„æ‰€æœ‰å­—æ®µå’Œå€¼</span>
HGETALL key
<span class="token comment"># è·å–æ‰€æœ‰å­—æ®µ</span>
HKEYS key
<span class="token comment"># å­—æ®µçš„æ•°é‡</span>
HLEN key
<span class="token comment"># è·å–æ‰€æœ‰ç»™å®šå­—æ®µçš„å€¼</span>
HMGET key field1 <span class="token namespace">[field2]</span>
<span class="token comment"># ä¸ºå“ˆå¸Œè¡¨ key ä¸­çš„æŒ‡å®šå­—æ®µçš„æ•´æ•°å€¼åŠ ä¸Šå¢é‡ increment</span>
HINCRBY key field increment
HINCRBYFLOAT key field increment
<span class="token comment"># è·å–å“ˆå¸Œè¡¨ä¸­æ‰€æœ‰å€¼</span>
HVALS key
<span class="token comment"># åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå“ˆå¸Œè¡¨å­—æ®µ</span>
HDEL key field1 <span class="token namespace">[field2]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>å¸¸ç”¨</strong></p>
<pre class="line-numbers language-text" data-language="text"><code class="language-text">1è®¾ç½®å€¼ è·å–å€¼
hset user username itlils
hset user age 18
hget user username
2æ‰¹é‡
hmset user1 username itnanls age 19 
3è·å–æ‰€æœ‰çš„é”®å€¼å¯¹
hgetall user
4è·å–æ‰€æœ‰å°key
hkeys  user
5è·å–æ‰€æœ‰å€¼
HVALS user
6åˆ é™¤ 
hdel user age<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h3 id="æ“ä½œliståˆ—è¡¨"><a href="#æ“ä½œliståˆ—è¡¨" class="headerlink" title="æ“ä½œliståˆ—è¡¨"></a>æ“ä½œliståˆ—è¡¨</h3><p>å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åºã€‚</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token comment"># æ’å…¥å€¼åˆ°åˆ—è¡¨å¤´éƒ¨</span>
LPUSH key value1 <span class="token namespace">[value2]</span>
LPUSHX key value
<span class="token comment"># æ’å…¥å€¼åˆ°åˆ—è¡¨å°¾éƒ¨</span>
RPUSH key value1 <span class="token namespace">[value2]</span>
RPUSHX key value
<span class="token comment"># æŸ¥çœ‹æ‰€æœ‰æ•°æ® 0 -1</span>
LRANGE key <span class="token function">start</span> stop
<span class="token comment"># åœ¨æŸå…ƒç´ å‰æˆ–åæ’å…¥å…ƒç´ </span>
LINSERT key BEFORE <span class="token punctuation">|</span> AFTER pivot  value
<span class="token comment"># é€šè¿‡ç´¢å¼•è·å–/ä¿®æ”¹åˆ—è¡¨ä¸­çš„å…ƒç´ </span>
LINDEX key index
LIST key index value
<span class="token comment"># è·å–åˆ—è¡¨é•¿åº¦</span>
LLEN key
<span class="token comment"># ç§»é™¤å¹¶è·å–åˆ—è¡¨çš„ç¬¬ä¸€ä¸ª/æœ€åä¸€ä¸ªå…ƒç´ </span>
LPOP key
RPOP key
<span class="token comment"># ç§»é™¤å…ƒç´  å¦‚æœåˆ—è¡¨ä¸ºç©ºåˆ™é˜»å¡åˆ—è¡¨ç›´åˆ°è¶…æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ </span>
BLPOP key1 <span class="token namespace">[key2 ]</span> timeout
BRPOP key1 <span class="token namespace">[key2 ]</span> timeout
<span class="token comment"># ç§»é™¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶å°†è¯¥å…ƒç´ æ·»åŠ åˆ°å¦ä¸€ä¸ªåˆ—è¡¨å¹¶è¿”å›</span>
RPOPLPUSH source destination
<span class="token comment"># ä»åˆ—è¡¨ä¸­å¼¹å‡ºä¸€ä¸ªå€¼ï¼Œå°†å¼¹å‡ºçš„å…ƒç´ æ’å…¥åˆ°å¦å¤–ä¸€ä¸ªåˆ—è¡¨ä¸­å¹¶è¿”å›å®ƒï¼› å¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢</span>
BRPOPLPUSH source destination timeout
<span class="token comment"># ä¿®å‰ªåˆ—è¡¨</span>
LTRIM key <span class="token function">start</span> stop
<span class="token comment"># åˆ é™¤æŒ‡å®škeyçš„åˆ—è¡¨</span>
<span class="token function">DEL</span> key1 <span class="token namespace">[key2]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>å¸¸ç”¨</strong></p>
<pre class="line-numbers language-text" data-language="text"><code class="language-text">1 è®¾ç½®å€¼
lpush list1 1 2 3 4 1
rpush list1 6
2æŸ¥çœ‹æ•°æ®
lrange list1 0 -1
3 ç§»é™¤æ•°æ®
lpop list1
rpop list1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h3 id="æ“ä½œseté›†åˆ"><a href="#æ“ä½œseté›†åˆ" class="headerlink" title="æ“ä½œseté›†åˆ"></a>æ“ä½œseté›†åˆ</h3><p>Redis çš„ Set æ˜¯ String ç±»å‹çš„<strong>æ— åº</strong>é›†åˆã€‚é›†åˆæˆå‘˜æ˜¯<strong>å”¯ä¸€</strong>çš„ã€‚</p>
<p>Redis ä¸­é›†åˆæ˜¯é€šè¿‡å“ˆå¸Œè¡¨å®ç°çš„ï¼Œæ‰€ä»¥æ·»åŠ ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯ O(1)ã€‚</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token comment"># æ·»åŠ </span>
SADD key member1 <span class="token namespace">[member2]</span>
<span class="token comment"># è¿”å›é›†åˆä¸­æ‰€æœ‰æˆå‘˜</span>
SMEMBERS key
<span class="token comment"># è·å–é›†åˆçš„æˆå‘˜æ•°</span>
SCARD key
<span class="token comment"># è¿”å›ç»™å®šæ‰€æœ‰é›†åˆçš„å·®é›†</span>
SDIFF key1 <span class="token namespace">[key2]</span>
SDIFFSTORE destination key1 <span class="token namespace">[key2]</span>
<span class="token comment"># è¿”å›äº¤é›†</span>
SINTER key1 <span class="token namespace">[key2]</span>
SINTERSTORE destination key1 <span class="token namespace">[key2]</span>
<span class="token comment"># åˆ¤æ–­å…ƒç´ æ˜¯å¦æ˜¯é›†åˆkeyçš„æˆå‘˜</span>
SISMEMBER key member
<span class="token comment"># å°† member å…ƒç´ ä» source é›†åˆç§»åŠ¨åˆ° destination é›†åˆ</span>
SMOVE source destination member
<span class="token comment"># ç§»é™¤å¹¶è¿”å›é›†åˆä¸­çš„ä¸€ä¸ªéšæœºå…ƒç´ </span>
SPOP key
<span class="token comment"># è¿”å›é›†åˆä¸­ä¸€ä¸ªæˆ–å¤šä¸ªéšæœºæ•°</span>
SRANDMEMBER key <span class="token namespace">[count]</span>
<span class="token comment"># ç§»é™¤é›†åˆä¸­ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜</span>
SREM key member1<span class="token namespace">[member2]</span>
<span class="token comment"># è¿”å›æ‰€æœ‰ç»™å®šé›†åˆçš„å¹¶é›†</span>
SUNION key1 <span class="token namespace">[key2]</span>
SUNIONSTORE destination key1 <span class="token namespace">[key2]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-text" data-language="text"><code class="language-text">1æ·»åŠ æ•°æ®
sadd set1 1 2 3 4 5
2è·å–æ•°æ®
smembers set1
3è·å–æˆå‘˜æ•°é‡
scard set1
4ä¸šåŠ¡ uv å½“å¤©ç™»é™†ç”¨æˆ·æ•°
sadd uv:20220222 001 002 003 002
scard uv:20220222<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h3 id="æ“ä½œkey"><a href="#æ“ä½œkey" class="headerlink" title="æ“ä½œkey"></a>æ“ä½œkey</h3><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token comment"># åˆ é™¤</span>
<span class="token function">DEL</span> key
<span class="token comment"># åºåˆ—åŒ–å¹¶è¿”å›å€¼</span>
DUMP key
<span class="token comment"># æ£€æŸ¥ç»™å®škeyæ˜¯å¦å­˜åœ¨</span>
EXISTS key
<span class="token comment"># è®¾ç½®è¿‡æœŸæ—¶é—´</span>
EXPIRE key seconds
EXPIRE key milliseconds
<span class="token comment"># æŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆç»™å®šæ¨¡å¼çš„key</span>
KEYS pattern
<span class="token comment"># ç§»é™¤keyçš„è¿‡æœŸæ—¶é—´</span>
PERSIST key
<span class="token comment"># è¿”å›keyçš„å‰©ä½™è¿‡æœŸæ—¶é—´ time to live</span>
PTTL key <span class="token comment"># æ¯«ç§’</span>
TTL key
<span class="token comment"># ä»å½“å‰æ•°æ®åº“ä¸­éšæœºè¿”å›ä¸€ä¸ªkey</span>
RANDOMKEY
<span class="token comment"># ä¿®æ”¹keyçš„åç§°</span>
RENAME key newkey
RENAMENX key newkey
<span class="token comment"># è¿”å›keyæ‰€å‚¨å­˜çš„å€¼çš„ç±»å‹</span>
<span class="token function">TYPE</span> key<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>å¸¸ç”¨</strong></p>
<pre class="line-numbers language-text" data-language="text"><code class="language-text">1åˆ é™¤
del user1
2æŸ¥çœ‹æ‰€æœ‰çš„key  
keys *     ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œåˆ«ç”¨
3å­˜åœ¨key
exists user1
4å­˜æ´»æ—¶é—´
expire ydlclass 5
5å‰©ä½™å­˜æ´»æ—¶é—´   ç™»é™†ç»­æœŸ
pttl user1
6éšæœºè·å– key
randomkey<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h3 id="æ“ä½œZSet"><a href="#æ“ä½œZSet" class="headerlink" title="æ“ä½œZSet"></a>æ“ä½œZSet</h3><p>æœ‰åºé›†åˆä¹Ÿæ˜¯stringç±»å‹å…ƒç´ çš„é›†åˆï¼Œä¸å…è®¸é‡å¤ï¼Œç”¨æ¥ä¿å­˜éœ€è¦æ’åºçš„æ•°æ®ã€‚</p>
<p>æ¯ä¸ªå…ƒç´ éƒ½å¸¦æœ‰scoreï¼ˆæƒé‡ï¼‰ã€‚</p>
<p>ç»„æˆï¼škeyã€memberã€score</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token comment"># æ·»åŠ æˆ–æ›´æ–°</span>
ZADD key score1 member1 <span class="token namespace">[score2 member2]</span>
<span class="token comment"># è·å–æœ‰åºé›†åˆçš„æˆå‘˜æ•°</span>
ZCARD key
ZCOUNT key min max
<span class="token comment"># æœ‰åºé›†åˆä¸­å¯¹æŒ‡å®šæˆå‘˜çš„åˆ†æ•°åŠ ä¸Šå¢é‡ increment</span>
ZINCRBY key increment member
<span class="token comment"># è®¡ç®—ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªæœ‰åºé›†çš„äº¤é›†å¹¶å°†ç»“æœé›†å­˜å‚¨åœ¨æ–°çš„æœ‰åºé›†åˆ key ä¸­</span>
ZINTERSTORE destination numkeys key <span class="token namespace">[key ...]</span>
<span class="token comment"># é€šè¿‡ç´¢å¼•åŒºé—´è¿”å›æœ‰åºé›†åˆæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜</span>
ZRANGE key <span class="token function">start</span> stop <span class="token namespace">[WITHSCORES]</span>
<span class="token comment"># é€šè¿‡åˆ†æ•°è¿”å›æœ‰åºé›†åˆæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜</span>
ZRANGEBYSCORE key min max <span class="token namespace">[WITHSCORES]</span> <span class="token namespace">[LIMIT]</span>
<span class="token comment"># è¿”å›æœ‰åºé›†åˆä¸­æŒ‡å®šæˆå‘˜çš„ç´¢å¼•</span>
ZRANK key member
<span class="token comment"># ç§»é™¤æœ‰åºé›†åˆä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜</span>
ZREM key member <span class="token namespace">[member ...]</span>
<span class="token comment"># è¿”å›æœ‰åºé›†ä¸­æŒ‡å®šåŒºé—´å†…çš„æˆå‘˜ï¼Œé€šè¿‡ç´¢å¼•ï¼Œåˆ†æ•°ä»é«˜åˆ°ä½</span>
ZREVRANGE key <span class="token function">start</span> stop <span class="token namespace">[WITHSCORES]</span> 
<span class="token comment"># è¿”å›æœ‰åºé›†åˆä¸­æŒ‡å®šæˆå‘˜çš„æ’åï¼Œæœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å‡(ä»å¤§åˆ°å°)æ’åº</span>
ZREVRANK key member
<span class="token comment"># è¿”å›æœ‰åºé›†ä¸­ï¼Œæˆå‘˜çš„åˆ†æ•°å€¼</span>
ZSCORE key member<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>å¸¸ç”¨</strong></p>
<pre class="line-numbers language-text" data-language="text"><code class="language-text">1æ·»åŠ 
zadd pv 100 page1.html 200 page2.html 300 page3.html
2æŸ¥çœ‹
zcard pv
3æŸ¥è¯¢æŒ‡å®šæƒé‡èŒƒå›´çš„æˆå‘˜æ•°
ZCOUNT pv 150 500
4å¢åŠ æƒé‡
ZINCRBY pv 1 page1.html
5äº¤é›†
ZADD pv_zset1 10 page1.html 20  page2.html
ZADD pv_zset2 5 page1.html 10  page2.html
ZINTERSTORE pv_zset_result 2 pv_zset1  pv_zset2
6æˆå‘˜çš„åˆ†æ•°å€¼
ZSCORE pv_zset page3.html   
7 è·å–ä¸‹æ ‡èŒƒå›´å†…çš„æˆå‘˜ã€‚ æ’åºï¼Œé»˜è®¤æƒé‡ç”±ä½åˆ°é«˜
ZRANGE pv 0 -1
8è·å–ç”±é«˜åˆ°ä½çš„å‡ ä¸ªæˆå‘˜ï¼ˆreverseï¼‰ä½¿ç”¨æœ€å¤šçš„
æ•ˆç‡å¾ˆé«˜ï¼Œå› ä¸ºæœ¬èº«zsetå°±æ˜¯æ’å¥½åºçš„ã€‚
ZREVRANGE key start stop<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h2 id="Redis-Java-API"><a href="#Redis-Java-API" class="headerlink" title="Redis Java API"></a>Redis Java API</h2><h3 id="å‡†å¤‡ç¯å¢ƒ"><a href="#å‡†å¤‡ç¯å¢ƒ" class="headerlink" title="å‡†å¤‡ç¯å¢ƒ"></a>å‡†å¤‡ç¯å¢ƒ</h3><p><strong>å¯¼å…¥ä¾èµ–</strong> pom.xml</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>redis.clients<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jedis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.9.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>4.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.testng<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>testng<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>6.14.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>maven-compiler-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>source</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoding</span><span class="token punctuation">></span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoding</span><span class="token punctuation">></span></span>
                <span class="token comment">&lt;!--    &lt;verbal>true&lt;/verbal>--></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>åˆ›å»ºRedisTestç±»ï¼Œä½¿ç”¨TestNGæµ‹è¯•å„ç§api</strong>ï¼š</p>
<ul>
<li>@BeforeTeståœ¨æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹å‰ï¼Œåˆ›å»ºJedisPoolç”¨äºè·å–Redisè¿æ¥ã€‚</li>
<li>@AfterTeståœ¨æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹åï¼Œå…³é—­è¿æ¥ã€‚</li>
</ul>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisTest</span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">private</span> <span class="token class-name">JedisPool</span> jedisPool<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@BeforeTest</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">beforeTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// JedisPoolConfigé…ç½®å¯¹è±¡</span>
        <span class="token class-name">JedisPoolConfig</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JedisPoolConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æŒ‡å®šæœ€å¤§ç©ºé—²è¿æ¥ä¸º10ä¸ª</span>
        config<span class="token punctuation">.</span><span class="token function">setMaxIdle</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æœ€å°ç©ºé—²è¿æ¥5ä¸ª</span>
        config<span class="token punctuation">.</span><span class="token function">setMinIdle</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æœ€å¤§ç­‰å¾…æ—¶é—´ä¸º3000æ¯«ç§’</span>
        config<span class="token punctuation">.</span><span class="token function">setMaxWaitMillis</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æœ€å¤§è¿æ¥æ•°ä¸º50</span>
        config<span class="token punctuation">.</span><span class="token function">setMaxTotal</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        jedisPool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JedisPool</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> <span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">keysTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// ä»Redisè¿æ¥æ± è·å–Redisè¿æ¥</span>
        <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> jedisPool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è°ƒç”¨keysæ–¹æ³•è·å–æ‰€æœ‰çš„key</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> keySet <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> key <span class="token operator">:</span> keySet<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token annotation punctuation">@AfterTest</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// å…³é—­è¿æ¥æ± </span>
        jedisPool<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h3 id="æ“ä½œstring-1"><a href="#æ“ä½œstring-1" class="headerlink" title="æ“ä½œstring"></a>æ“ä½œstring</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stringTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// è·å–Jedisè¿æ¥</span>
  <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> jedisPool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 1.æ·»åŠ ä¸€ä¸ªstringç±»å‹æ•°æ®ï¼Œkeyä¸ºpvï¼Œç”¨äºä¿å­˜pvçš„å€¼ï¼Œåˆå§‹å€¼ä¸º0</span>
  jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"pv"</span><span class="token punctuation">,</span> <span class="token string">"0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 2.æŸ¥è¯¢è¯¥keyå¯¹åº”çš„æ•°æ®</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"pv:"</span> <span class="token operator">+</span> jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"pv"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 3.ä¿®æ”¹pvä¸º1000</span>
  jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"pv"</span><span class="token punctuation">,</span> <span class="token string">"1000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 4.å®ç°æ•´å½¢æ•°æ®åŸå­è‡ªå¢æ“ä½œ +1</span>
  jedis<span class="token punctuation">.</span><span class="token function">incr</span><span class="token punctuation">(</span><span class="token string">"pv"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 5.å®ç°æ•´å½¢è¯¥æ•°æ®åŸå­è‡ªå¢æ“ä½œ +1000</span>
  jedis<span class="token punctuation">.</span><span class="token function">incrBy</span><span class="token punctuation">(</span><span class="token string">"pv"</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"pv"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// å°†jediså¯¹è±¡æ”¾å›åˆ°è¿æ¥æ± </span>
  jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h3 id="æ“ä½œhashè¡¨-1"><a href="#æ“ä½œhashè¡¨-1" class="headerlink" title="æ“ä½œhashè¡¨"></a>æ“ä½œhashè¡¨</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  <span class="token comment">//ä»æ± å­é‡Œå“ªä¸€ä¸ªè¿æ¥</span>
  <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> jedisPool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//1. å¾€Hashç»“æ„ä¸­æ·»åŠ ä»¥ä¸‹å•†å“åº“å­˜ goods</span>
  <span class="token comment">//   a)   iphone13 => 10000</span>
  <span class="token comment">//   b)   macbookpro => 9000</span>
  jedis<span class="token punctuation">.</span><span class="token function">hset</span><span class="token punctuation">(</span><span class="token string">"goods"</span><span class="token punctuation">,</span> <span class="token string">"iphone13"</span><span class="token punctuation">,</span> <span class="token string">"10000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  jedis<span class="token punctuation">.</span><span class="token function">hset</span><span class="token punctuation">(</span><span class="token string">"goods"</span><span class="token punctuation">,</span> <span class="token string">"macbookpro"</span><span class="token punctuation">,</span> <span class="token string">"9000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//2. è·å–Hashä¸­æ‰€æœ‰çš„å•†å“</span>
  <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> goods <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">hkeys</span><span class="token punctuation">(</span><span class="token string">"goods"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> good <span class="token operator">:</span> goods<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>good<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token comment">//3. æ–°å¢3000ä¸ªmacbookproåº“å­˜</span>
  <span class="token comment">//String hget = jedis.hget("goods", "macbookpro");</span>
  <span class="token comment">//int stock=Integer.parseInt(hget)+3000;</span>
  <span class="token comment">//jedis.hset("goods", "macbookpro", stock+"");</span>
  jedis<span class="token punctuation">.</span><span class="token function">hincrBy</span><span class="token punctuation">(</span><span class="token string">"goods"</span><span class="token punctuation">,</span> <span class="token string">"macbookpro"</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token class-name">String</span> hget <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">hget</span><span class="token punctuation">(</span><span class="token string">"goods"</span><span class="token punctuation">,</span> <span class="token string">"macbookpro"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>hget<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//4. åˆ é™¤æ•´ä¸ªHashçš„æ•°æ®</span>
  jedis<span class="token punctuation">.</span><span class="token function">del</span><span class="token punctuation">(</span><span class="token string">"goods"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h3 id="æ“ä½œlist"><a href="#æ“ä½œlist" class="headerlink" title="æ“ä½œlist"></a>æ“ä½œlist</h3><p>ğŸŸ <strong>å•æ¬¡æ’å…¥å¤šä¸ªæ—¶å€™ï¼Œåœ¨å‰é¢çš„å‰æ’å…¥ã€‚</strong></p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">listTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// è·å–Jedisè¿æ¥</span>
  <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> jedisPool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 1.	å‘listçš„å·¦è¾¹æ’å…¥ä»¥ä¸‹ä¸‰ä¸ªæ‰‹æœºå·ç ï¼š18511310001ã€18912301231ã€18123123312</span>
  jedis<span class="token punctuation">.</span><span class="token function">lpush</span><span class="token punctuation">(</span><span class="token string">"tel_list"</span><span class="token punctuation">,</span> <span class="token string">"18511310001"</span><span class="token punctuation">,</span> <span class="token string">"18912301231"</span><span class="token punctuation">,</span> <span class="token string">"18123123312"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 2.	ä»å³è¾¹ç§»é™¤ä¸€ä¸ªæ‰‹æœºå·ç </span>
  jedis<span class="token punctuation">.</span><span class="token function">rpop</span><span class="token punctuation">(</span><span class="token string">"tel_list"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 3.	è·å–listæ‰€æœ‰çš„å€¼</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> telList <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">lrange</span><span class="token punctuation">(</span><span class="token string">"tel_list"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> tel <span class="token operator">:</span> telList<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>tel<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h3 id="æ“ä½œset"><a href="#æ“ä½œset" class="headerlink" title="æ“ä½œset"></a>æ“ä½œset</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  <span class="token comment">// è·å–Jedisè¿æ¥</span>
  <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> jedisPool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// æ±‚UVå°±æ˜¯æ±‚ç‹¬ç«‹æœ‰å¤šå°‘ä¸ªï¼ˆä¸é‡å¤ï¼‰</span>
  <span class="token comment">// 1.	å¾€ä¸€ä¸ªsetä¸­æ·»åŠ é¡µé¢ page1 çš„uvï¼Œç”¨æˆ·user1è®¿é—®ä¸€æ¬¡è¯¥é¡µé¢</span>
  jedis<span class="token punctuation">.</span><span class="token function">sadd</span><span class="token punctuation">(</span><span class="token string">"uv"</span><span class="token punctuation">,</span> <span class="token string">"user1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// jedis.sadd("uv", "user3");</span>
  <span class="token comment">// jedis.sadd("uv", "user1");</span>
  <span class="token comment">// 2.	user2è®¿é—®ä¸€æ¬¡è¯¥é¡µé¢</span>
  jedis<span class="token punctuation">.</span><span class="token function">sadd</span><span class="token punctuation">(</span><span class="token string">"uv"</span><span class="token punctuation">,</span> <span class="token string">"user2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 3.	user1å†æ¬¡è®¿é—®ä¸€æ¬¡è¯¥é¡µé¢</span>
  jedis<span class="token punctuation">.</span><span class="token function">sadd</span><span class="token punctuation">(</span><span class="token string">"uv"</span><span class="token punctuation">,</span> <span class="token string">"user1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 4.	æœ€åè·å– page1çš„uvå€¼</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"uv:"</span> <span class="token operator">+</span> jedis<span class="token punctuation">.</span><span class="token function">scard</span><span class="token punctuation">(</span><span class="token string">"uv"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h1 id="Redis-è¿›é˜¶"><a href="#Redis-è¿›é˜¶" class="headerlink" title="Redis è¿›é˜¶"></a>Redis è¿›é˜¶</h1><h2 id="æŒä¹…åŒ–"><a href="#æŒä¹…åŒ–" class="headerlink" title="æŒä¹…åŒ–"></a>æŒä¹…åŒ–</h2><p>redisæ˜¯ä¸€ä¸ªå†…å­˜æ•°æ®åº“ï¼Œéœ€è¦å®šæœŸå°†æ•°æ®ä¿å­˜åˆ°ç¡¬ç›˜è¿›è¡Œ<strong>æŒä¹…åŒ–</strong>ã€‚</p>
<p>redisæä¾›äº†ä¸¤ç§æŒä¹…åŒ–æ–¹å¼ï¼š</p>
<ul>
<li>RDBï¼ˆé»˜è®¤å¼€å¯ï¼‰</li>
<li>AOF</li>
</ul>
<h3 id="RDB"><a href="#RDB" class="headerlink" title="RDB"></a>RDB</h3><blockquote>
<p>Redisä¼šå®šæœŸä¿å­˜æ•°æ®å¿«ç…§è‡³ä¸€ä¸ªrbdæ–‡ä»¶ä¸­ï¼Œå¹¶åœ¨å¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½rdbæ–‡ä»¶ï¼Œæ¢å¤ä¹‹å‰ä¿å­˜çš„æ•°æ®ã€‚</p>
</blockquote>
<p>åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾å®šä¿å­˜çš„æ—¶æœºï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">save [seconds] [changes]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>æ¯secondsç§’å†…å¦‚æœå‘ç”Ÿäº†changesæ¬¡æ•°æ®ä¿®æ”¹ï¼Œåˆ™è¿›è¡Œä¸€æ¬¡RDBå¿«ç…§ä¿å­˜</p>
<p>å¯ä»¥é…ç½®å¤šæ¡saveæŒ‡ä»¤ï¼Œè®©Redisæ‰§è¡Œ<strong>å¤šçº§çš„å¿«ç…§ä¿å­˜ç­–ç•¥</strong>ã€‚</p>
<hr>
<p>â˜•é€šè¿‡å‘½ä»¤æ‰‹åŠ¨è§¦å‘RDBå¿«ç…§ä¿å­˜ï¼š</p>
<ul>
<li>SAVEå‘½ä»¤ç›´æ¥è°ƒç”¨ rdbSave ï¼Œé˜»å¡ Redis ä¸»è¿›ç¨‹ï¼Œç›´åˆ°ä¿å­˜å®Œæˆä¸ºæ­¢ã€‚åœ¨ä¸»è¿›ç¨‹é˜»å¡æœŸé—´ï¼ŒæœåŠ¡å™¨ä¸èƒ½å¤„ç†å®¢æˆ·ç«¯çš„ä»»ä½•è¯·æ±‚ã€‚</li>
<li>BGSAVE åˆ™ fork å‡ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œå­è¿›ç¨‹è´Ÿè´£è°ƒç”¨ rdbSave ï¼Œå¹¶åœ¨ä¿å­˜å®Œæˆä¹‹åå‘ä¸»è¿›ç¨‹å‘é€ä¿¡å·ï¼Œé€šçŸ¥ä¿å­˜å·²å®Œæˆã€‚ Redis æœåŠ¡å™¨åœ¨BGSAVE æ‰§è¡ŒæœŸé—´ä»ç„¶å¯ä»¥ç»§ç»­å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</li>
</ul>
<hr>
<p>ğŸŸ¢RDBæ–¹æ¡ˆä¼˜ç‚¹ï¼š</p>
<ol>
<li>å¯¹æ€§èƒ½å½±å“å°ã€‚ï¼ˆforkå‡ºå­è¿›ç¨‹æ¥ä¿å­˜ï¼‰</li>
<li>æ¯æ¬¡å¿«ç…§ä¼šç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„æ•°æ®å¿«ç…§æ–‡ä»¶ï¼Œ<strong>å¯é çš„å¤åŸæ–¹å¼</strong>ã€‚</li>
<li>ä½¿ç”¨RDBæ–‡ä»¶è¿›è¡Œæ•°æ®æ¢å¤æ¯”ä½¿ç”¨AOFè¦å¿«å¾ˆå¤šã€‚</li>
</ol>
<p>ğŸŸ RDBæ–¹æ¡ˆç¼ºç‚¹ï¼š</p>
<ol>
<li>å¿«ç…§å®šæœŸç”Ÿæˆï¼Œæ€»ä¼šä¸¢å¤±æ•°æ®ã€‚</li>
<li>æ•°æ®é›†éå¸¸å¤§ä¸”CPUæ€§èƒ½å¼±æ—¶ï¼Œforkå­è¿›ç¨‹æ—¶ä¼šæ¶ˆè€—è¾ƒé•¿çš„æ—¶é—´ï¼Œå½±å“æœåŠ¡æ€§èƒ½ã€‚</li>
</ol>
<hr>
<p><strong>RDBé…ç½®</strong></p>
<ol>
<li>ä¿®æ”¹redisé…ç½®æ–‡ä»¶</li>
</ol>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">cd  
<span class="token operator">/</span>export<span class="token operator">/</span>server<span class="token operator">/</span>redis<span class="token operator">-</span>6<span class="token punctuation">.</span>2<span class="token punctuation">.</span>6<span class="token operator">/</span>  
vim  redis<span class="token punctuation">.</span>conf  
<span class="token comment"># ç¬¬ è¡Œ  </span>
save  900 1  
save  300 10  
save  60 10000  
save 5 1 <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>save 60 10000 è¡¨ç¤ºåœ¨60ç§’å†…ï¼Œæœ‰10000ä¸ªkeyå‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šç”Ÿæˆä¸€ä»½redisçš„å¿«ç…§</p>
</blockquote>
<ol start="2">
<li>é‡å¯redisæœåŠ¡ï¼ˆLinuxï¼‰</li>
</ol>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">ps</span> <span class="token operator">-</span>ef <span class="token punctuation">|</span> grep redis  
bin<span class="token operator">/</span>redis<span class="token operator">-</span><span class="token function">cli</span> <span class="token operator">-</span>h <span class="token namespace">[port]</span> shutdown  
bin<span class="token operator">/</span>redis<span class="token operator">-</span>server redis<span class="token punctuation">.</span>conf <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h3 id="AOF"><a href="#AOF" class="headerlink" title="AOF"></a>AOF</h3><blockquote>
<p>é‡‡ç”¨AOFæŒä¹…æ–¹å¼æ—¶ï¼ŒRedisä¼šæŠŠæ¯ä¸€ä¸ªå†™è¯·æ±‚éƒ½è®°å½•åœ¨ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶é‡Œã€‚åœ¨Redisé‡å¯æ—¶ï¼Œä¼šæŠŠAOFæ–‡ä»¶ä¸­è®°å½•çš„æ‰€æœ‰å†™æ“ä½œé¡ºåºæ‰§è¡Œä¸€éï¼Œç¡®ä¿æ•°æ®æ¢å¤åˆ°æœ€æ–°ã€‚</p>
</blockquote>
<p>é»˜è®¤å…³é—­ï¼Œéœ€è¦æ‰‹åŠ¨åœ¨é…ç½®æ–‡ä»¶ä¸­å¼€å¯ã€‚</p>
<pre class="line-numbers language-text" data-language="text"><code class="language-text"># ç¬¬594è¡Œ  
appendonly  yes <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p><strong>é…ç½®AOF</strong></p>
<ol>
<li><strong>appendfsync no</strong>ï¼šä¸è¿›è¡Œfsyncï¼Œå°†flushæ–‡ä»¶çš„æ—¶æœºäº¤ç»™OSå†³å®šï¼Œé€Ÿåº¦æœ€å¿«</li>
<li><strong>appendfsync always</strong>ï¼šæ¯å†™å…¥ä¸€æ¡æ—¥å¿—å°±è¿›è¡Œä¸€æ¬¡fsyncæ“ä½œï¼Œæ•°æ®å®‰å…¨æ€§æœ€é«˜ï¼Œä½†é€Ÿåº¦æœ€æ…¢</li>
<li><strong>appendfsync everysec</strong>ï¼šæŠ˜ä¸­çš„åšæ³•ï¼Œäº¤ç”±åå°çº¿ç¨‹æ¯ç§’fsyncä¸€æ¬¡</li>
</ol>
<hr>
<p><strong>AOF rewrite</strong></p>
<p>æ‰€æœ‰çš„å†™æ“ä½œéƒ½ä¼šè¢«è®°å½•ï¼Œä¼šäº§ç”Ÿæ— ç”¨çš„æ—¥å¿—ï¼ŒAOFæ–‡ä»¶è¿‡å¤§ä¼šè®©æ•°æ®æ¢å¤çš„æ—¶é—´å˜é•¿ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨AOF rewriteåŠŸèƒ½é‡å†™AOFæ–‡ä»¶ï¼Œåªä¿ç•™èƒ½å¤ŸæŠŠæ•°æ®æ¢å¤åˆ°æœ€æ–°çŠ¶æ€çš„æœ€å°å†™æ“ä½œé›†ã€‚</p>
<p>AOF rewriteå¯ä»¥é€šè¿‡BGREWRITEAOFå‘½ä»¤è§¦å‘ï¼Œä¹Ÿå¯ä»¥é…ç½®Rediså®šæœŸè‡ªåŠ¨è¿›è¡Œï¼š</p>
<pre class="line-numbers language-text" data-language="text"><code class="language-text">auto-aof-rewrite-percentage 100  
auto-aof-rewrite-min-size 64mb  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<ul>
<li>Redisåœ¨æ¯æ¬¡AOF rewriteæ—¶ï¼Œä¼šè®°å½•å®Œæˆrewriteåçš„AOFæ—¥å¿—å¤§å°ï¼Œå½“AOFæ—¥å¿—å¤§å°åœ¨è¯¥åŸºç¡€ä¸Šå¢é•¿äº†100%åï¼Œè‡ªåŠ¨è¿›è¡ŒAOF rewrite<br>ğŸŸ æ¯æ¬¡é‡å†™ä¹‹åå¤§å°è¿˜æ˜¯å¢åŠ çš„ï¼Œåªæ˜¯å‹ç¼©äº†</li>
<li>auto-aof-rewrite-min-sizeæœ€å¼€å§‹çš„AOFæ–‡ä»¶å¿…é¡»è¦è§¦å‘è¿™ä¸ªæ–‡ä»¶æ‰è§¦å‘ï¼Œåé¢çš„æ¯æ¬¡é‡å†™å°±ä¸ä¼šæ ¹æ®è¿™ä¸ªå˜é‡äº†ã€‚è¯¥å˜é‡ä»…åˆå§‹åŒ–å¯åŠ¨Redisæœ‰æ•ˆã€‚</li>
</ul>
<hr>
<p>ğŸŸ¢AOFä¼˜ç‚¹</p>
<ol>
<li>æ•°æ®å®‰å…¨ï¼ˆåœ¨å¯ç”¨appendfsyncä¸ºalwaysæ—¶ï¼Œä»»ä½•å·²å†™å…¥çš„æ•°æ®éƒ½ä¸ä¼šä¸¢å¤±ï¼Œä½¿ç”¨åœ¨å¯ç”¨appendfsync everysecä¹Ÿè‡³å¤šåªä¼šä¸¢å¤±1ç§’çš„æ•°æ®ï¼‰</li>
<li>AOFæ–‡ä»¶åœ¨æ–­ç”µæ—¶å€™ä¹Ÿä¸ä¼šæŸåï¼Œä½¿ç”¨redis-check-aofå·¥å…·ä¿®å¤å†™å…¥ä¸€åŠçš„æƒ…å†µã€‚</li>
<li>åœ¨è¿›è¡Œäº†é”™è¯¯çš„æ•°æ®æ¸…é™¤æ“ä½œåï¼Œå¯ä»¥å°†AOFæ–‡ä»¶ä¸­çš„é”™è¯¯å‘½ä»¤åˆ é™¤ï¼Œä»è€Œæ¢å¤æ•°æ®ã€‚</li>
</ol>
<p>ğŸŸ AOFç¼ºç‚¹</p>
<ol>
<li>AOFæ–‡ä»¶é€šå¸¸æ¯”RDBæ–‡ä»¶æ›´å¤§</li>
<li>æ€§èƒ½æ¶ˆè€—æ¯”RDBé«˜</li>
<li>æ•°æ®æ¢å¤é€Ÿåº¦æ¯”RDBæ…¢</li>
</ol>
<hr>
<blockquote>
<p>æ¯ä¸€æ¬¡RDBå¿«ç…§å’ŒAOF Rewriteéƒ½éœ€è¦Redisä¸»è¿›ç¨‹è¿›è¡Œforkæ“ä½œã€‚forkæ“ä½œæœ¬èº«å¯èƒ½ä¼šäº§ç”Ÿè¾ƒé«˜çš„è€—æ—¶ï¼Œä¸CPUå’ŒRediså ç”¨çš„å†…å­˜å¤§å°æœ‰å…³ã€‚æ ¹æ®å…·ä½“çš„æƒ…å†µåˆç†é…ç½®RDBå¿«ç…§å’ŒAOF Rewriteæ—¶æœºï¼Œé¿å…è¿‡äºé¢‘ç¹çš„forkå¸¦æ¥çš„å»¶è¿Ÿã€‚</p>
</blockquote>
<h2 id="redis-äº‹åŠ¡"><a href="#redis-äº‹åŠ¡" class="headerlink" title="redis äº‹åŠ¡"></a>redis äº‹åŠ¡</h2><p>Redisäº‹åŠ¡å°±æ˜¯ä¸€æ¬¡æ€§ã€é¡ºåºæ€§ã€æ’ä»–æ€§çš„æ‰§è¡Œä¸€ä¸ªé˜Ÿåˆ—ä¸­çš„ä¸€ç³»åˆ—å‘½ä»¤</p>
<ul>
<li><strong>Redisäº‹åŠ¡æ²¡æœ‰éš”ç¦»çº§åˆ«çš„æ¦‚å¿µ</strong><br>æ‰¹é‡æ“ä½œåœ¨å‘é€ EXEC å‘½ä»¤å‰è¢«æ”¾å…¥é˜Ÿåˆ—ç¼“å­˜ï¼Œå¹¶ä¸ä¼šè¢«å®é™…æ‰§è¡Œï¼Œä¹Ÿå°±ä¸å­˜åœ¨äº‹åŠ¡å†…çš„æŸ¥è¯¢è¦çœ‹åˆ°äº‹åŠ¡é‡Œçš„æ›´æ–°ï¼Œäº‹åŠ¡å¤–æŸ¥è¯¢ä¸èƒ½çœ‹åˆ°ã€‚</li>
<li><strong>Redisä¸ä¿è¯åŸå­æ€§</strong><br>Redisä¸­ï¼Œå•æ¡å‘½ä»¤æ˜¯åŸå­æ€§æ‰§è¡Œçš„ï¼Œä½†äº‹åŠ¡ä¸ä¿è¯åŸå­æ€§ï¼Œä¸”æ²¡æœ‰å›æ»šã€‚äº‹åŠ¡ä¸­ä»»æ„å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œå…¶ä½™çš„å‘½ä»¤ä»ä¼šè¢«æ‰§è¡Œã€‚<br>ğŸŸ è¯­æ³•é”™è¯¯ï¼ˆç¼–è¯‘å™¨é”™è¯¯ï¼‰é€ æˆçš„äº‹åŠ¡å¤±è´¥ï¼Œç»“æœä¸ä¼šæ”¹å˜<br>è¿è¡Œæ—¶çš„ç±»å‹é”™è¯¯ï¼Œä¼šè·³è¿‡é”™è¯¯å‘½ä»¤ç»§ç»­æ‰§è¡Œ<br><strong>è¯­æ³•é”™è¯¯è¯´æ˜åœ¨å‘½ä»¤å…¥é˜Ÿå‰å°±è¿›è¡Œæ£€æµ‹çš„ï¼Œè€Œç±»å‹é”™è¯¯æ˜¯åœ¨æ‰§è¡Œæ—¶æ£€æµ‹</strong><br>redisç®€å•çš„äº‹åŠ¡è§„åˆ™ä¿è¯äº†é«˜å¹¶å‘æƒ…å†µä¸‹çš„æ€§èƒ½ã€‚</li>
</ul>
<hr>
<p>ä¸€ä¸ªäº‹åŠ¡çš„ä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ul>
<li>å¼€å§‹äº‹åŠ¡</li>
<li>å‘½ä»¤å…¥é˜Ÿ</li>
<li>æ‰§è¡Œäº‹åŠ¡</li>
</ul>
<p>äº‹åŠ¡ç›¸å…³å‘½ä»¤ï¼š</p>
<ul>
<li>MULTI å¼€å¯äº‹åŠ¡ï¼Œå°†ååºå‘½ä»¤é€ä¸ªæ”¾å…¥é˜Ÿåˆ—ä¸­</li>
<li>EXEC åŸå­åŒ–æ‰§è¡Œæ‰€æœ‰æ“ä½œå‘½ä»¤</li>
<li>DISCARD å–æ¶ˆäº‹åŠ¡ï¼Œæ”¾å¼ƒæ‰§è¡Œäº‹åŠ¡å—ä¸­çš„æ‰€æœ‰å‘½ä»¤</li>
<li>WATCH<br>ç›‘è§†ä¸€ä¸ªæˆ–å¤šä¸ªkeyï¼Œå¦‚æœäº‹åŠ¡åœ¨æ‰§è¡Œå‰ï¼Œè¿™ä¸ªkeyï¼ˆæˆ–å¤šä¸ªkeyï¼‰è¢«å…¶ä»–å‘½ä»¤ä¿®æ”¹ï¼Œåˆ™äº‹åŠ¡è¢«ä¸­æ–­ï¼Œä¸ä¼šæ‰§è¡Œäº‹åŠ¡ä¸­çš„ä»»ä½•å‘½ä»¤</li>
<li>UNWATCH å–æ¶ˆå¯¹æ‰€æœ‰keyçš„ç›‘è§†</li>
</ul>
<h2 id="æ•°æ®åˆ é™¤ä¸æ·˜æ±°ç­–ç•¥"><a href="#æ•°æ®åˆ é™¤ä¸æ·˜æ±°ç­–ç•¥" class="headerlink" title="æ•°æ®åˆ é™¤ä¸æ·˜æ±°ç­–ç•¥"></a>æ•°æ®åˆ é™¤ä¸æ·˜æ±°ç­–ç•¥</h2><h3 id="è¿‡æœŸæ•°æ®"><a href="#è¿‡æœŸæ•°æ®" class="headerlink" title="è¿‡æœŸæ•°æ®"></a>è¿‡æœŸæ•°æ®</h3><p>å†…å­˜ä¸­çš„æ•°æ®å¯ä»¥é€šè¿‡TTLæŒ‡ä»¤è·å–å…¶çŠ¶æ€ï¼š</p>
<ul>
<li><strong>æ­£æ•°</strong> æ•°æ®åœ¨å†…å­˜ä¸­è¿˜èƒ½å­˜æ´»çš„æ—¶é—´</li>
<li><strong>-1</strong> æ°¸ä¹…æœ‰æ•ˆçš„æ•°æ®</li>
<li><strong>-2</strong> å·²ç»è¿‡æœŸçš„æ•°æ® / è¢«åˆ é™¤çš„æ•°æ® / æœªå®šä¹‰çš„æ•°æ®</li>
</ul>
<p><strong>åˆ é™¤ç­–ç•¥å°±æ˜¯é’ˆå¯¹å·²è¿‡æœŸæ•°æ®çš„å¤„ç†ç­–ç•¥</strong></p>
<hr>
<p><strong>æ—¶æ•ˆæ€§æ•°æ®çš„å­˜å‚¨ç»“æ„</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources@main/images/2022/image-20220520165820593.png" alt="image-20220520165820593"></p>
<hr>
<h3 id="æ•°æ®åˆ é™¤ç­–ç•¥"><a href="#æ•°æ®åˆ é™¤ç­–ç•¥" class="headerlink" title="æ•°æ®åˆ é™¤ç­–ç•¥"></a>æ•°æ®åˆ é™¤ç­–ç•¥</h3><table>
<thead>
<tr>
<th>å®šæ—¶åˆ é™¤</th>
<th>æƒ°æ€§åˆ é™¤</th>
<th>å®šæœŸåˆ é™¤</th>
</tr>
</thead>
<tbody><tr>
<td>èŠ‚çº¦å†…å­˜ï¼Œæ— å ç”¨</td>
<td>å†…å­˜å ç”¨ä¸¥é‡</td>
<td>å†…å­˜å®šæœŸéšæœºæ¸…ç†</td>
</tr>
<tr>
<td>ä¸åˆ†æ—¶æ®µå ç”¨CPUèµ„æºï¼Œé¢‘åº¦é«˜</td>
<td>å»¶æ—¶æ‰§è¡Œï¼ŒCPUåˆ©ç”¨ç‡é«˜</td>
<td>æ¯ç§’èŠ±è´¹å›ºå®šçš„CPUèµ„æºç»´æŠ¤å†…å­˜</td>
</tr>
<tr>
<td>æ‹¿æ—¶é—´æ¢ç©ºé—´</td>
<td>æ‹¿ç©ºé—´æ¢æ—¶é—´</td>
<td>éšæœºæŠ½æŸ¥ï¼Œé‡ç‚¹æŠ½æŸ¥</td>
</tr>
</tbody></table>
<p><strong>å®šæœŸåˆ é™¤</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources@main/images/2022/image-20220520204537548.png" alt="image-20220520204537548"></p>
<p>å®šæœŸåˆ é™¤å°±æ˜¯å‘¨æœŸæ€§è½®è¯¢redisåº“ä¸­çš„æ—¶æ•ˆæ€§æ•°æ®ï¼Œé‡‡ç”¨éšæœºæŠ½å–çš„ç­–ç•¥ï¼Œåˆ©ç”¨è¿‡æœŸæ•°æ®å æ¯”çš„æ–¹å¼æ§åˆ¶åˆ é™¤é¢‘åº¦ã€‚</p>
<h3 id="TODOï¼šæ•°æ®æ·˜æ±°ç­–ç•¥"><a href="#TODOï¼šæ•°æ®æ·˜æ±°ç­–ç•¥" class="headerlink" title="TODOï¼šæ•°æ®æ·˜æ±°ç­–ç•¥"></a>TODOï¼šæ•°æ®æ·˜æ±°ç­–ç•¥</h3><h2 id="ä¸»ä»å¤åˆ¶æ¶æ„"><a href="#ä¸»ä»å¤åˆ¶æ¶æ„" class="headerlink" title="ä¸»ä»å¤åˆ¶æ¶æ„"></a>ä¸»ä»å¤åˆ¶æ¶æ„</h2><p>äº’è”ç½‘ä¸‰é«˜æ¶æ„ï¼š</p>
<ul>
<li>é«˜å¹¶å‘</li>
<li>é«˜æ€§èƒ½</li>
<li>é«˜å¯ç”¨ï¼šä¸€å¹´ä¸­åº”ç”¨æœåŠ¡æ­£å¸¸è¿è¡Œçš„æ—¶é—´å å…¨å¹´æ—¶é—´çš„ç™¾åˆ†æ¯”ï¼Œå®•æœºæ—¶é—´</li>
</ul>
<p>ğŸŸ <strong>å•æœºredisçš„é£é™©ä¸é—®é¢˜</strong>ï¼š</p>
<ol>
<li>æœºå™¨æ•…éšœï¼Œæ•°æ®ä¸¢å¤±ã€‚</li>
<li>å®¹é‡ç“¶é¢ˆï¼Œå†…å­˜ä¸è¶³ã€‚</li>
</ol>
<blockquote>
<p>ä¸ºäº†é¿å…å•ç‚¹RedisæœåŠ¡å™¨æ•…éšœï¼Œå‡†å¤‡å¤šå°æœåŠ¡å™¨ï¼Œäº’ç›¸è¿é€šã€‚å°†æ•°æ®å¤åˆ¶å¤šä¸ªå‰¯æœ¬ä¿å­˜åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œè¿æ¥åœ¨ä¸€èµ·ï¼Œå¹¶ä¿è¯æ•°æ®æ˜¯åŒæ­¥çš„ã€‚å³ä½¿æœ‰å…¶ä¸­ä¸€å°æœåŠ¡å™¨å®•æœºï¼Œå…¶ä»–æœåŠ¡å™¨ä¾ç„¶å¯ä»¥ç»§ç»­æä¾›æœåŠ¡ï¼Œå®ç°Redisçš„é«˜å¯ç”¨ï¼ŒåŒæ—¶å®ç°æ•°æ®å†—ä½™å¤‡ä»½ã€‚</p>
</blockquote>
<p><strong>ä¸»ä»å¤åˆ¶å³å°†masterä¸­çš„æ•°æ®å³æ—¶ã€æœ‰æ•ˆçš„å¤åˆ¶åˆ°slaveä¸­</strong></p>
<p>ä¸€ä¸ªmasterå¯ä»¥æ‹¥æœ‰å¤šä¸ªslaveï¼Œä¸€ä¸ªslaveåªå¯¹åº”ä¸€ä¸ªmasterã€‚</p>
<p>masterèŒè´£ï¼š</p>
<ul>
<li>å†™æ•°æ®</li>
<li>æ‰§è¡Œå†™æ“ä½œæ—¶ï¼Œå°†å‡ºç°å˜åŒ–çš„æ•°æ®è‡ªåŠ¨åŒæ­¥åˆ°slave</li>
<li>è¯»æ•°æ®ï¼ˆå¯å¿½ç•¥ï¼‰</li>
</ul>
<p>slaveèŒè´£ï¼š</p>
<ul>
<li>è¯»æ•°æ®</li>
<li>å†™æ•°æ®ï¼ˆç¦æ­¢ï¼‰</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources@main/images/2022/image-20220301173950207.5b7734a4.png" alt="image-20220301173950207"></p>
<p>ğŸŸ¢ä¸»ä»å¤åˆ¶çš„ä½œç”¨ï¼š</p>
<ul>
<li>è¯»å†™åˆ†ç¦»</li>
<li>è´Ÿè½½å‡è¡¡</li>
<li>æ•…éšœæ¢å¤</li>
<li>æ•°æ®å†—ä½™</li>
</ul>
<hr>
<p><strong>ä¸»ä»å¤åˆ¶å·¥ä½œæµç¨‹</strong></p>
<ul>
<li>å»ºç«‹è¿æ¥é˜¶æ®µï¼ˆå‡†å¤‡é˜¶æ®µï¼‰</li>
<li>æ•°æ®åŒæ­¥é˜¶æ®µ</li>
<li>å‘½ä»¤ä¼ æ’­é˜¶æ®µï¼ˆåå¤åŒæ­¥ï¼‰</li>
</ul>
<h2 id="å“¨å…µæ¨¡å¼"><a href="#å“¨å…µæ¨¡å¼" class="headerlink" title="å“¨å…µæ¨¡å¼"></a>å“¨å…µæ¨¡å¼</h2><p>å¦‚æœredisçš„masterå®•æœºäº†ï¼Œéœ€è¦ä»é‚£ä¸ªslaveä¸­é‡æ–°é€‰å‡ºä¸€ä¸ªæ–°çš„masterã€‚</p>
<blockquote>
<p>å“¨å…µ(sentinel) æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œç”¨äºå¯¹ä¸»ä»ç»“æ„ä¸­çš„æ¯å°æœåŠ¡å™¨è¿›è¡Œ<strong>ç›‘æ§</strong>ï¼Œå½“å‡ºç°æ•…éšœæ—¶é€šè¿‡<strong>æŠ•ç¥¨</strong>æœºåˆ¶<strong>é€‰æ‹©</strong>æ–°çš„masterå¹¶å°†æ‰€æœ‰slaveè¿æ¥åˆ°æ–°çš„masterã€‚</p>
</blockquote>
<p><strong>ğŸŸ å“¨å…µä½œç”¨</strong></p>
<ul>
<li>ç›‘æ§masterå’Œslave</li>
<li>æŸä¸ªæœåŠ¡å™¨å‡ºç°é—®é¢˜ï¼Œå‘å…¶ä»–æœåŠ¡å™¨å‘é€é€šçŸ¥</li>
<li>è‡ªåŠ¨æ•…éšœè½¬ç§»ï¼šæ–­å¼€masterä¸slaveè¿æ¥ï¼Œé€‰å–ä¸€ä¸ªslaveä½œä¸ºmasterï¼Œå°†å…¶ä»–slaveè¿æ¥æ–°çš„masterï¼Œå¹¶å‘ŠçŸ¥å®¢æˆ·ç«¯æ–°çš„æœåŠ¡å™¨åœ°å€</li>
</ul>
<p><strong>å“¨å…µä¹Ÿæ˜¯ä¸€å°redisæœåŠ¡å™¨ï¼Œåªæ˜¯ä¸æä¾›æ•°æ®ç›¸å…³æœåŠ¡</strong></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/redis/" rel="tag"><i class="fa fa-tag"></i> redis</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/07/11/digital-watermark-note/" rel="prev" title="æ•°å­—æ°´å°è€³æ¿¡ç›®æŸ“">
                  <i class="fa fa-chevron-left"></i> æ•°å­—æ°´å°è€³æ¿¡ç›®æŸ“
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/07/11/mklink-2/" rel="next" title="å†è°ˆmklink">
                  å†è°ˆmklink <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>







<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nova-mist</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.4.0/pjax.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '.page-configurations',
    '.main-inner',
    '.post-toc-wrap',
    '.languages',
    '.pjax'
  ],
  analytics: false,
  cacheBust: false,
  scrollRestoration: false,
  scrollTo: !CONFIG.bookmark.enable
});

document.addEventListener('pjax:success', () => {
  pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  const hasTOC = document.querySelector('.post-toc');
  document.querySelector('.sidebar-inner').classList.toggle('sidebar-nav-active', hasTOC);
  document.querySelector(hasTOC ? '.sidebar-nav-toc' : '.sidebar-nav-overview').click();
  NexT.utils.updateSidebarPosition();
});
</script>


  






  



    <div class="pjax">


    </div>
</body>
</html>
