<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"nova-mist.github.io","root":"/","images":"/images","scheme":"Gemini","version":"8.2.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"}};
  </script>
<meta name="description" content="Nginx å­¦ä¹ ç¬”è®°åŸºç¡€æ¦‚å¿µweb serveråç«¯é¡¹ç›®éƒ¨ç½²ï¼š  ssm war -&gt; tomcat springboot jar -&gt; cmd run  webæœåŠ¡å™¨ï¼š  Apache é™æ€ Tomcat   a servlet container used to serve Java servlets å¤„ç†é™æ€èµ„æºæ•ˆç‡ä¸å¦‚ Nginx   Nginx    static &#x2F; dyn">
<meta property="og:type" content="article">
<meta property="og:title" content="Nginx å­¦ä¹ ç¬”è®°">
<meta property="og:url" content="https://nova-mist.github.io/2022/08/11/nginx-note/index.html">
<meta property="og:site_name" content="novamist blog">
<meta property="og:description" content="Nginx å­¦ä¹ ç¬”è®°åŸºç¡€æ¦‚å¿µweb serveråç«¯é¡¹ç›®éƒ¨ç½²ï¼š  ssm war -&gt; tomcat springboot jar -&gt; cmd run  webæœåŠ¡å™¨ï¼š  Apache é™æ€ Tomcat   a servlet container used to serve Java servlets å¤„ç†é™æ€èµ„æºæ•ˆç‡ä¸å¦‚ Nginx   Nginx    static &#x2F; dyn">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111049399.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111049167.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111049732.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111049793.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111049689.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111049653.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111049829.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111048612.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111048551.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111048807.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111048455.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111048375.png">
<meta property="article:published_time" content="2022-08-11T02:56:37.000Z">
<meta property="article:modified_time" content="2022-08-11T03:01:10.083Z">
<meta property="article:author" content="Nova-mist">
<meta property="article:tag" content="server">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111049399.png">


<link rel="canonical" href="https://nova-mist.github.io/2022/08/11/nginx-note/">


<script data-pjax class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>
<title>Nginx å­¦ä¹ ç¬”è®° | novamist blog</title>
  




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">novamist blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£<span class="badge">74</span></a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾<span class="badge">31</span></a></li>
        <li class="menu-item menu-item-stars"><a href="/stars/" rel="section"><i class="fa fa-heart fa-fw"></i>æ”¶é›†</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Nginx-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0"><span class="nav-number">1.</span> <span class="nav-text">Nginx å­¦ä¹ ç¬”è®°</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><span class="nav-number">1.1.</span> <span class="nav-text">åŸºç¡€æ¦‚å¿µ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#web-server"><span class="nav-number">1.1.1.</span> <span class="nav-text">web server</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#nginx"><span class="nav-number">1.1.2.</span> <span class="nav-text">nginx</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-number">1.2.</span> <span class="nav-text">å®‰è£…</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#TODO%EF%BC%9Avmware-%E9%85%8D%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BA"><span class="nav-number">1.2.1.</span> <span class="nav-text">TODOï¼švmware é…ç½®è™šæ‹Ÿæœº</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Docker-%E9%85%8D%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BA"><span class="nav-number">1.2.2.</span> <span class="nav-text">Docker é…ç½®è™šæ‹Ÿæœº</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8D%A2%E6%BA%90"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">æ¢æº</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-ssh"><span class="nav-number">1.2.2.2.</span> <span class="nav-text">å®‰è£… ssh</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-nginx"><span class="nav-number">1.2.2.3.</span> <span class="nav-text">å®‰è£… nginx</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%BC%80%E5%90%AF-ssh-%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95"><span class="nav-number">1.2.3.</span> <span class="nav-text">ä¸ºæœåŠ¡å™¨å¼€å¯ ssh å…å¯†ç™»å½•</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BB%E8%A6%81%E9%85%8D%E7%BD%AE"><span class="nav-number">1.3.</span> <span class="nav-text">ä¸»è¦é…ç½®</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98"><span class="nav-number">1.4.</span> <span class="nav-text">è§£å†³è·¨åŸŸé—®é¢˜</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#nginx-web-server"><span class="nav-number">1.4.1.</span> <span class="nav-text">nginx web server</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-jdk"><span class="nav-number">1.4.2.</span> <span class="nav-text">å®‰è£… jdk</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#other-web-server"><span class="nav-number">1.4.3.</span> <span class="nav-text">other web server</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%EF%BC%88%E5%BE%88%E4%B9%B1%F0%9F%A4%AF"><span class="nav-number">1.5.</span> <span class="nav-text">æµè§ˆå™¨è·¨åŸŸé—®é¢˜ï¼ˆå¾ˆä¹±ğŸ¤¯</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5"><span class="nav-number">1.5.1.</span> <span class="nav-text">åŒæºç­–ç•¥</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F"><span class="nav-number">1.5.2.</span> <span class="nav-text">è§£å†³è·¨åŸŸ</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#CORS"><span class="nav-number">1.5.2.1.</span> <span class="nav-text">CORS</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86"><span class="nav-number">1.5.2.2.</span> <span class="nav-text">æ­£å‘ä»£ç†</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86"><span class="nav-number">1.5.2.3.</span> <span class="nav-text">åå‘ä»£ç†</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E8%87%AA%E6%B5%8B"><span class="nav-number">1.6.</span> <span class="nav-text">é¡¹ç›®è‡ªæµ‹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%8E%E7%AB%AF"><span class="nav-number">1.6.1.</span> <span class="nav-text">åç«¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF"><span class="nav-number">1.6.2.</span> <span class="nav-text">å‰ç«¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F-1"><span class="nav-number">1.6.3.</span> <span class="nav-text">è§£å†³è·¨åŸŸ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AD%A3%E5%BC%8F%E5%BC%80%E5%8F%91%E4%B8%AD%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F"><span class="nav-number">1.6.4.</span> <span class="nav-text">æ­£å¼å¼€å‘ä¸­è§£å†³è·¨åŸŸ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E9%85%8D%E7%BD%AE"><span class="nav-number">1.7.</span> <span class="nav-text">å…¶ä»–é…ç½®</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#nginx-%E7%9B%91%E6%8E%A7"><span class="nav-number">1.7.1.</span> <span class="nav-text">nginx ç›‘æ§</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6"><span class="nav-number">1.7.2.</span> <span class="nav-text">è®¿é—®æ§åˆ¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">1.7.3.</span> <span class="nav-text">æ–‡ä»¶æœåŠ¡å™¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1"><span class="nav-number">1.7.4.</span> <span class="nav-text">è´Ÿè½½å‡è¡¡</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A1%A5%E5%85%85"><span class="nav-number">1.8.</span> <span class="nav-text">è¡¥å……</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Nova-mist"
      src="/uploads/avatar.png">
  <p class="site-author-name" itemprop="name">Nova-mist</p>
  <div class="site-description" itemprop="description">My blog about daily life and learning. :b</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">74</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">31</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Nova-mist" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;Nova-mist" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fas fa-cat fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.bilibili.com/" title="https:&#x2F;&#x2F;www.bilibili.com&#x2F;" rel="noopener" target="_blank">Bilibili</a>
        </li>
    </ul>
  </div>

        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://nova-mist.github.io/2022/08/11/nginx-note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.png">
      <meta itemprop="name" content="Nova-mist">
      <meta itemprop="description" content="My blog about daily life and learning. :b">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="novamist blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Nginx å­¦ä¹ ç¬”è®°
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>
      

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-08-11 10:56:37 / ä¿®æ”¹æ—¶é—´ï¼š11:01:10" itemprop="dateCreated datePublished" datetime="2022-08-11T10:56:37+08:00">2022-08-11</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="Nginx-å­¦ä¹ ç¬”è®°"><a href="#Nginx-å­¦ä¹ ç¬”è®°" class="headerlink" title="Nginx å­¦ä¹ ç¬”è®°"></a>Nginx å­¦ä¹ ç¬”è®°</h1><h2 id="åŸºç¡€æ¦‚å¿µ"><a href="#åŸºç¡€æ¦‚å¿µ" class="headerlink" title="åŸºç¡€æ¦‚å¿µ"></a>åŸºç¡€æ¦‚å¿µ</h2><h3 id="web-server"><a href="#web-server" class="headerlink" title="web server"></a>web server</h3><p>åç«¯é¡¹ç›®éƒ¨ç½²ï¼š</p>
<ul>
<li>ssm war -&gt; tomcat</li>
<li>springboot jar -&gt; cmd run</li>
</ul>
<p>webæœåŠ¡å™¨ï¼š</p>
<ul>
<li>Apache é™æ€</li>
<li>Tomcat</li>
</ul>
<blockquote>
<p>a servlet container used to serve Java servlets</p>
<p>å¤„ç†é™æ€èµ„æºæ•ˆç‡ä¸å¦‚ Nginx</p>
</blockquote>
<ul>
<li>Nginx </li>
</ul>
<blockquote>
<p>static / dynamic / reverse proxy</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://www.educba.com/nginx-vs-tomcat">Nginx vs Tomcat | Learn the Key Differences between Nginx vs Tomcat (educba.com)</a></p>
<p>ç»“åˆä½¿ç”¨</p>
<h3 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h3><p><a target="_blank" rel="noopener" href="https://www.ydlclass.com/doc21xnv/nginx/">nginxæ•™ç¨‹ | æ–‡æ¡£åˆé›† (ydlclass.com)</a></p>
<p><a target="_blank" rel="noopener" href="http://nginx.org/en/docs/">nginx documentation</a></p>
<blockquote>
<p>Nginx (â€œengine xâ€) æ˜¯ä¸€æ¬¾å¼€æºçš„ï¼Œæ”¯æŒé«˜æ€§èƒ½ã€é«˜å¹¶å‘çš„ Web æœåŠ¡å’Œä»£ç†æœåŠ¡è½¯ä»¶ã€‚</p>
</blockquote>
<p>ğŸŸ¢nginx åŠŸèƒ½ï¼š</p>
<ol>
<li>web æœåŠ¡å™¨ï¼ˆå¯ä»¥å­˜æ”¾é™æ€èµ„æºï¼‰</li>
<li>åå‘ä»£ç†ï¼ˆç”¨äºè´Ÿè½½å‡è¡¡ï¼‰</li>
<li>web cache ç¼“å­˜</li>
</ol>
<p>å“åº”å¿«ã€é«˜æ‰©å±•ã€é«˜å¹¶å‘ã€ä½å†…å­˜ã€çƒ­éƒ¨ç½²ã€‚</p>
<span id="more"></span>



<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><h3 id="TODOï¼švmware-é…ç½®è™šæ‹Ÿæœº"><a href="#TODOï¼švmware-é…ç½®è™šæ‹Ÿæœº" class="headerlink" title="TODOï¼švmware é…ç½®è™šæ‹Ÿæœº"></a>TODOï¼švmware é…ç½®è™šæ‹Ÿæœº</h3><ul>
<li>å®‰è£…é•œåƒ</li>
<li>é…ç½®ç½‘ç»œï¼ˆNATï¼‰</li>
</ul>
<blockquote>
<p>çœ‹çš„è§†é¢‘ä¸­æ˜¯ CentOS7 çš„ç½‘å¡é…ç½®</p>
</blockquote>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> /etc/sysconfig/network-scripts/

<span class="token comment"># åˆ†é…ip å­ç½‘æ©ç  ç½‘å…³ dns</span>
<span class="token function">vi</span> ifcfg-ens33

restart network
<span class="token function">ip</span> addr
<span class="token function">ping</span>

<span class="token function">netstat</span> -nplt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h3 id="Docker-é…ç½®è™šæ‹Ÿæœº"><a href="#Docker-é…ç½®è™šæ‹Ÿæœº" class="headerlink" title="Docker é…ç½®è™šæ‹Ÿæœº"></a>Docker é…ç½®è™šæ‹Ÿæœº</h3><p>ç›´æ¥ä½¿ç”¨ docker çš„ Ubuntu è¿›è¡Œä¸€éæ‰‹åŠ¨å®‰è£…ã€‚</p>
<p>ğŸŸ <strong>å¿…é¡»åœ¨ wsl ä¸­æ“ä½œ</strong></p>
<h4 id="æ¢æº"><a href="#æ¢æº" class="headerlink" title="æ¢æº"></a>æ¢æº</h4><ol>
<li>å¼€å¯å®¹å™¨ï¼Œæ›´æ–°é˜¿é‡Œæºã€‚</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å¯åŠ¨å¹¶è¿›å…¥åœæ­¢çš„Ubuntuå®¹å™¨</span>
docker start -ia <span class="token punctuation">[</span>id<span class="token punctuation">]</span>

docker inspect <span class="token punctuation">[</span>id<span class="token punctuation">]</span>

docker run -it -v /home/ysama/nginx-ubuntu:/home/volume01 --name<span class="token operator">=</span>nginx-setup ubuntu /bin/bash

<span class="token comment"># æŸ¥çœ‹æºä¿¡æ¯</span>
<span class="token comment"># container</span>
<span class="token function">cat</span> /etc/apt/sources.list

<span class="token comment"># lsb_release -a | grep Codename | awk '&#123;print $2&#125;'</span>
<span class="token comment"># æŸ¥çœ‹ç‰ˆæœ¬åä¸ºjammy</span>
<span class="token comment">#container</span>

<span class="token comment"># åœ¨wsl /home/ysama/nginx-ubuntu ç›®å½•åˆ›å»ºsources.list</span>
<span class="token comment"># wsl</span>
<span class="token function">sudo</span> <span class="token function">touch</span> sources.list
<span class="token function">sudo</span> <span class="token function">vi</span> sources.list
<span class="token comment"># wsl</span>

<span class="token comment"># åœ¨å®¹å™¨ä¸­è¿›è¡Œæ‹·è´</span>
<span class="token comment"># container</span>
<span class="token builtin class-name">cd</span> /etc/apt
<span class="token function">mv</span> sources.list sources.list.bak
<span class="token function">cp</span> /home/volume01/sources.list ./sources.list
<span class="token function">cat</span> sources.list
<span class="token comment">#container</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/a_small_cherry/article/details/123037157">Ubuntu å¿«é€Ÿæ›´æ¢é˜¿é‡Œæº_a_small_cherryçš„åšå®¢-CSDNåšå®¢_ubuntuæ›´æ¢é˜¿é‡Œäº‘æº</a></p>
<p><strong>æ›¿æ¢ç‰ˆæœ¬åå­—</strong></p>
<pre class="line-numbers language-txt" data-language="txt"><code class="language-txt">deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; $Codename main multiverse restricted universe
deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; $Codename-backports main multiverse restricted universe
deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; $Codename-proposed main multiverse restricted universe
deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; $Codename-security main multiverse restricted universe
deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; $Codename-updates main multiverse restricted universe
deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; $Codename main multiverse restricted universe
deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; $Codename-backports main multiverse restricted universe
deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; $Codename-proposed main multiverse restricted universe
deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; $Codename-security main multiverse restricted universe
deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; $Codename-updates main multiverse restricted universe<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="å®‰è£…-ssh"><a href="#å®‰è£…-ssh" class="headerlink" title="å®‰è£… ssh"></a>å®‰è£… ssh</h4><ol start="2">
<li>ã€å¯é€‰ã€‘å®‰è£…ç½‘ç»œå·¥å…·å’Œ ssh<br>ä¸ä½¿ç”¨ xshell è¿æ¥å®¹å™¨å°±ä¸ç”¨å®‰è£… ssh<br>å¯ä»¥ç›´æ¥ä½¿ç”¨ docker exec è¿›å…¥å®¹å™¨</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># container</span>
<span class="token function">apt-get</span> update

<span class="token function">apt-get</span> <span class="token function">install</span> -y <span class="token function">vim</span>
<span class="token function">apt-get</span> <span class="token function">install</span> -y net-tools
<span class="token function">apt</span> <span class="token function">install</span> -y iputils-ping

<span class="token function">apt</span> <span class="token function">install</span> openssh-server -y

<span class="token comment"># å¯åŠ¨sshæœåŠ¡</span>
<span class="token function">service</span> <span class="token function">ssh</span> start

<span class="token function">service</span> <span class="token function">ssh</span> <span class="token builtin class-name">enable</span>

<span class="token function">service</span> <span class="token function">ssh</span> status

<span class="token comment"># æŸ¥çœ‹æœåŠ¡å™¨ç›‘å¬ç«¯å£</span>
<span class="token function">netstat</span> -nlt

<span class="token comment"># æŸ¥çœ‹ç”¨æˆ·å</span>
<span class="token function">whoami</span>

<span class="token comment"># æŸ¥çœ‹æœåŠ¡è¿è¡Œ</span>
<span class="token function">ps</span> ax <span class="token operator">|</span> <span class="token function">grep</span> <span class="token function">ssh</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ol start="3">
<li>ã€å¯é€‰ã€‘é‡æ–°å¯åŠ¨å®¹å™¨å¹¶é…ç½®sshå…å¯†ç™»å½•<br><strong>ä¸æ˜ å°„22ç«¯å£æ— æ³•sshç™»å½•</strong></li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å°†åŸæ¥çš„å®¹å™¨ä¿å­˜ä¸ºé•œåƒ</span>
docker commit <span class="token punctuation">[</span>id<span class="token punctuation">]</span> nginx-setup-ssh

<span class="token comment"># è¿è¡Œæ–°çš„é•œåƒ</span>
<span class="token comment"># æŒ‚è½½è¦åœ¨wslä¸­æ“ä½œ ä¸»æœºè·¯å¾„:å®¹å™¨è·¯å¾„</span>
docker run -it -p <span class="token number">2022</span>:22 --name<span class="token operator">=</span>nginx -v /home/ysama/volume01:/home/volume01 nginx-setup-ssh /bin/bash <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>ä¿å­˜ä¸€ä¸ªæ–°çš„é•œåƒä¾›åç»­ xshell è¿æ¥ä½¿ç”¨</strong></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åœ¨ä¸»æœºå…ˆä¿å­˜ä¸€ä¸ªé•œåƒ æ­¤é•œåƒå·²ç»è®¾ç½®äº†å…å¯†ç™»å½•</span>
docker commit nginx nginx-setup-ssh-key

docker images

<span class="token comment"># è¿è¡Œæ–°çš„å®¹å™¨</span>
docker run -it -p <span class="token number">2023</span>:22  --name<span class="token operator">=</span>nginx02 nginx-setup-ssh-key /bin/bash

<span class="token comment"># å®¹å™¨ä¸­å¼€å¯æœåŠ¡</span>
<span class="token comment"># container</span>
<span class="token function">service</span> <span class="token function">ssh</span> start
<span class="token function">netstat</span>  -nlt
<span class="token comment"># Ctrl + P + Q é€€å‡ºå®¹å™¨</span>
<span class="token comment"># container</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>==TODOï¼šç›´æ¥ä½¿ç”¨ä¸€ä¸ªå¸¦æœ‰sshçš„é•œåƒ==</p>
<h4 id="å®‰è£…-nginx"><a href="#å®‰è£…-nginx" class="headerlink" title="å®‰è£… nginx"></a>å®‰è£… nginx</h4><ol start="4">
<li>å®‰è£… nginx</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ä¸€äº›ä¾èµ–åŒ…</span>
<span class="token function">apt-get</span> <span class="token function">install</span> -y gcc zlib1g-dev libpcre3 libpcre3-dev openssl libssl-dev <span class="token function">make</span>

<span class="token comment"># wget http://nginx.org/download/nginx-1.22.0.tar.gz</span>
<span class="token function">wget</span> https://fossies.org/linux/www/nginx-1.23.1.tar.gz

<span class="token comment"># è§£å‹</span>
<span class="token function">tar</span> -zvxf nginx-1.23.1.tar.gz
<span class="token builtin class-name">cd</span> nginx-1.23.1
<span class="token function">mkdir</span> /data/nginx -p

<span class="token comment"># ç¼–è¯‘å®‰è£…</span>
./configure --prefix<span class="token operator">=</span>/data/nginx --user<span class="token operator">=</span>nginx --group<span class="token operator">=</span>nginx  --with-http_ssl_module  --with-http_stub_status_module

<span class="token comment"># -M ï¼š ä¸åˆ›å»ºä¸»ç›®å½•  -s ï¼š ä¸å…è®¸ç™»å½• /sbin/nologinæ˜¯ä¸€ä¸ªæœ‰ä¸€ä¸ªç‰¹æ®Šçš„shellï¼Œä¸éœ€è¦ç™»é™†</span>
<span class="token function">useradd</span> nginx -M -s /sbin/nologin
<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span> 

<span class="token comment"># é»˜è®¤é…ç½®</span>
<span class="token comment"># ./configure</span>
<span class="token comment"># make</span>
<span class="token comment"># make install</span>

<span class="token comment"># é…ç½®æ–‡ä»¶æ˜¯å¦æ­£å¸¸</span>
/data/nginx/sbin/nginx -t 

<span class="token comment"># å¯åŠ¨æœåŠ¡</span>
/data/nginx/sbin/nginx

<span class="token comment"># æŸ¥çœ‹è¿›ç¨‹</span>
<span class="token function">netstat</span> -lntup <span class="token operator">|</span><span class="token function">grep</span> nginx

<span class="token comment"># æ£€æŸ¥ç«¯å£</span>
<span class="token function">netstat</span> -nplt

<span class="token function">curl</span> http://localhost <span class="token comment"># localhost:80</span>

<span class="token comment"># nginxå…¶ä»–å‘½ä»¤</span>
nginx -s <span class="token punctuation">[</span>signal<span class="token punctuation">]</span>

-h <span class="token comment"># help</span>

<span class="token comment"># /data/nginx/sbin/nginx -t </span>
<span class="token comment"># é‡æ–°åŠ è½½é…ç½®</span>
/data/nginx/sbin/nginx -s reload<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/somanlee/article/details/69808788">ubuntuä¸‹å®‰è£…nginxæ—¶PCREåº“ã€zlibåº“ã€OpenSSLåº“çš„å®‰è£…</a></p>
<p>ğŸŸ æ·»åŠ ç¯å¢ƒå˜é‡</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vim</span> /etc/profile

<span class="token comment"># profile</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">NGINX_HOME</span><span class="token operator">=</span>/data/nginx/sbin/
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$NGINX_HOME</span>

<span class="token builtin class-name">source</span> /etc/profile<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="ä¸ºæœåŠ¡å™¨å¼€å¯-ssh-å…å¯†ç™»å½•"><a href="#ä¸ºæœåŠ¡å™¨å¼€å¯-ssh-å…å¯†ç™»å½•" class="headerlink" title="ä¸ºæœåŠ¡å™¨å¼€å¯ ssh å…å¯†ç™»å½•"></a>ä¸ºæœåŠ¡å™¨å¼€å¯ ssh å…å¯†ç™»å½•</h3><ol>
<li><p>åœ¨ xshell <strong>è¾“å…¥ localhost åœ°å€</strong>ï¼Œç™»å½• root ç”¨æˆ·ã€‚</p>
</li>
<li><p>ç”¨æˆ·èº«ä»½éªŒè¯çš„æ—¶å€™ç‚¹å‡»ã€æµè§ˆã€‘æ¥æˆæˆä¸€ä¸ªç”¨æˆ·å…¬é’¥ï¼ˆä¸éœ€è¦å¯†ç ï¼‰å¹¶ä¿å­˜æˆæ–‡ä»¶ã€‚</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åœ¨ä¸»æœºå‘½ä»¤è¡Œç”Ÿæˆä¹Ÿå¯ä»¥</span>
<span class="token builtin class-name">cd</span> ~/.ssh
ssh-keygen -t rsa<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111049399.png" alt="image-20220807103956835"></p>
<p><img src="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111049167.png" alt="image-20220807104040876"></p>
<ol start="3">
<li><p>å°†å…¬é’¥å¤åˆ¶åˆ°ä¸»æœºçš„ <code>/home/volume01</code> ç›®å½•ï¼Œå¹¶æ·»åŠ åˆ° ssh æˆæƒå¯†é’¥ä¸­ã€‚</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åœ¨wslæŠŠå¯†é’¥å¤åˆ¶åˆ° wslå’Œå®¹å™¨çš„æŒ‚è½½ç›®å½•</span>
<span class="token builtin class-name">cd</span> /mnt/d/desktop
<span class="token function">cp</span> id_rsa_2048.pub /home/ysama/volume01

<span class="token comment"># container</span>
<span class="token builtin class-name">cd</span> /home/volume01

<span class="token function">mkdir</span> ~/.ssh
<span class="token function">cat</span> id_rsa_2048.pub <span class="token operator">>></span> ~/.ssh/authorized_keys

<span class="token comment"># é‡å¯sshæœåŠ¡</span>
<span class="token function">service</span> <span class="token function">ssh</span> restart
<span class="token comment"># container</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>åœ¨ xshell è¿æ¥æ—¶é€‰æ‹©å…¬é’¥éªŒè¯å°±å¯ä»¥é¢å¯†ç ç™»å½•äº†ã€‚</p>
</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zzz_strive/article/details/123153493">sshå…å¯†ç™»å½•_zzz_striveçš„åšå®¢-CSDNåšå®¢_sshå…å¯†ç™»é™†</a></p>
<p><a target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/471837/add-a-public-ssh-key-to-the-authorized-keys-of-a-user">Add a public ssh key to the authorized_keys of a user - Unix &amp; Linux Stack Exchange</a></p>
<p><a target="_blank" rel="noopener" href="https://goteleport.com/blog/shell-access-docker-container-with-ssh-and-docker-exec/">2 Ways to Get a Docker Shell: SSH into Docker Container or Use Docker Exec | Teleport (goteleport.com)</a></p>
<h2 id="ä¸»è¦é…ç½®"><a href="#ä¸»è¦é…ç½®" class="headerlink" title="ä¸»è¦é…ç½®"></a>ä¸»è¦é…ç½®</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ä¸è¦ä½¿ç”¨ å…³é—­é˜²ç«å¢™</span>
<span class="token comment"># systemctl stop firewalld</span>
<span class="token comment"># systemctl status firewalld</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>è™šæ‹Ÿæœºçš„æƒ…å†µï¼Œå…³é—­é˜²ç«å¢™ï¼Œè®¿é—®è™šæ‹Ÿæœº ip çš„é»˜è®¤ 80 ç«¯å£ã€‚</p>
<hr>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ä¿å­˜æ‰‹åŠ¨å®‰è£…nginxçš„é•œåƒ</span>
docker commit <span class="token punctuation">[</span>id<span class="token punctuation">]</span> nginx-setup-ok

<span class="token comment"># TODO:ç›´æ¥ä½¿ç”¨nginxå®˜æ–¹é•œåƒ</span>

<span class="token comment"># æŸ¥çœ‹é…ç½®æ–‡ä»¶</span>
<span class="token builtin class-name">cd</span> /conf
<span class="token function">cat</span> nginx.conf

<span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> nginx<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>nginxé…ç½®æ–‡ä»¶ä¸»è¦åˆ†ä¸ºå››ä¸ªéƒ¨åˆ†ï¼š</p>
<pre class="line-numbers language-nginx" data-language="nginx"><code class="language-nginx">main<span class="token punctuation">&#123;</span> <span class="token comment">#ï¼ˆå…¨å±€è®¾ç½®ï¼‰</span>
    <span class="token keyword">http</span><span class="token punctuation">&#123;</span> <span class="token comment">#æœåŠ¡å™¨é…ç½®</span>
        <span class="token keyword">upstream</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> <span class="token comment">#ï¼ˆè´Ÿè½½å‡è¡¡æœåŠ¡å™¨è®¾ç½®ï¼‰</span>
        <span class="token keyword">server</span><span class="token punctuation">&#123;</span> <span class="token comment">#ï¼ˆä¸»æœºè®¾ç½®ï¼šä¸»è¦ç”¨äºæŒ‡å®šä¸»æœºå’Œç«¯å£ï¼‰</span>
            <span class="token keyword">location</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> <span class="token comment">#ï¼ˆURLåŒ¹é…çš„è®¾ç½®ï¼‰</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>serverç»§æ‰¿è‡ªmainï¼Œlocationç»§æ‰¿è‡ªserverï¼Œupstreamä¸ä¼šç»§æ‰¿å…¶ä»–è®¾ç½®ä¹Ÿä¸ä¼šè¢«ç»§æ‰¿ã€‚</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111049732.png" alt="image-20220807175527920"></p>
<p><a target="_blank" rel="noopener" href="https://www.ydlclass.com/doc21xnv/nginx/#%E4%B8%83%E3%80%81%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%A7%A3%E8%AF%BB">nginxæ•™ç¨‹ | æ–‡æ¡£åˆé›† (ydlclass.com)</a></p>
<h2 id="è§£å†³è·¨åŸŸé—®é¢˜"><a href="#è§£å†³è·¨åŸŸé—®é¢˜" class="headerlink" title="è§£å†³è·¨åŸŸé—®é¢˜"></a>è§£å†³è·¨åŸŸé—®é¢˜</h2><h3 id="nginx-web-server"><a href="#nginx-web-server" class="headerlink" title="nginx web server"></a>nginx web server</h3><blockquote>
<p>å‰ç«¯è®¿é—®çš„æ¥å£ï¼š<a target="_blank" rel="noopener" href="http://192.168.111.200/api/host">http://192.168.111.200:80/api/host</a></p>
<p>åç«¯çš„æ¥å£ï¼š<a target="_blank" rel="noopener" href="http://192.168.111.200:8080/host">http://192.168.111.200:8080/host</a></p>
</blockquote>
<p>ç«¯å£ä¸åŒï¼Œè·¨åŸŸ</p>
<h3 id="å®‰è£…-jdk"><a href="#å®‰è£…-jdk" class="headerlink" title="å®‰è£… jdk"></a>å®‰è£… jdk</h3><ul>
<li><strong>æ‰‹åŠ¨å®‰è£…</strong></li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">tar</span> -zvxf jdk.tar.gz

<span class="token builtin class-name">cd</span> jdk

<span class="token comment"># é…ç½®ç¯å¢ƒå˜é‡</span>
<span class="token function">vim</span> /etc/profile


<span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$JAVA_HOME</span>/bin

<span class="token builtin class-name">source</span> /etc/profile

<span class="token comment"># è¿è¡Œspringboot jaråŒ…</span>
java -jar app.jar<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><strong>è‡ªåŠ¨å®‰è£…</strong></li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">apt-get</span> <span class="token function">install</span> openjdk-8-jdk

java -version<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://docs.datastax.com/en/jdk-install/doc/jdk-install/installOpenJdkDeb.html">Installing Open JDK 8 on Debian or Ubuntu Systems | Installing the JDK (datastax.com)</a></p>
<hr>
<p>ä½¿ç”¨ nginx æ‹¦æˆªè¯·æ±‚ï¼Œåå‘ä»£ç†ã€‚</p>
<pre class="line-numbers language-nginx" data-language="nginx"><code class="language-nginx"><span class="token keyword">location</span> <span class="token operator">^</span><span class="token operator">~</span><span class="token operator">/</span>api <span class="token punctuation">&#123;</span>
    <span class="token comment"># é‡å†™uri å»æ‰å‰ç¼€</span>
    <span class="token keyword">rewrite</span> <span class="token operator">^</span><span class="token operator">/</span><span class="token function">api</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">)</span>$ $<span class="token number">1</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token punctuation">:</span><span class="token number">8080</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment"># need reload</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="other-web-server"><a href="#other-web-server" class="headerlink" title="other web server"></a>other web server</h3><p>å¦‚æœæ˜¯ä¸€ä¸ª tomcat æœåŠ¡å™¨ï¼Œè¯·æ±‚è¢« nginx åå‘ä»£ç†ä¹Ÿæ²¡æœ‰ç”¨ï¼Œ<strong>è¯·æ±‚ nginx æœ¬èº«å°±æ˜¯è·¨åŸŸçš„</strong>ã€‚</p>
<ul>
<li>nginx è®¾ç½®æ ‡å¤´</li>
<li>æ¢ node æœåŠ¡å™¨ï¼Œç”¨ä¸­é—´ä»¶è¿›è¡Œæ­£å‘ä»£ç†ï¼ˆæµè§ˆå™¨è¯·æ±‚ä¸­é—´ä»¶ï¼‰</li>
</ul>
<h2 id="æµè§ˆå™¨è·¨åŸŸé—®é¢˜ï¼ˆå¾ˆä¹±ğŸ¤¯"><a href="#æµè§ˆå™¨è·¨åŸŸé—®é¢˜ï¼ˆå¾ˆä¹±ğŸ¤¯" class="headerlink" title="æµè§ˆå™¨è·¨åŸŸé—®é¢˜ï¼ˆå¾ˆä¹±ğŸ¤¯"></a>æµè§ˆå™¨è·¨åŸŸé—®é¢˜ï¼ˆå¾ˆä¹±ğŸ¤¯</h2><h3 id="åŒæºç­–ç•¥"><a href="#åŒæºç­–ç•¥" class="headerlink" title="åŒæºç­–ç•¥"></a>åŒæºç­–ç•¥</h3><p>åŒæºï¼š<strong>åè®®ã€åŸŸåã€ç«¯å£</strong>éƒ½è¦ä¸€è‡´ã€‚</p>
<blockquote>
<p>âŒ åè®®ä¸åŒ</p>
<p><a target="_blank" rel="noopener" href="http://www.example.com/">http://www.example.com</a></p>
<p><a target="_blank" rel="noopener" href="https://www.example.com/">https://www.example.com</a></p>
<p>âŒ ç«¯å£ä¸åŒ</p>
<p><a target="_blank" rel="noopener" href="http://www.example.com/">http://www.example.com:80</a></p>
<p><a target="_blank" rel="noopener" href="http://www.example.com:8080/">http://www.example.com:8080</a></p>
<p>âŒ å­åŸŸåä¸åŒ</p>
<p><a target="_blank" rel="noopener" href="http://www.store.example.com/">http://www.store.example.com</a></p>
<p><a target="_blank" rel="noopener" href="http://www.doc.example.com/">http://www.doc.example.com</a></p>
</blockquote>
<p>ğŸŸ æµè§ˆå™¨ä¼šé™åˆ¶ä¸æ˜¯åŒæºç­–ç•¥çš„è¯·æ±‚â€”â€”è·¨åŸŸè¯·æ±‚ã€‚</p>
<p><strong>æµè§ˆå™¨è®¿é—®é¡µé¢ä¸­åªèƒ½æœ‰åŒæºçš„è¯·æ±‚</strong></p>
<p>ä¸ç”¨æµè§ˆå™¨ï¼ˆä½¿ç”¨ç¨‹åºï¼‰å°±ä¸å­˜åœ¨è·¨åŸŸé—®é¢˜</p>
<h3 id="è§£å†³è·¨åŸŸ"><a href="#è§£å†³è·¨åŸŸ" class="headerlink" title="è§£å†³è·¨åŸŸ"></a>è§£å†³è·¨åŸŸ</h3><h4 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h4><p>ä½¿ç”¨ CORSï¼ˆè·¨åŸŸèµ„æºå…±äº«ï¼‰æœºåˆ¶ï¼Œåœ¨<strong>æœåŠ¡å™¨ç«¯</strong>è®¾ç½®å…è®¸è·¨åŸŸè¯·æ±‚çš„å“åº”æ ‡å¤´ã€‚</p>
<ul>
<li>ç®€å•è¯·æ±‚ä¸ä¼šè§¦å‘ cors é¢„æ£€è¯·æ±‚</li>
<li>æµè§ˆå™¨åœ¨å‘é€å¤æ‚è¯·æ±‚ä¹‹å‰ä¼šå‘é€é¢„æ£€è¯·æ±‚ï¼ŒéªŒè¯æœåŠ¡å™¨æ˜¯å¦å…è®¸è·¨åŸŸè¯·æ±‚èµ„æº</li>
</ul>
<blockquote>
<p>æµè§ˆå™¨è®¿é—®çš„å°±æ˜¯çœŸå®çš„åç«¯åœ°å€</p>
</blockquote>
<h4 id="æ­£å‘ä»£ç†"><a href="#æ­£å‘ä»£ç†" class="headerlink" title="æ­£å‘ä»£ç†"></a>æ­£å‘ä»£ç†</h4><p>webserver è¯·æ±‚ä¸ä¼šè·¨åŸŸï¼Œè®©æ¥å£å’Œå½“å‰ç«™ç‚¹åŒåŸŸï¼Œåœ¨webserverè¿›è¡Œè½¬å‘ã€‚</p>
<p>webpack</p>
<blockquote>
<p>å‰ç«¯å†™é…ç½®çš„æ—¶å€™å°±çŸ¥é“åç«¯åœ°å€</p>
</blockquote>
<pre class="line-numbers language-json" data-language="json"><code class="language-json">devServer<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    port<span class="token operator">:</span> <span class="token number">8000</span><span class="token punctuation">,</span>
    proxy<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token property">"/api"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            target<span class="token operator">:</span> <span class="token string">"http://localhost:8080"</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å‰ç«¯ç›´æ¥è®¿é—® localhost:8000/apiï¼Œ</p>
<h4 id="åå‘ä»£ç†"><a href="#åå‘ä»£ç†" class="headerlink" title="åå‘ä»£ç†"></a>åå‘ä»£ç†</h4><p>å‰ç«¯é€šè¿‡nginxä»£ç†åˆ°åç«¯æ¥å£</p>
<blockquote>
<p>å‰ç«¯ä¸çŸ¥é“åç«¯æ¥å£</p>
</blockquote>
<pre class="line-numbers language-nginx" data-language="nginx"><code class="language-nginx"><span class="token keyword">server</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">listen</span> <span class="token number">80</span><span class="token punctuation">;</span>
    <span class="token keyword">server_name</span> local<span class="token punctuation">.</span>test<span class="token punctuation">;</span>
    <span class="token keyword">location</span> <span class="token operator">/</span>api <span class="token punctuation">&#123;</span>
        <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token punctuation">:</span><span class="token number">8080</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token punctuation">:</span><span class="token number">8000</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<blockquote>
<p>æ­£å‘ä»£ç†éšè—çš„æ˜¯ç”¨æˆ·ï¼Œåå‘ä»£ç†éšè—çš„æ˜¯æœåŠ¡å™¨</p>
<p>axiosæ˜¯é€šè¿‡Promiseå®ç°å¯¹ajaxæŠ€æœ¯çš„ä¸€ç§å°è£…ï¼Œå°±åƒjqueryã€fetchã€request å¯¹ajaxçš„å°è£…ä¸€æ ·</p>
<p>ajaxæ˜¯ä¸€é¡¹æŠ€æœ¯</p>
<p>æ­£å‘ä»£ç†æ˜¯æµè§ˆå™¨ç«¯è¿›è¡Œé…ç½®çš„ï¼Œåå‘ä»£ç†æ˜¯æœåŠ¡å™¨ç«¯é…ç½®çš„</p>
</blockquote>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> systemctl restart nginx<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>ğŸŸ ä¸¤ç§ä»£ç†çš„åŒºåˆ«</strong></p>
<ul>
<li><p>node æ­£å‘ä»£ç†ï¼Œæµè§ˆå™¨è®¿é—®çš„å°±æ˜¯ node serverï¼Œå½“è®¿é—® server çš„æ¥å£çš„æ—¶å€™ä¼šè¢«è½¬å‘åˆ°åç«¯æ¥å£ã€‚<br><img src="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111049793.png" alt="image-20220808184842135"></p>
</li>
<li><p>nginx åå‘ä»£ç†ï¼Œæµè§ˆå™¨è®¿é—®çš„æ˜¯ nginx serverï¼Œåˆ†åˆ«å°†è¯·æ±‚è½¬å‘åˆ° webserver å’Œåç«¯ã€‚</p>
</li>
<li><p>nginx ä¹Ÿèƒ½åš webserverï¼Œä½†ä¸€èˆ¬åªç”¨åå‘ä»£ç†ã€‚ã€‚ã€‚</p>
</li>
<li><p>æœ€ç»ˆç»“æœéƒ½æ˜¯æµè§ˆå™¨è®¿é—®çš„éƒ½æ˜¯åŒæºçš„ï¼Œä¸å­˜åœ¨è·¨åŸŸ</p>
</li>
<li><p>æ­£å‘ node ä»£ç†å…¶å®éœ€è¦éƒ¨ç½²åˆ° node æœåŠ¡å™¨</p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/132534931">10 ç§è·¨åŸŸè§£å†³æ–¹æ¡ˆï¼ˆé™„ç»ˆææ–¹æ¡ˆï¼‰ - çŸ¥ä¹ (zhihu.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000019725263">ä»å‰ç«¯è§’åº¦ç”¨æ­£å‘ï¼Œåå‘ä»£ç†è§£å†³å¼€å‘æ—¶çš„è·¨åŸŸé—®é¢˜ - SegmentFault æ€å¦</a></p>
<h2 id="é¡¹ç›®è‡ªæµ‹"><a href="#é¡¹ç›®è‡ªæµ‹" class="headerlink" title="é¡¹ç›®è‡ªæµ‹"></a>é¡¹ç›®è‡ªæµ‹</h2><h3 id="åç«¯"><a href="#åç«¯" class="headerlink" title="åç«¯"></a>åç«¯</h3><p>å…³é”®ï¼šç¼–å†™ NginxControllerï¼Œæä¾›ä¸€ä¸ªæ¥å£å¯ä»¥è·å–<strong>æœåŠ¡ç«¯çš„ address + port</strong>ã€‚</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NginxController</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">WebServerInitializedEvent</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> port<span class="token punctuation">;</span>

    <span class="token comment">// web server å¯åŠ¨æ—¶è·å–ç«¯å£</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onApplicationEvent</span><span class="token punctuation">(</span><span class="token class-name">WebServerInitializedEvent</span> webServerInitializedEvent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>port <span class="token operator">=</span> webServerInitializedEvent<span class="token punctuation">.</span><span class="token function">getWebServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/host"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">InetAddress</span> address<span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
            address <span class="token operator">=</span> <span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getLocalHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// è¿”å› åœ°å€+ç«¯å£</span>
            <span class="token keyword">return</span> address<span class="token punctuation">.</span><span class="token function">getHostAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> port<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">UnknownHostException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token keyword">return</span> <span class="token string">"Error: host info is not available."</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æ„å»ºä¸€ä¸ª jar åŒ… <code>nginx-test-0.0.1-SNAPSHOT.jar</code>  â€”â€”ã€‹ <code>app.jar</code></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">java -jar app.jar
<span class="token comment"># java -jar app.jar --server.port=8082</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>



<h3 id="å‰ç«¯"><a href="#å‰ç«¯" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h3><ul>
<li>ä½¿ç”¨ vue ui æ­å»ºè„šæ‰‹æ¶</li>
<li>å®‰è£… vue-routerï¼ˆæ’ä»¶ï¼‰ã€axiosï¼ˆä¾èµ–ï¼‰</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111049689.png" alt="image-20220809004432483" style="zoom:80%;" />

<blockquote>
<p>ä½¿ç”¨ npm run serve è¿è¡Œçš„æ—¶å€™ä½¿ç”¨äº† webpack-dev-server ä½œä¸º http æœåŠ¡å™¨ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_31772441/article/details/119941900">æµ…ænpm run serveå‘½ä»¤_markixçš„åšå®¢-CSDNåšå®¢_npm run serve</a></p>
</blockquote>
<h3 id="è§£å†³è·¨åŸŸ-1"><a href="#è§£å†³è·¨åŸŸ-1" class="headerlink" title="è§£å†³è·¨åŸŸ"></a>è§£å†³è·¨åŸŸ</h3><p>windowsæœºä¸Šçš„å‰ç«¯ web server è¯·æ±‚åç«¯æ¥å£ï¼Œä¸€å®šå­˜åœ¨è·¨åŸŸé—®é¢˜ã€‚</p>
<p>å°†æ„å»ºå¥½çš„å‰ç«¯æ–‡ä»¶æ”¾åˆ°è™šæ‹Ÿæœºçš„ nginx serverä¸Šï¼Œå¹¶åœ¨è™šæ‹Ÿæœºä¸Šè¿è¡Œåç«¯æœåŠ¡ã€‚</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># wsl</span>
<span class="token builtin class-name">cd</span> /mnt/d/yjava/code/SpringBoot/nginx-test/target

<span class="token function">ls</span> /home/ysama

<span class="token comment"># å¤åˆ¶åˆ°å®¹å™¨çš„æŒ‚è½½å·</span>
<span class="token function">sudo</span> <span class="token function">cp</span> app.jar /home/ysama/volume01/

<span class="token comment"># å‰ç«¯æ–‡ä»¶</span>
<span class="token builtin class-name">cd</span> /mnt/d/Desktop/nginx-test
<span class="token function">sudo</span> <span class="token function">cp</span> -r ./dist /home/ysama/volume01<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ğŸŸ åœ¨windowsæœºè®¿é—®å®¹å™¨å†…çš„æœåŠ¡éœ€è¦æäº¤é•œåƒå¼€å¯ç«¯å£æ˜ å°„ã€‚</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æäº¤é•œåƒ</span>
docker commit <span class="token punctuation">[</span>id<span class="token punctuation">]</span> nginx-test

<span class="token comment"># è¿è¡Œæ—¶è®¾ç½®ç«¯å£å’Œæ•°æ®æŒ‚è½½å·</span>
docker run -it -p <span class="token number">2022</span>:22 -p <span class="token number">8090</span>:80 -p <span class="token number">8080</span>:8080 -v /home/ysama/volume01:/home/volume01 --name<span class="token operator">=</span>nginx-test nginx-test /bin/bash<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># container</span>

<span class="token comment"># å°†å‰ç«¯æ–‡ä»¶å¤åˆ¶åˆ°nginxç›®å½•</span>
<span class="token function">cp</span> -r dist/* /data/nginx/html/
<span class="token function">ls</span> /data/nginx/html/

<span class="token builtin class-name">cd</span> /home/volume01

<span class="token comment"># è¿è¡Œåç«¯springboot</span>
java -jar app.jar

<span class="token comment"># å¦èµ·ä¸€ä¸ªç»ˆç«¯è¿›å…¥å®¹å™¨</span>
docker <span class="token builtin class-name">exec</span> -it <span class="token punctuation">[</span>id<span class="token punctuation">]</span> /bin/bash

<span class="token comment"># è¿è¡Œnginx</span>
<span class="token builtin class-name">source</span> /etc/profile <span class="token comment"># æ›´æ–°ç¯å¢ƒå˜é‡ ä¹‹å‰è®¾ç½®äº†</span>
nginx

<span class="token comment"># æŸ¥çœ‹ç«¯å£è¿è¡Œæƒ…å†µ</span>
<span class="token function">netstat</span> -nlt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>åœ¨windowsæœºå¯ä»¥è®¿é—® <a target="_blank" rel="noopener" href="http://localhost:8090/">http://localhost:8090/</a> å°±æ˜¯å®¹å™¨å†…çš„ nginx web serverï¼Œä¹Ÿå¯ä»¥è®¿é—® docker ç½‘å¡åœ°å€ï¼ˆ<strong>ip addr è·å–</strong>ï¼‰ <a target="_blank" rel="noopener" href="http://172.25.155.216/">http://172.25.155.216/</a></p>
<p><strong>å¤–éƒ¨ä¸å¯ä»¥ç›´æ¥è®¿é—®å®¹å™¨ipï¼Œåªèƒ½è®¿é—® docker ç½‘å¡ip</strong></p>
<p>ä½†æ˜¯ vue ä¸­çš„è¿™æ®µä»£ç è·å–çš„æ˜¯æµè§ˆå™¨åœ°å€æ çš„ ipï¼Œè¯·æ±‚åœ¨è™šæ‹Ÿæœºæ˜¯è·¨åŸŸçš„ï¼Œ<strong>ç«¯å£æ˜ å°„åˆ°å¤–éƒ¨è¿›è¡Œæµ‹è¯•ä¹Ÿæ˜¯è·¨åŸŸçš„</strong>ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111049653.png" alt="image-20220809111749718"></p>
<p><img src="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111049829.png" alt="image-20220809112121488"></p>
<blockquote>
<p>ä½†ç›´æ¥è®¿é—®åç«¯ <a target="_blank" rel="noopener" href="http://localhost:8080/host">http://localhost:8080/host</a> nginx æ˜¯æ— æ³•ç®¡ç†çš„</p>
<p>è¿™ç§æƒ…å†µåªèƒ½åœ¨ springboot æœåŠ¡ç«¯è®¾ç½®æ ‡å¤´æ¥å¤„ç†</p>
<p>å¦‚æœä¿®æ”¹å‰ç«¯è¯·æ±‚çš„ç«¯å£åˆ°nginxï¼Œå°±å¯ä»¥ç”¨nginxé…ç½®åå‘ä»£ç†ã€‚</p>
</blockquote>
<p><strong>åœ¨ nginx é…ç½®æ–‡ä»¶ä¸­è®¾ç½®åå‘ä»£ç†</strong></p>
<pre class="line-numbers language-nginx" data-language="nginx"><code class="language-nginx"> <span class="token keyword">server</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">listen</span>       <span class="token number">80</span><span class="token punctuation">;</span>
        <span class="token keyword">server_name</span>  localhost<span class="token punctuation">;</span>
        <span class="token keyword">location</span> <span class="token operator">^</span><span class="token operator">~</span> <span class="token operator">/</span>api<span class="token operator">/</span> <span class="token punctuation">&#123;</span>
                <span class="token keyword">rewrite</span> <span class="token operator">^</span><span class="token operator">/</span><span class="token function">api</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">)</span>$ $<span class="token number">1</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token punctuation">:</span><span class="token number">8080</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111048612.png" alt="image-20220809114549172"></p>
<blockquote>
<p>å‘å‘8090 nginx web serve çš„ api è¯·æ±‚è¢«åå‘ä»£ç†åˆ°äº†åç«¯ã€‚</p>
</blockquote>
<p>ğŸŸ¢å‰é¢è¯´æ˜äº† localhost å’Œdocker ç½‘å¡åœ°å€éƒ½èƒ½è®¿é—®åˆ°åç«¯ apiï¼Œé‚£ä¹ˆé€šè¿‡ä¸¤ä¸ªåœ°å€è®¿é—® nginx web server ä¹Ÿå¯ä»¥è¢«è½¬å‘ã€‚</p>
<p>å› ä¸ºå‰ç«¯ä»£ç ä¸­è®¿é—®åç«¯æ¥å£çš„åœ°å€æ˜¯å–è‡ªæµè§ˆå™¨çš„ï¼Œå›ºå®šäº†è®¿é—® web server å’Œè½¬å‘çš„ api æ˜¯åŒæºçš„ã€‚</p>
<p>âŒå¦‚æœåœ¨å‰ç«¯ä»£ç ä¸­å›ºå®šè®¿é—® docker ç½‘å¡åœ°å€ï¼Œå¦‚æœè®¿é—® localhost:8090ï¼Œå¯¹åç«¯çš„è¯·æ±‚ä»ç„¶æ˜¯ç½‘å¡åœ°å€ï¼Œè™½ç„¶è®¾ç½®äº†nginxåå‘ä»£ç†ï¼Œ<strong>ä¸¤ç§ä¸åŒåœ°å€è®¿é—®nginxçš„æ–¹å¼æœ¬èº«å°±æ˜¯è·¨åŸŸçš„</strong>ã€‚è¿™ç§æƒ…å†µè¦å¢åŠ æ ‡å¤´ã€‚</p>
<p>ğŸŸ åå‘ä»£ç†çš„æ ¸å¿ƒæ˜¯éƒ½è®¿é—®åŒä¸€ä¸ªç›®æ ‡ï¼Œç”±nginxåœ¨åå°è½¬å‘è¯·æ±‚ã€‚</p>
<pre class="line-numbers language-nginx" data-language="nginx"><code class="language-nginx"><span class="token keyword">add_header</span> <span class="token string">'Access-Control-Allow-Origin'</span> <span class="token string">'*'</span><span class="token punctuation">;</span>
<span class="token keyword">add_header</span> <span class="token string">'Access-Control-Allow_Credentials'</span> <span class="token string">'true'</span><span class="token punctuation">;</span>
<span class="token keyword">add_header</span> <span class="token string">'Access-Control-Allow-Headers'</span> <span class="token string">'Authorization,Accept,Origin,DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Content-Range,Range'</span><span class="token punctuation">;</span>
<span class="token keyword">add_header</span> <span class="token string">'Access-Control-Allow-Methods'</span> <span class="token string">'GET,POST,OPTIONS,PUT,DELETE,PATCH'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="æ­£å¼å¼€å‘ä¸­è§£å†³è·¨åŸŸ"><a href="#æ­£å¼å¼€å‘ä¸­è§£å†³è·¨åŸŸ" class="headerlink" title="æ­£å¼å¼€å‘ä¸­è§£å†³è·¨åŸŸ"></a>æ­£å¼å¼€å‘ä¸­è§£å†³è·¨åŸŸ</h3><p>æ­£å¼å¼€å‘ä¸­ï¼Œæµè§ˆå™¨ã€nginxã€åç«¯çš„åœ°å€éƒ½æ˜¯å®Œå…¨è·¨åŸŸçš„ï¼ˆåœ°å€ä¸åŒã€ç«¯å£ä¸åŒï¼‰ã€‚</p>
<blockquote>
<p>æµè§ˆå™¨è·¨åŸŸï¼šæµè§ˆå™¨å½“å‰è®¿é—®çš„åœ°å€å°±æ˜¯ web server çš„åœ°å€ï¼Œå¦‚æœè¯·æ±‚äº†å’Œ web server ä¸åŒæºçš„åœ°å€å°±æ˜¯è·¨åŸŸã€‚</p>
</blockquote>
<p><strong>è§£å†³è·¨åŸŸçš„å‡ ç§æƒ…å†µ</strong>ï¼š</p>
<ol>
<li>ã€åå‘ä»£ç†ã€‘æµè§ˆå™¨è®¿é—®çš„éƒ½æ˜¯nginxï¼Œnginxå°†è¯·æ±‚åå‘ä»£ç†åˆ°åç«¯æ¥å£å’Œå‰ç«¯ web serverã€‚</li>
<li>ã€åå‘ä»£ç†ã€‘nginx å°±æ˜¯ web serverï¼ŒåŒæ ·åå‘ä»£ç†åç«¯æ¥å£ã€‚</li>
<li>ã€åå‘ä»£ç† + è®¾ç½®æ ‡å¤´ã€‘å…¶ä»–çš„ web server è®¿é—® nginx åå‘ä»£ç†çš„åç«¯æ¥å£ï¼Œweb server å’Œ nginx æœ¬èº«æ˜¯è·¨åŸŸçš„ã€‚</li>
<li>ã€è®¾ç½®æ ‡å¤´ã€‘web server ç›´æ¥è¯·æ±‚åç«¯æ¥å£ï¼ˆä¸å®‰å…¨ã€è€¦åˆï¼‰ï¼Œåœ¨åç«¯è®¾ç½®æ ‡å¤´</li>
</ol>
<blockquote>
<p>åå‘ä»£ç†åªæ˜¯éšè—åç«¯æ¥å£</p>
<p>æ˜¯å¦è·¨åŸŸçœ‹çš„æ˜¯æµè§ˆå™¨ä¸­è®¿é—®çš„ web server å’Œæµè§ˆå™¨ä¸­è®¿é—®çš„åç«¯æ¥å£æ˜¯å¦åŒæº</p>
<p><strong>ä¸åŒæºè¦ä¹ˆè®¾ç½®æ ‡å¤´ï¼Œè¦ä¹ˆé€šè¿‡åçœä»£ç†è®©ä¸¤è€…åŒæº</strong></p>
</blockquote>
<h2 id="å…¶ä»–é…ç½®"><a href="#å…¶ä»–é…ç½®" class="headerlink" title="å…¶ä»–é…ç½®"></a>å…¶ä»–é…ç½®</h2><h3 id="nginx-ç›‘æ§"><a href="#nginx-ç›‘æ§" class="headerlink" title="nginx ç›‘æ§"></a>nginx ç›‘æ§</h3><p>å¼€å¯ç›‘æ§æœåŠ¡ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚</p>
<pre class="line-numbers language-nginx" data-language="nginx"><code class="language-nginx"><span class="token keyword">location</span> <span class="token operator">=</span> <span class="token operator">/</span>status <span class="token punctuation">&#123;</span>
    <span class="token keyword">stub_status</span> on<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># é‡æ–°åŠ è½½é…ç½®</span>
nginx -s reload

<span class="token function">curl</span> http://localhost/status<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<table>
<thead>
<tr>
<th>çŠ¶æ€ç </th>
<th>è¡¨ç¤ºçš„æ„ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td>Active connections</td>
<td>å½“å‰æ‰€æœ‰å¤„äºæ‰“å¼€çŠ¶æ€çš„è¿æ¥æ•°</td>
</tr>
<tr>
<td>accepts</td>
<td>æ€»å…±å¤„ç†äº†å¤šå°‘ä¸ªè¿æ¥</td>
</tr>
<tr>
<td>handled</td>
<td>æˆåŠŸåˆ›å»ºå¤šå°‘æ¡æ‰‹</td>
</tr>
<tr>
<td>requests</td>
<td>æ€»å…±å¤„ç†äº†å¤šå°‘ä¸ªè¯·æ±‚</td>
</tr>
<tr>
<td>Reading</td>
<td>è¡¨ç¤ºæ­£å¤„äºæ¥æ”¶è¯·æ±‚çŠ¶æ€çš„è¿æ¥æ•°</td>
</tr>
<tr>
<td>Writing</td>
<td>è¡¨ç¤ºè¯·æ±‚å·²ç»æ¥æ”¶å®Œæˆï¼Œä¸”æ­£å¤„äºå¤„ç†è¯·æ±‚æˆ–å‘é€å“åº”çš„è¿‡ç¨‹ä¸­çš„è¿æ¥æ•°</td>
</tr>
<tr>
<td>Waiting</td>
<td>å¼€å¯keep-aliveçš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå€¼ç­‰äºactive - (reading + writing)ï¼Œæ„æ€å°±æ˜¯Nginxå·²å¤„ç†å®Œæ­£åœ¨ç­‰å€™ä¸‹ä¸€æ¬¡è¯·æ±‚æŒ‡ä»¤çš„é©»ç•™è¿æ¥</td>
</tr>
</tbody></table>
<h3 id="è®¿é—®æ§åˆ¶"><a href="#è®¿é—®æ§åˆ¶" class="headerlink" title="è®¿é—®æ§åˆ¶"></a>è®¿é—®æ§åˆ¶</h3><p>å…è®¸ã€ç¦æ­¢æŸä¸ª ip å’Œ ipæ®µã€‚</p>
<pre class="line-numbers language-nginx" data-language="nginx"><code class="language-nginx"><span class="token keyword">location</span> <span class="token operator">/</span>status <span class="token punctuation">&#123;</span>
  <span class="token keyword">stub_status</span> on<span class="token punctuation">;</span>
  <span class="token keyword">access_log</span> off<span class="token punctuation">;</span>
  <span class="token keyword">allow</span> <span class="token number">192.168</span><span class="token number">.10</span><span class="token number">.100</span><span class="token punctuation">;</span>
  <span class="token keyword">allow</span> <span class="token number">172.29</span><span class="token number">.73</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">24</span><span class="token punctuation">;</span>
  <span class="token keyword">deny</span> all<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="æ–‡ä»¶æœåŠ¡å™¨"><a href="#æ–‡ä»¶æœåŠ¡å™¨" class="headerlink" title="æ–‡ä»¶æœåŠ¡å™¨"></a>æ–‡ä»¶æœåŠ¡å™¨</h3><p>Nginxé»˜è®¤æ˜¯ä¸å…è®¸åˆ—å‡ºæ•´ä¸ªç›®å½•çš„ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111048551.png" alt="image-20220809141454734"></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/kevingrace/p/6187482.html">Nginxè™šæ‹Ÿç›®å½•aliaså’Œrootç›®å½• - æ•£å°½æµ®å - åšå®¢å›­ (cnblogs.com)</a></p>
<blockquote>
<p>ç°åœ¨ä½¿ç”¨çš„ docker å®¹å™¨å†…çš„ nginx æœåŠ¡ï¼Œé€šè¿‡å¤–éƒ¨ 8090 ç«¯å£æ˜ å°„åˆ°å†…éƒ¨ nginx 80 ç«¯å£ã€‚</p>
<p>å¦‚æœåœ°å€æœ«å°¾æ²¡æœ‰æ–œæ ï¼Œnginx ä¼šå…ˆå»æ‰¾æ–‡ä»¶ï¼Œæ²¡æœ‰æ–‡ä»¶å°±å½“æˆç›®å½•å¤„ç†ï¼Œé‡å®šå‘åˆ°æœ«å°¾åŠ ä¸Šæ–œæ ã€‚/file â€“&gt; /file/</p>
<p>ç„¶è€Œ nginx çš„é‡å®šå‘é»˜è®¤æ˜¯ä½¿ç”¨è‡ªå·±å†…éƒ¨çš„ç«¯å£çš„ï¼Œæ‰€ä»¥ä¼šäº§ç”Ÿé”™è¯¯ã€‚</p>
<p>å¦‚æœåœ¨å¤–éƒ¨è®¿é—®çš„æ˜¯ <a target="_blank" rel="noopener" href="http://localhost:8090/file">http://localhost:8090/file</a> ä¼šè‡ªåŠ¨é‡å®šå‘åˆ° <a target="_blank" rel="noopener" href="http://localhost/file/">http://localhost:80/file/</a></p>
</blockquote>
<p><strong>é‡å®šå‘å¯¼è‡´ç«¯å£ä¸¢å¤±ï¼Œè¿™ç§æƒ…å†µå¤šè§äº NATã€å®¹å™¨ä¸­ï¼Œå› ä¸ºä½¿ç”¨äº†ç«¯å£æ˜ å°„</strong></p>
<p>ğŸŸ¢è§£å†³æ–¹æ³•ï¼š</p>
<ol>
<li>æœ€å¥½çš„æ–¹æ³•æ˜¯è®©å†…å¤–ç«¯å£æ˜ å°„ç›¸åŒ 8090:8090</li>
<li>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé‡å†™è¯·æ±‚ä½¿ç”¨å¤–éƒ¨çš„ç«¯å£ã€‚</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111048807.png" alt="image-20220809221345254"></p>
<p>ä¸Šé¢è¿™ä¹ˆå†™å¯ä»¥ä¸æ”¹å˜é‡å®šå‘çš„8090ç«¯å£ï¼Œè®¿é—® <a target="_blank" rel="noopener" href="http://localhost:8090/file">http://localhost:8090/file</a>  postmanæ˜¯å¯ä»¥æ­£å¸¸é‡å®šå‘çš„ï¼Œæµè§ˆå™¨å’Œ curl å°±ä¸è¡Œã€‚</p>
<hr>
<p>ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</p>
<p>ğŸŸ ç«Ÿç„¶ï¼Œä½¿ç”¨ docker ç½‘å¡åœ°å€æµè§ˆå™¨å°±èƒ½è·³è½¬ <a target="_blank" rel="noopener" href="http://172.25.155.216:8090/file">http://172.25.155.216:8090/file</a> o(â•¥ï¹â•¥)o</p>
<p>ä¸€äº›æ²¡ç”¨ä¸Šçš„èµ„æ–™ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.faqcode4u.com/faq/408269/nginx-preserve-port-during-redirect">Nginx Preserve Port During Redirect (faqcode4u.com)</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/libaineu2004/article/details/85916905">(90æ¡æ¶ˆæ¯) HTTPè¿”å›ç ä¸­301ä¸302çš„åŒºåˆ«_libaineu2004çš„åšå®¢-CSDNåšå®¢_301è¿”å›ç </a></li>
<li><a target="_blank" rel="noopener" href="https://serverfault.com/questions/227742/prevent-port-change-on-redirect-in-nginx">varnish - Prevent port change on redirect in nginx - Server Fault</a></li>
<li><a target="_blank" rel="noopener" href="https://serverfault.com/questions/1025806/nginx-redirects-subdirectory-requests-without-trailing-slash-to-a-url-with-speci">docker - nginx redirects subdirectory requests without trailing slash to a URL with specified port - Server Fault</a></li>
<li><a target="_blank" rel="noopener" href="https://serverfault.com/questions/759762/how-to-stop-nginx-301-auto-redirect-when-trailing-slash-is-not-in-uri">apache 2.4 - How to stop nginx 301 auto redirect when trailing slash is not in URI? - Server Fault</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/bitnami/bitnami-docker-wordpress/issues/263">Missing slash on url causes 8080 redirect Â· Issue #263 Â· bitnami/bitnami-docker-wordpress (github.com)</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39681644/article/details/110887323">(90æ¡æ¶ˆæ¯) nginx location æ–œæ _æ·±åº¦ç¡¬æ ¸æ–‡:Nginxçš„301é‡å®šå‘å¤„ç†è¿‡ç¨‹åˆ†æ_weixin_39681644çš„åšå®¢-CSDNåšå®¢</a></li>
</ul>
<p><strong>æœ€åä¸€ä¸ªè¯´çš„æœ€å…¨ï¼Œå¾ˆå¤šç§åˆ†æ”¯</strong></p>
<h3 id="è´Ÿè½½å‡è¡¡"><a href="#è´Ÿè½½å‡è¡¡" class="headerlink" title="è´Ÿè½½å‡è¡¡"></a>è´Ÿè½½å‡è¡¡</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å¤šå¼€å‡ ä¸ªåç«¯</span>
java -jar app.jar --server.port<span class="token operator">=</span><span class="token number">8081</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.ydlclass.com/doc21xnv/nginx/#%E5%85%AD%E3%80%81%E4%B8%BA%E5%90%8E%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%81%9A%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1">nginxæ•™ç¨‹ | æ–‡æ¡£åˆé›† (ydlclass.com)</a></p>
<p>ngixnè´Ÿè½½å‡è¡¡çš„äº”ç§ç®—æ³•ï¼š</p>
<ol>
<li>ï¼ˆé»˜è®¤ï¼‰è½®è¯¢</li>
<li>è½®è¯¢æƒé‡</li>
<li>ip_hashï¼ŒåŒä¸€ä¸ª ip å›ºå®šè®¿é—®ä¸€å°åç«¯ server</li>
<li>url_hashï¼Œæ ¹æ® URI çš„å“ˆå¸Œç»“æœæ¥åˆ†é…</li>
<li>fair ç®—æ³•ï¼Œæ™ºèƒ½è´Ÿè½½å‡è¡¡ï¼Œè¦å®‰è£… upstream_fair æ¨¡å—</li>
</ol>
<p>nginx çš„è´Ÿè½½å‡è¡¡åŠŸèƒ½ä¾èµ–äº ngx_http_upstream_moduleæ¨¡å—ã€‚upstream æ¨¡å—åº”è¯¥æ”¾äºhttp{}æ ‡ç­¾å†…ã€‚</p>
<p>æ¨¡å—å†™æ³•å¦‚ä¸‹ï¼š</p>
<pre class="line-numbers language-nginx" data-language="nginx"><code class="language-nginx"><span class="token keyword">upstream</span> backend <span class="token punctuation">&#123;</span>
    <span class="token keyword">ip_hash</span><span class="token punctuation">;</span> 
    <span class="token keyword">server</span> backend1<span class="token punctuation">.</span>example<span class="token punctuation">.</span>com<span class="token punctuation">;</span>
    <span class="token keyword">server</span> backend2<span class="token punctuation">.</span>example<span class="token punctuation">.</span>com<span class="token punctuation">:</span><span class="token number">8080</span><span class="token punctuation">;</span>
    <span class="token keyword">server</span> <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token punctuation">:</span><span class="token number">8080</span><span class="token punctuation">;</span>
    <span class="token keyword">server</span> backup2<span class="token punctuation">.</span>example<span class="token punctuation">.</span>com<span class="token punctuation">:</span><span class="token number">8080</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ç„¶ååœ¨locationå¤„ä½¿ç”¨å¦‚ä¸‹å†™æ³•ï¼š</p>
<pre class="line-numbers language-nginx" data-language="nginx"><code class="language-nginx"><span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>backend<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>ä»¥ä¸Šå†™æ³•çš„æ„æ€å°±æ˜¯ï¼Œå°†æ¥åŒä¸€ä¸ªurlè®¿é—®æˆ‘ä»¬çš„æœåŠ¡æ—¶ï¼ŒæœåŠ¡å¯ä»¥ç”±backendä¸­çš„æœåŠ¡å™¨æŒ‰ç…§æŸç§ç‰¹å®šè§„åˆ™è½®æµæä¾›ã€‚</p>
<h2 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h2><p><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/beginners_guide.html">Beginnerâ€™s Guide (nginx.org)</a></p>
<blockquote>
<p>nginx has one master process and several worker processes. The main purpose of the master process is to read and evaluate configuration, and maintain worker processes. Worker processes do actual processing of requests. </p>
<p>ä¸»çº¿ç¨‹è¯»å–é…ç½®ã€ç®¡ç† worker çº¿ç¨‹ã€‚</p>
<p>worker çº¿ç¨‹å¤„ç†å®é™…çš„è¯·æ±‚ã€‚</p>
</blockquote>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nginx -s <span class="token punctuation">[</span>signal<span class="token punctuation">]</span>

<span class="token comment"># stop</span>
<span class="token comment"># quit ç»“æŸæ‰€æœ‰è¯·æ±‚å†é€€å‡º</span>
<span class="token comment"># reload</span>
<span class="token comment"># reopen é‡æ–°æ‰“å¼€llogæ–‡ä»¶</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>é‡æ–°åŠ è½½é…ç½®ä¼šå…ˆæ£€æŸ¥é…ç½®ï¼Œå¦‚æœé…ç½®æ­£ç¡®ï¼Œæ—§çš„ worker çº¿ç¨‹ä¼šåœæ­¢æ¥æ”¶æ–°è¯·æ±‚ï¼Œå½“å‰è¯·æ±‚éƒ½å¤„ç†å®Œäº†å°±é€€å‡ºã€‚</p>
<p>åœ¨ <code>/usr/local/nginx/logs/nginx.pid</code> å¯ä»¥çœ‹åˆ°è¿›ç¨‹</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ps</span> -ax <span class="token operator">|</span> <span class="token function">grep</span> nginx

<span class="token function">kill</span> -s QUIT <span class="token punctuation">[</span>pid<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p><img src="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111048455.png" alt="image-20220606171640915"></p>
<p><strong>é…ç½®æ–‡ä»¶ç»“æ„</strong></p>
<pre class="line-numbers language-nginx" data-language="nginx"><code class="language-nginx"><span class="token keyword">http</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">server</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">listen</span> <span class="token number">80</span><span class="token punctuation">;</span>
        
        <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">root</span> <span class="token operator">/</span>data<span class="token operator">/</span>www<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token comment"># åŒ¹é…å¼€å¤´æ˜¯/images/çš„è¯·æ±‚ /ä¹ŸåŒ¹é…ä½†é€‰æœ€é•¿çš„</span>
        <span class="token keyword">location</span> <span class="token operator">/</span>images<span class="token operator">/</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">root</span> <span class="token operator">/</span>data<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>nginx å‰ç¼€åŒ¹é…ä¼šä¼˜å…ˆåŒ¹é…æœ€é•¿çš„è·¯å¾„ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­æ²¡æœ‰å‰åé¡ºåºã€‚<strong>æ­£åˆ™è¡¨è¾¾å¼åœ¨é…ç½®ä¸­æœ‰å…ˆåé¡ºåº</strong></p>
<blockquote>
<p><code>http://localhost/images/example.png</code> request nginx will send the <code>/data/images/example.png</code> file.</p>
<p>Requests with URIs not starting with <code>/images/</code> will be mapped onto the <code>/data/www</code> directory. For example, in response to the <code>http://localhost/some/example.html</code> request nginx will send the <code>/data/www/some/example.html</code> file.</p>
</blockquote>
<p>å¯ä»¥åœ¨ log æ–‡ä»¶ä¸­æŸ¥çœ‹å‡ºé”™ä¿¡æ¯ï¼Œ<code>access.log</code> and <code>error.log</code> files in the directory <code>/usr/local/nginx/logs</code> or <code>/var/log/nginx</code>.</p>
<p>ğŸŸ¢å¦‚æœè¯·æ±‚èƒ½åŒ¹é…åˆ°æ­£åˆ™è¡¨è¾¾å¼å°±è¿›å…¥æ­£åˆ™çš„ location å—ï¼Œå¦åˆ™å†ä»æœ€é•¿çš„è·¯å¾„å¼€å§‹å°è¯•åŒ¹é…ã€‚</p>
<p><strong>ä¸€ä¸ªè½¬å‘çš„æ¡ˆä¾‹</strong></p>
<pre class="line-numbers language-nginx" data-language="nginx"><code class="language-nginx"><span class="token comment"># web server</span>
<span class="token keyword">server</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">listen</span> <span class="token number">8080</span><span class="token punctuation">;</span>
    <span class="token keyword">root</span> <span class="token operator">/</span>data<span class="token operator">/</span>up1<span class="token punctuation">;</span>

    <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-nginx" data-language="nginx"><code class="language-nginx"><span class="token comment"># proxy server</span>
<span class="token keyword">server</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token punctuation">:</span><span class="token number">8080</span><span class="token operator">/</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">location</span> <span class="token operator">~</span> \<span class="token punctuation">.</span><span class="token punctuation">(</span>gif<span class="token operator">|</span>jpg<span class="token operator">|</span>png<span class="token punctuation">)</span>$ <span class="token punctuation">&#123;</span>
        <span class="token keyword">root</span> <span class="token operator">/</span>data<span class="token operator">/</span>images<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p><strong>location</strong></p>
<p><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#location">Module ngx_http_core_module (nginx.org)</a></p>
<p><a target="_blank" rel="noopener" href="https://www.ydlclass.com/doc21xnv/nginx/#%E5%9B%9B%E3%80%81%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3">nginxæ•™ç¨‹ | æ–‡æ¡£åˆé›† (ydlclass.com)</a></p>
<p><strong>æ­£åˆ™æœ«å°¾æ˜¯</strong> <code>$</code></p>
<ul>
<li><code>~*</code> å‰ç¼€è¡¨ç¤ºå¤§å°å†™ä¸æ•æ„Ÿæ­£åˆ™ case-insensitive macOSç³»ç»Ÿ</li>
<li><code>~</code> å‰ç¼€è¡¨ç¤ºå¤§å°å†™æ•æ„Ÿæ­£åˆ™ </li>
<li><code>^~</code> å¦‚æœæœ‰è¿™ä¸ªå‰ç¼€ï¼Œè¯·æ±‚ä¼šè·³è¿‡æ­£åˆ™åŒ¹é…ç›´æ¥æ¥åˆ°è¿™ä¸ªæœ€é•¿çš„è·¯å¾„</li>
<li><code>=</code>  å®Œå…¨åŒ¹é…ï¼Œä¸å†æ˜¯ç¬¦åˆå¼€å¤´å‰ç¼€å°±è¡Œ</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202208111048375.png" alt="image-20220810142211611"></p>
<p>é»˜è®¤æœ«å°¾æ²¡æœ‰æ–œæ çš„ä¼šè¡¥ä¸Šæ–œæ å¹¶ 301é‡å®šå‘ï¼Œä½†æ˜¯å¯ä»¥æŒ‡å®šå…·ä½“çš„è·¯å¾„ã€‚</p>
<pre class="line-numbers language-nginx" data-language="nginx"><code class="language-nginx"><span class="token keyword">location</span> <span class="token operator">/</span><span class="token keyword">user</span><span class="token operator">/</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token keyword">user</span><span class="token punctuation">.</span>example<span class="token punctuation">.</span>com<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">location</span> <span class="token operator">=</span> <span class="token operator">/</span><span class="token keyword">user</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>login<span class="token punctuation">.</span>example<span class="token punctuation">.</span>com<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>ğŸŸ åŒ¹é…é¡ºåº</strong></p>
<blockquote>
<p>location çš„åŒ¹é…å¹¶ä¸å®Œå…¨æŒ‰ç…§å…¶åœ¨é…ç½®æ–‡ä»¶ä¸­å‡ºç°çš„é¡ºåºæ¥åŒ¹é…ï¼Œè¯·æ±‚URI ä¼šæŒ‰å¦‚ä¸‹è§„åˆ™è¿›è¡ŒåŒ¹é…ï¼š</p>
<ol>
<li>å…ˆç²¾å‡†åŒ¹é… <strong><code>=</code></strong> ï¼Œç²¾å‡†åŒ¹é…æˆåŠŸåˆ™ä¼šç«‹å³åœæ­¢å…¶ä»–ç±»å‹åŒ¹é…ï¼›</li>
<li>æ²¡æœ‰ç²¾å‡†åŒ¹é…æˆåŠŸæ—¶ï¼Œè¿›è¡Œå‰ç¼€åŒ¹é…ã€‚å…ˆæŸ¥æ‰¾å¸¦æœ‰ <strong><code>^~</code></strong> çš„å‰ç¼€åŒ¹é…ï¼Œå¸¦æœ‰ <strong><code>^~</code></strong> çš„å‰ç¼€åŒ¹é…æˆåŠŸåˆ™ç«‹å³åœæ­¢å…¶ä»–ç±»å‹åŒ¹é…ï¼Œæ™®é€šå‰ç¼€åŒ¹é…ï¼ˆä¸å¸¦å‚æ•° <strong><code>^~</code></strong> ï¼‰æˆåŠŸåˆ™ä¼šæš‚å­˜ï¼Œç»§ç»­æŸ¥æ‰¾æ­£åˆ™åŒ¹é…ï¼›</li>
<li><strong><code>=</code></strong> å’Œ <strong><code>^~</code></strong> å‡æœªåŒ¹é…æˆåŠŸå‰æä¸‹ï¼ŒæŸ¥æ‰¾æ­£åˆ™åŒ¹é… <strong><code>~</code></strong> å’Œ <strong><code>~\*</code></strong> ã€‚å½“åŒæ—¶æœ‰å¤šä¸ªæ­£åˆ™åŒ¹é…æ—¶ï¼ŒæŒ‰å…¶åœ¨é…ç½®æ–‡ä»¶ä¸­å‡ºç°çš„å…ˆåé¡ºåºä¼˜å…ˆåŒ¹é…ï¼Œå‘½ä¸­åˆ™ç«‹å³åœæ­¢å…¶ä»–ç±»å‹åŒ¹é…ï¼›</li>
<li>æ‰€æœ‰æ­£åˆ™åŒ¹é…å‡æœªæˆåŠŸæ—¶ï¼Œè¿”å›æ­¥éª¤ 2 ä¸­æš‚å­˜çš„æ™®é€šå‰ç¼€åŒ¹é…ï¼ˆä¸å¸¦å‚æ•° <strong><code>^~</code></strong> ï¼‰ç»“æœ</li>
</ol>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000022315733">ä¸€æ–‡ç†æ¸… nginx ä¸­çš„ location é…ç½®ï¼ˆç³»åˆ—ä¸€ï¼‰ - SegmentFault æ€å¦</a></p>
<p><a target="_blank" rel="noopener" href="https://linuxhint.com/nginx-location-regex-examples/">Nginx location regex examples (linuxhint.com)</a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/server/" rel="tag"><i class="fa fa-tag"></i> server</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/08/11/docker-note-2022/" rel="prev" title="Docker å­¦ä¹ ç¬”è®°">
                  <i class="fa fa-chevron-left"></i> Docker å­¦ä¹ ç¬”è®°
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/09/27/ssm-jsp/" rel="next" title="ssm-jsp é…ç½®ç¯å¢ƒ">
                  ssm-jsp é…ç½®ç¯å¢ƒ <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>







<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nova-mist</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.4.0/pjax.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '.page-configurations',
    '.main-inner',
    '.post-toc-wrap',
    '.languages',
    '.pjax'
  ],
  analytics: false,
  cacheBust: false,
  scrollRestoration: false,
  scrollTo: !CONFIG.bookmark.enable
});

document.addEventListener('pjax:success', () => {
  pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  const hasTOC = document.querySelector('.post-toc');
  document.querySelector('.sidebar-inner').classList.toggle('sidebar-nav-active', hasTOC);
  document.querySelector(hasTOC ? '.sidebar-nav-toc' : '.sidebar-nav-overview').click();
  NexT.utils.updateSidebarPosition();
});
</script>


  






  



    <div class="pjax">


    </div>
</body>
</html>
