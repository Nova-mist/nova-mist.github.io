<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"nova-mist.github.io","root":"/","images":"/images","scheme":"Gemini","version":"8.2.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}};
  </script>
<meta name="description" content="准备项目概述 前台参考：Fblog: 基于vue+element-ui简洁的博客模板 (gitee.com)（此模板也是基于 vue-admin-template 模板）基于 vue3 选项式 API 后台参考：PanJiaChen&#x2F;vue-admin-template: a vue2.0 minimal admin template (github.com) 基于 vue2  重构项目历程：">
<meta property="og:type" content="article">
<meta property="og:title" content="博客项目总结">
<meta property="og:url" content="https://nova-mist.github.io/2022/09/29/fblog-note/index.html">
<meta property="og:site_name" content="novamist blog">
<meta property="og:description" content="准备项目概述 前台参考：Fblog: 基于vue+element-ui简洁的博客模板 (gitee.com)（此模板也是基于 vue-admin-template 模板）基于 vue3 选项式 API 后台参考：PanJiaChen&#x2F;vue-admin-template: a vue2.0 minimal admin template (github.com) 基于 vue2  重构项目历程：">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202209292104433.jpg">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202209141407890.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202209291451898.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202209261236200.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202209241254152.png">
<meta property="article:published_time" content="2022-09-29T12:57:31.000Z">
<meta property="article:modified_time" content="2022-09-29T13:05:10.018Z">
<meta property="article:author" content="Nova-mist">
<meta property="article:tag" content="vue">
<meta property="article:tag" content="web">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202209292104433.jpg">


<link rel="canonical" href="https://nova-mist.github.io/2022/09/29/fblog-note/">


<script data-pjax class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>
<title>博客项目总结 | novamist blog</title>
  




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">novamist blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">74</span></a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">31</span></a></li>
        <li class="menu-item menu-item-stars"><a href="/stars/" rel="section"><i class="fa fa-heart fa-fw"></i>收集</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%86%E5%A4%87"><span class="nav-number">1.</span> <span class="nav-text">准备</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E6%A6%82%E8%BF%B0"><span class="nav-number">1.1.</span> <span class="nav-text">项目概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8%E6%97%A7%E9%A1%B9%E7%9B%AE"><span class="nav-number">1.2.</span> <span class="nav-text">启动旧项目</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#process-not-defined"><span class="nav-number">1.2.1.</span> <span class="nav-text">process not defined</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%A6%E4%B9%A0%E6%97%A7%E9%A1%B9%E7%9B%AE"><span class="nav-number">1.3.</span> <span class="nav-text">学习旧项目</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="nav-number">1.3.1.</span> <span class="nav-text">项目结构</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%81%E7%A7%BB"><span class="nav-number">1.4.</span> <span class="nav-text">迁移</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#vite-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84-process"><span class="nav-number">1.4.1.</span> <span class="nav-text">vite 项目中的 process</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E7%8A%B6%E6%80%81-Vuex-to-Pinia"><span class="nav-number">1.4.2.</span> <span class="nav-text">全局状态 Vuex to Pinia</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#minix-to-Composition-API"><span class="nav-number">1.4.3.</span> <span class="nav-text">minix to Composition API</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E9%A3%8E%E6%A0%BC"><span class="nav-number">2.</span> <span class="nav-text">代码风格</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8A%80%E6%9C%AF%E6%A0%88"><span class="nav-number">3.</span> <span class="nav-text">技术栈</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SASS"><span class="nav-number">3.1.</span> <span class="nav-text">SASS</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="nav-number">3.1.1.</span> <span class="nav-text">使用方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%A0%B7%E5%BC%8F%E5%8F%98%E9%87%8F"><span class="nav-number">3.1.2.</span> <span class="nav-text">使用样式变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CSS-Modules"><span class="nav-number">3.1.3.</span> <span class="nav-text">CSS Modules</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#element-plus"><span class="nav-number">3.2.</span> <span class="nav-text">element plus</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#firebase"><span class="nav-number">3.3.</span> <span class="nav-text">firebase</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8"><span class="nav-number">3.3.1.</span> <span class="nav-text">基础使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%98%E5%82%A8%E6%96%87%E7%AB%A0"><span class="nav-number">3.3.2.</span> <span class="nav-text">存储文章</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-mock-server"><span class="nav-number">3.4.</span> <span class="nav-text">使用 mock server</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Router"><span class="nav-number">3.5.</span> <span class="nav-text">Router</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1"><span class="nav-number">3.5.1.</span> <span class="nav-text">嵌套路由</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%B7%AF%E7%94%B1"><span class="nav-number">3.5.2.</span> <span class="nav-text">创建路由</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%87%8D%E7%BD%AE%E8%B7%AF%E7%94%B1"><span class="nav-number">3.5.3.</span> <span class="nav-text">重置路由</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8%E7%BB%84%E4%BB%B6%E4%B8%AD%E4%BD%BF%E7%94%A8"><span class="nav-number">3.5.4.</span> <span class="nav-text">在组件中使用</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84-1"><span class="nav-number">4.</span> <span class="nav-text">项目结构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%93%E6%9E%84%E6%A6%82%E8%BF%B0"><span class="nav-number">4.1.</span> <span class="nav-text">结构概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%87%E6%8D%A2%E6%A8%A1%E6%9D%BF"><span class="nav-number">4.2.</span> <span class="nav-text">切换模板</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%90%E6%97%A7%E3%80%91%E5%89%8D%E5%90%8E%E5%8F%B0-layout-%E5%88%86%E7%A6%BB"><span class="nav-number">4.3.</span> <span class="nav-text">【旧】前后台 layout 分离</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E6%A0%B7%E5%BC%8F"><span class="nav-number">5.</span> <span class="nav-text">基础样式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-element-plus-%E6%A0%B7%E5%BC%8F"><span class="nav-number">5.1.</span> <span class="nav-text">修改 element plus 样式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#style-css-%E5%8F%82%E8%80%83"><span class="nav-number">5.2.</span> <span class="nav-text">style.css 参考</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%87%8D%E6%9E%84%E7%BB%84%E4%BB%B6"><span class="nav-number">6.</span> <span class="nav-text">重构组件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E4%BA%9B%E6%95%88%E6%9E%9C"><span class="nav-number">6.1.</span> <span class="nav-text">一些效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#About"><span class="nav-number">6.2.</span> <span class="nav-text">About</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A1%A8%E5%8D%95-el-form"><span class="nav-number">6.2.1.</span> <span class="nav-text">表单 el-form</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Article"><span class="nav-number">6.3.</span> <span class="nav-text">Article</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Tag"><span class="nav-number">6.4.</span> <span class="nav-text">Tag</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Markdown"><span class="nav-number">6.5.</span> <span class="nav-text">Markdown</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#404-page"><span class="nav-number">6.6.</span> <span class="nav-text">404 page</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Login"><span class="nav-number">6.7.</span> <span class="nav-text">Login</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BD%92%E6%A1%A3-%E6%A0%87%E7%AD%BE%E5%BD%92%E6%A1%A3"><span class="nav-number">6.8.</span> <span class="nav-text">归档 &#x2F;标签归档</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TagManage"><span class="nav-number">6.9.</span> <span class="nav-text">TagManage</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SidebarItem"><span class="nav-number">6.10.</span> <span class="nav-text">SidebarItem</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-Item-%E4%B8%AD%E7%9A%84%E6%B8%B2%E6%9F%93%E5%87%BD%E6%95%B0"><span class="nav-number">6.11.</span> <span class="nav-text">修改 Item 中的渲染函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Article-List"><span class="nav-number">6.12.</span> <span class="nav-text">Article List</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Article-Detail"><span class="nav-number">6.13.</span> <span class="nav-text">Article Detail</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="nav-number">7.</span> <span class="nav-text">功能实现</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E7%99%BB%E5%BD%95%E6%8B%A6%E6%88%AA"><span class="nav-number">7.1.</span> <span class="nav-text">全局登录拦截</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%99%BB%E5%BD%95%E9%80%BB%E8%BE%91"><span class="nav-number">7.2.</span> <span class="nav-text">登录逻辑</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8D%A2%E7%94%A8-Spring-Boot-API"><span class="nav-number">7.3.</span> <span class="nav-text">换用 Spring Boot API</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="nav-number">7.4.</span> <span class="nav-text">工具类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%81%E8%A3%85%E8%AF%B7%E6%B1%82"><span class="nav-number">7.5.</span> <span class="nav-text">封装请求</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Nova-mist"
      src="/uploads/avatar.png">
  <p class="site-author-name" itemprop="name">Nova-mist</p>
  <div class="site-description" itemprop="description">My blog about daily life and learning. :b</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">74</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">31</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Nova-mist" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Nova-mist" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fas fa-cat fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.bilibili.com/" title="https:&#x2F;&#x2F;www.bilibili.com&#x2F;" rel="noopener" target="_blank">Bilibili</a>
        </li>
    </ul>
  </div>

        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://nova-mist.github.io/2022/09/29/fblog-note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.png">
      <meta itemprop="name" content="Nova-mist">
      <meta itemprop="description" content="My blog about daily life and learning. :b">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="novamist blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          博客项目总结
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-09-29 20:57:31 / 修改时间：21:05:10" itemprop="dateCreated datePublished" datetime="2022-09-29T20:57:31+08:00">2022-09-29</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p><img src="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202209292104433.jpg" alt="blog-image-20220929-1664456668"></p>
<h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><h3 id="项目概述"><a href="#项目概述" class="headerlink" title="项目概述"></a>项目概述</h3><ul>
<li>前台参考：<a target="_blank" rel="noopener" href="https://gitee.com/fengziy/Fblog">Fblog: 基于vue+element-ui简洁的博客模板 (gitee.com)</a>（此模板也是基于 vue-admin-template 模板）<strong>基于 vue3 选项式 API</strong></li>
<li>后台参考：<a target="_blank" rel="noopener" href="https://github.com/PanJiaChen/vue-admin-template">PanJiaChen/vue-admin-template: a vue2.0 minimal admin template (github.com)</a> <strong>基于 vue2</strong></li>
</ul>
<p>重构项目历程：</p>
<ol>
<li>运行旧项目、查看项目结构</li>
<li>研究相关技术栈并切换为目前 vue3 主流技术栈</li>
<li>深入各个组件，使用 <strong>vue3 组合式 API</strong> 重构</li>
<li>对接后端 API 接口</li>
</ol>
<p>🟢重构项目技术栈：</p>
<ul>
<li>vue3 + vite 创建项目</li>
<li>element-plus 组件库</li>
<li>vue-router 路由</li>
<li>pinia 全局状态管理</li>
<li>tailwindcss 命名类样式</li>
<li>axios 请求后端(封装成 request.js)</li>
<li>marked 解析 Markdown</li>
<li>mockjs 测试数据</li>
<li>sass 兼容用样式</li>
</ul>
<span id="more"></span>



<h3 id="启动旧项目"><a href="#启动旧项目" class="headerlink" title="启动旧项目"></a>启动旧项目</h3><p>旧项目使用了 webpack，在启动的时候遇到了 <em>Digital Envelope Routines::Unsupported</em> 报错。</p>
<p><a target="_blank" rel="noopener" href="https://gankrin.org/how-to-fix-error-digital-envelope-routinesunsupported-in-node-js-or-react/">How To Fix Error - “Digital Envelope Routines::Unsupported” in Node.js or React ? - Gankrin</a></p>
<p>修改 <code>package.json</code></p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
    <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"set NODE_OPTIONS=--openssl-legacy-provider &amp;&amp; vue-cli-service serve"</span><span class="token punctuation">,</span>
        <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"set NODE_OPTIONS=--openssl-legacy-provider &amp;&amp; vue-cli-service build"</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h4 id="process-not-defined"><a href="#process-not-defined" class="headerlink" title="process not defined"></a>process not defined</h4><p><img src="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202209141407890.png" alt="image-20220914140703165"></p>
<p>自行添加</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// vite.config.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    define<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        process<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            platform<span class="token operator">:</span> <span class="token string">"win32"</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="学习旧项目"><a href="#学习旧项目" class="headerlink" title="学习旧项目"></a>学习旧项目</h3><h4 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h4><ul>
<li>api 目录和 views 目录中的模块对应</li>
<li>全局公用的组件放在 components 目录，页面级组件放在 views 目录。</li>
<li>store 主要存放登录 token、用户信息，低耦合的文章数据可以放在单独页面中</li>
<li>封装 axios</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903476661583880">手摸手，带你用vue撸后台 系列一（基础篇） - 掘金 (juejin.cn)</a></p>
<p>不认识的工具：</p>
<ul>
<li>plopfile</li>
<li>postcss</li>
<li>jest</li>
<li>babel</li>
<li>travis</li>
<li>editorconfig</li>
<li>mock.js</li>
</ul>
<p><code>.env.development</code> 和 <code>.env.production</code> 是用来切换接口的环境配置文件。</p>
<h3 id="迁移"><a href="#迁移" class="headerlink" title="迁移"></a>迁移</h3><h4 id="vite-项目中的-process"><a href="#vite-项目中的-process" class="headerlink" title="vite 项目中的 process"></a>vite 项目中的 process</h4><blockquote>
<p>process is not defined</p>
<p>process.cwd is not a function</p>
</blockquote>
<p><code>process</code> 对象是一个全局变量，暴露当前 Node.js进程的信息：</p>
<ul>
<li><code>process.env </code> 环境变量</li>
<li><code>process.cwd()</code> 当前进程工作目录</li>
<li><code>process.platform</code> 当前进程运行的操作系统平台</li>
</ul>
<p>在 vite 项目中，<code>process</code> 特性已经被移除了，要在代码中获取环境变量需要修改</p>
<p> <code>process.env</code> 变为 <code>import.meta.env</code> 。</p>
<p>自定义的配置例如接口地址等需要写在 <code>.env</code> 文件中，并且需要以 <code>VITE_</code> 为前缀的变量才会暴露给客户端代码。</p>
<p><a target="_blank" rel="noopener" href="https://cn.vitejs.dev/guide/env-and-mode.html">环境变量和模式 | Vite 官方中文文档 (vitejs.dev)</a></p>
<hr>
<p>从 vue-cli 迁移到 vite 项目的时候，有的代码使用的依赖还会直接调用 <code>process</code> ，例如 node 的 <code>path</code> 模块：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">var</span> isWindows <span class="token operator">=</span> process<span class="token punctuation">.</span>platform <span class="token operator">===</span> <span class="token string">'win32'</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token punctuation">(</span>i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span> arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">:</span> process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>此时会显示未定义报错。</p>
<p>参考：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/71104342/unable-to-access-process-variable-in-vue3js-vite-project">javascript - Unable to access process variable in Vue3JS Vite project - Stack Overflow</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/72221740/how-do-i-polyfill-the-process-node-module-in-the-vite-dev-server">javascript - How do I polyfill the “process” Node module in the Vite dev server? - Stack Overflow</a></li>
<li><a target="_blank" rel="noopener" href="https://gist.github.com/FbN/0e651105937c8000f10fefdf9ec9af3d">vite.config.js node built-in polyfills (github.com)</a></li>
</ul>
<p>如果只是需要 <code>process.ev</code> 或 <code>process.platform</code> 可以尝试在 <code>vite.config.js</code> 中设置：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">define<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    process<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      platform<span class="token operator">:</span> <span class="token string">"win32"</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token comment">// "process.platform": "'win32'",</span>
    <span class="token string">"process.ev"</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>🟢最终的解决方案是按照此 <a target="_blank" rel="noopener" href="https://gist.github.com/FbN/0e651105937c8000f10fefdf9ec9af3d">vite 配置文件</a> 的写法进行设置。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i @esbuild-plugins/node-globals-polyfill @esbuild-plugins/node-modules-polyfill<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> defineConfig <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vite"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token string">"dotenv/config"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> viteMockServe <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vite-plugin-mock"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">"@vitejs/plugin-vue"</span><span class="token punctuation">;</span>

<span class="token comment">// @</span>
<span class="token keyword">import</span> alias <span class="token keyword">from</span> <span class="token string">"@rollup/plugin-alias"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> resolve <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"path"</span><span class="token punctuation">;</span>

<span class="token comment">// yarn add --dev @esbuild-plugins/node-globals-polyfill</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> NodeGlobalsPolyfillPlugin <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"@esbuild-plugins/node-globals-polyfill"</span><span class="token punctuation">;</span>
<span class="token comment">// yarn add --dev @esbuild-plugins/node-modules-polyfill</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> NodeModulesPolyfillPlugin <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"@esbuild-plugins/node-modules-polyfill"</span><span class="token punctuation">;</span>
<span class="token comment">// You don't need to add this to deps, it's included by @esbuild-plugins/node-modules-polyfill</span>
<span class="token keyword">import</span> rollupNodePolyFill <span class="token keyword">from</span> <span class="token string">"rollup-plugin-node-polyfills"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> projectRootDir <span class="token operator">=</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// https://vitejs.dev/config/</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">viteMockServe</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      mockPath<span class="token operator">:</span> <span class="token string">"./src/mock"</span><span class="token punctuation">,</span>
      localEnabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">alias</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      entries<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
          find<span class="token operator">:</span> <span class="token string">"@"</span><span class="token punctuation">,</span>
          replacement<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>projectRootDir<span class="token punctuation">,</span> <span class="token string">"src"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// define: &#123;</span>
  <span class="token comment">//   process: &#123;</span>
  <span class="token comment">//     platform: "win32",</span>
  <span class="token comment">//   &#125;,</span>
  <span class="token comment">//   "process.ev": process.env,</span>
  <span class="token comment">// &#125;,</span>
  server<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    host<span class="token operator">:</span> <span class="token string">"0.0.0.0"</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">5173</span><span class="token punctuation">,</span>
    open<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    cors<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  resolve<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    alias<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      util<span class="token operator">:</span> <span class="token string">"rollup-plugin-node-polyfills/polyfills/util"</span><span class="token punctuation">,</span>
      sys<span class="token operator">:</span> <span class="token string">"util"</span><span class="token punctuation">,</span>
      events<span class="token operator">:</span> <span class="token string">"rollup-plugin-node-polyfills/polyfills/events"</span><span class="token punctuation">,</span>
      stream<span class="token operator">:</span> <span class="token string">"rollup-plugin-node-polyfills/polyfills/stream"</span><span class="token punctuation">,</span>
      path<span class="token operator">:</span> <span class="token string">"rollup-plugin-node-polyfills/polyfills/path"</span><span class="token punctuation">,</span>
      querystring<span class="token operator">:</span> <span class="token string">"rollup-plugin-node-polyfills/polyfills/qs"</span><span class="token punctuation">,</span>
      punycode<span class="token operator">:</span> <span class="token string">"rollup-plugin-node-polyfills/polyfills/punycode"</span><span class="token punctuation">,</span>
      url<span class="token operator">:</span> <span class="token string">"rollup-plugin-node-polyfills/polyfills/url"</span><span class="token punctuation">,</span>
      string_decoder<span class="token operator">:</span> <span class="token string">"rollup-plugin-node-polyfills/polyfills/string-decoder"</span><span class="token punctuation">,</span>
      http<span class="token operator">:</span> <span class="token string">"rollup-plugin-node-polyfills/polyfills/http"</span><span class="token punctuation">,</span>
      https<span class="token operator">:</span> <span class="token string">"rollup-plugin-node-polyfills/polyfills/http"</span><span class="token punctuation">,</span>
      os<span class="token operator">:</span> <span class="token string">"rollup-plugin-node-polyfills/polyfills/os"</span><span class="token punctuation">,</span>
      assert<span class="token operator">:</span> <span class="token string">"rollup-plugin-node-polyfills/polyfills/assert"</span><span class="token punctuation">,</span>
      constants<span class="token operator">:</span> <span class="token string">"rollup-plugin-node-polyfills/polyfills/constants"</span><span class="token punctuation">,</span>
      _stream_duplex<span class="token operator">:</span>
        <span class="token string">"rollup-plugin-node-polyfills/polyfills/readable-stream/duplex"</span><span class="token punctuation">,</span>
      _stream_passthrough<span class="token operator">:</span>
        <span class="token string">"rollup-plugin-node-polyfills/polyfills/readable-stream/passthrough"</span><span class="token punctuation">,</span>
      _stream_readable<span class="token operator">:</span>
        <span class="token string">"rollup-plugin-node-polyfills/polyfills/readable-stream/readable"</span><span class="token punctuation">,</span>
      _stream_writable<span class="token operator">:</span>
        <span class="token string">"rollup-plugin-node-polyfills/polyfills/readable-stream/writable"</span><span class="token punctuation">,</span>
      _stream_transform<span class="token operator">:</span>
        <span class="token string">"rollup-plugin-node-polyfills/polyfills/readable-stream/transform"</span><span class="token punctuation">,</span>
      timers<span class="token operator">:</span> <span class="token string">"rollup-plugin-node-polyfills/polyfills/timers"</span><span class="token punctuation">,</span>
      console<span class="token operator">:</span> <span class="token string">"rollup-plugin-node-polyfills/polyfills/console"</span><span class="token punctuation">,</span>
      vm<span class="token operator">:</span> <span class="token string">"rollup-plugin-node-polyfills/polyfills/vm"</span><span class="token punctuation">,</span>
      zlib<span class="token operator">:</span> <span class="token string">"rollup-plugin-node-polyfills/polyfills/zlib"</span><span class="token punctuation">,</span>
      tty<span class="token operator">:</span> <span class="token string">"rollup-plugin-node-polyfills/polyfills/tty"</span><span class="token punctuation">,</span>
      domain<span class="token operator">:</span> <span class="token string">"rollup-plugin-node-polyfills/polyfills/domain"</span><span class="token punctuation">,</span>
      buffer<span class="token operator">:</span> <span class="token string">"rollup-plugin-node-polyfills/polyfills/buffer-es6"</span><span class="token punctuation">,</span>

      process<span class="token operator">:</span> <span class="token string">"rollup-plugin-node-polyfills/polyfills/process-es6"</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  optimizeDeps<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    esbuildOptions<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">// Node.js global to browser globalThis</span>
      define<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        global<span class="token operator">:</span> <span class="token string">"globalThis"</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token comment">// Enable esbuild polyfill plugins</span>
      plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token function">NodeGlobalsPolyfillPlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
          process<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          buffer<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">NodeModulesPolyfillPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  build<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    outDir<span class="token operator">:</span> <span class="token string">"dist"</span><span class="token punctuation">,</span>
    rollupOptions<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// Enable rollup polyfills plugin</span>
        <span class="token comment">// used during production bundling</span>
        <span class="token function">rollupNodePolyFill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h4 id="全局状态-Vuex-to-Pinia"><a href="#全局状态-Vuex-to-Pinia" class="headerlink" title="全局状态 Vuex to Pinia"></a>全局状态 Vuex to Pinia</h4><p><a target="_blank" rel="noopener" href="https://pinia.vuejs.org/cookbook/migration-vuex.html#converting-a-single-module">Migrating from Vuex ≤4 | Pinia (vuejs.org)</a></p>
<ol>
<li>vuex 中的 mutations 也变为了 Pinia 的 actions，并且去掉了参数中的 <code>state</code>，可以直接使用 <code>this</code> 访问 state，箭头函数改为普通方法</li>
<li>vuex 中的 actions 去掉 <code>&#123;state, commit&#125;</code> 参数，不再使用 <code>commit</code> 而是直接使用 <code>this</code> 调用 actions （原 mutations）</li>
</ol>
<h4 id="minix-to-Composition-API"><a href="#minix-to-Composition-API" class="headerlink" title="minix to Composition API"></a>minix to Composition API</h4><p><a target="_blank" rel="noopener" href="https://www.syncfusion.com/blogs/post/can-the-composition-api-replace-vue-mixins.aspx">Can the Composition API Replace Vue Mixins? | Syncfusion Blogs</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904136065056781">Vue3 Composition API如何替换Vue Mixins - 掘金 (juejin.cn)</a></p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script setup&gt;
import useCounter from &quot;.&#x2F;useCounter.js&quot;;
const &#123; count, double, increment &#125; &#x3D; useCounter();
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>or</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script&gt;
&#x2F;&#x2F; MyComponent.js
import useCounter from &quot;.&#x2F;useCounter.js&quot;;

export default &#123;
  setup() &#123;
    const &#123; count, double, increment &#125; &#x3D; useCounter();
    return &#123;
      count,
      double,
      increment
    &#125;
  &#125;
&#125;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h2 id="代码风格"><a href="#代码风格" class="headerlink" title="代码风格"></a>代码风格</h2><p>使用 Vue3 的组合式 API</p>
<p>组合式语法糖 <code>&lt;script setup&gt;</code> 可以和 <code>&lt;script&gt;</code> 选项式一起使用。</p>
<p><a target="_blank" rel="noopener" href="https://cn.vuejs.org/style-guide/">Style Guide | Vue.js (vuejs.org)</a></p>
<h2 id="技术栈"><a href="#技术栈" class="headerlink" title="技术栈"></a>技术栈</h2><h3 id="SASS"><a href="#SASS" class="headerlink" title="SASS"></a>SASS</h3><h4 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h4><blockquote>
<p>SASS版本3.0之前的后缀名为.sass，而版本3.0之后的后缀名.scss。</p>
</blockquote>
<p><code>scss</code> 会在运行时编译成 <code>css</code></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">add</span> -D sass<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>引入 <code>.scss</code> 的方法：<a target="_blank" rel="noopener" href="https://cn.vitejs.dev/guide/features.html#css">参考 Vite 官方文档</a></p>
<ul>
<li><p>全局引入</p>
<ul>
<li> <code>main.js</code></li>
<li><code>style.css</code></li>
<li><code>App.vue</code> 的 <code>&lt;script&gt;</code> 标签</li>
</ul>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// main.js or App.vue &lt;script></span>
<span class="token keyword">import</span> <span class="token string">"/src/styles/body.scss"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token atrule"><span class="token rule">@import</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"./styles/body.scss"</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
<li><p>在 <code>App.vue</code> 的 <code>&lt;style&gt;</code> 标签中引入，可是使用 <code>scoped</code> 限定范围，不加就是全局注入</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;
@import url(&quot;.&#x2F;styles&#x2F;body.scss&quot;);
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li>
</ul>
<h4 id="使用样式变量"><a href="#使用样式变量" class="headerlink" title="使用样式变量"></a>使用样式变量</h4><p>使用类似 CSS Modules 的形式引入 scss 文件中的样式变量</p>
<ol>
<li><p>必须要以 <code>xxx.module.scss</code> 的方式命名，否则引入无效。</p>
<pre class="line-numbers language-scss" data-language="scss"><code class="language-scss"><span class="token property"><span class="token variable">$menuBg</span></span><span class="token punctuation">:</span> #304156<span class="token punctuation">;</span>

<span class="token selector">:export </span><span class="token punctuation">&#123;</span>
    <span class="token property">menuBg</span><span class="token punctuation">:</span> <span class="token variable">$menuBg</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>在 <code>App.vue</code> 中引入整体，然后通过解构获取变量</p>
</li>
<li><p>在 <code>&lt;style&gt;</code> 标签中使用 <code>v-bind</code> 绑定样式变量。样式变量也可以作为<strong>字符串属性</strong>传递给 element-plus 等组件库。</p>
</li>
<li><p>给要应用该样式的标签加一个 class 名字吧。</p>
</li>
</ol>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script setup&gt;
import variables from &quot;@&#x2F;styles&#x2F;body.scss&quot;;
const &#123; menuBg &#125; &#x3D; variables;
&lt;&#x2F;script&gt;
&lt;template&gt;
	&lt;h1 class&#x3D;&quot;test&quot;&gt;Test&lt;&#x2F;h1&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
    .test &#123;
      background-color: v-bind(menuBg);
    &#125;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>关于解构引入的 scss 这种用法的参考：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://github.com/vitejs/vite/discussions/9601">How to share variables between JS and SCSS? · Discussion #9601 · vitejs/vite (github.com)</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/webpack-contrib/sass-loader/issues/951#issuecomment-1139555654">使用了@import 的 .module.scss 例子</a></li>
</ol>
<h4 id="CSS-Modules"><a href="#CSS-Modules" class="headerlink" title="CSS Modules"></a>CSS Modules</h4><p>具体用法就是在 <code>xxx.module.css</code> 或 <code>xxx.module.scss</code> 中定义类样式：</p>
<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* index.module.css */</span>
<span class="token selector">.red</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">.aquaColor</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> aquamarine<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>接着在 <code>App.vue</code> 中引入并添加在相应标签上</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script setup&gt;
import classes from &quot;.&#x2F;styles&#x2F;index.module.css&quot;;
&lt;&#x2F;script&gt;
&lt;template&gt;
  &lt;h1 :class&#x3D;&quot;classes.aquaColor&quot;&gt;Test&lt;&#x2F;h1&gt;
&lt;&#x2F;template&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>也可以根据 id 设置类名</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script setup&gt;
import &#123; onMounted &#125; from &quot;vue&quot;;
import classes from &quot;.&#x2F;styles&#x2F;index.module.css&quot;;

import &#123; red, aquaColor &#125; from &quot;.&#x2F;styles&#x2F;index.module.css&quot;;

onMounted(() &#x3D;&gt; &#123;
  &#x2F;&#x2F; ok
  document.getElementById(&quot;test&quot;).className &#x3D; classes.aquaColor;

  &#x2F;&#x2F; ok
  &#x2F;&#x2F; document.getElementById(&quot;test&quot;).className &#x3D; aquaColor;
&#125;);
&lt;&#x2F;script&gt;
&lt;template&gt;
  &lt;h1 id&#x3D;&quot;test&quot;&gt;Test&lt;&#x2F;h1&gt;
&lt;&#x2F;template&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>注意：因为 css 中支持 kebab-case(短横线命名)，但 js 不支持，需要开启 <strong>camelCase 格式变量名转换</strong> </p>
<p><a target="_blank" rel="noopener" href="https://cn.vitejs.dev/guide/features.html#css">参考官方文档</a></p>
<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* index.module.css */</span>
<span class="token selector">.blue-color</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// vite.config.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  css<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    modules<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      localsConvention<span class="token operator">:</span> <span class="token string">"camelCaseOnly"</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>然后在上面的使用方法中就可以正常使用 <code>blueColor</code> 变量了</p>
<h3 id="element-plus"><a href="#element-plus" class="headerlink" title="element plus"></a>element plus</h3><p>组件库</p>
<p><code>&lt;el-row&gt;</code> <code>&lt;el-col&gt;</code> 布局管理</p>
<p><code>&lt;el-menu&gt;</code> 菜单、多级菜单，可以作为<strong>导航栏</strong></p>
<p><code>&lt;el-form&gt;</code> 表单的 <code>:model</code> 是专有属性，<code>&lt;el-input&gt;</code> 的 <code>v-model</code> 是双向绑定指令，没有简写的形式。可以通过标签的 ref 属性获取表单进行验证或重置</p>
<p><code>&lt;el-tag&gt;</code> 很好用</p>
<blockquote>
<p>库升级 element-ui -&gt; element-plus,</p>
<p>Message -&gt; ElMessage</p>
</blockquote>
<hr>
<p><a target="_blank" rel="noopener" href="https://www.jb51.net/article/249027.htm">Element el-row el-col 布局组件详解_vue.js_脚本之家 (jb51.net)</a></p>
<p>响应式布局就是在不同的屏幕宽度占比不同 （n / 24）</p>
<p><code>ellipsis</code> 属性不隐藏 item</p>
<p>与 <code>vue-router</code> 搭配使用，未指定 <code>route</code> 属性则默认使用 <code>index</code> 作为路径。</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-menu</span> <span class="token attr-name">:router</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-menu-item</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">:route</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123; path: <span class="token punctuation">'</span>/<span class="token punctuation">'</span> &#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-menu-item</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-menu</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://element-plus.gitee.io/en-US/component/layout.html#utility-classes-for-hiding-elements">Layout | Element Plus (gitee.io)</a></p>
<p>响应式隐藏元素 <code>hidden-sm-and-down</code></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// main.js</span>
<span class="token keyword">import</span> <span class="token string">'element-plus/theme-chalk/display.css'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>side-img hidden-sm-and-down<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@/assets/side-img.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vue.svg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p><strong>使用 icon</strong></p>
<p><a target="_blank" rel="noopener" href="https://element-plus.gitee.io/en-US/component/icon.html#icon-collection">Icon | Element Plus (gitee.io)</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jb51.net/article/244809.htm">Element Plus的el-icon怎么用_vue.js_脚本之家 (jb51.net)</a></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> @element-plus/icons-vue<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ElementPlusIconsVue <span class="token keyword">from</span> <span class="token string">"@element-plus/icons-vue"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 注册Icons 全局组件</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> iconName <span class="token keyword">in</span> ElementPlusIconsVue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>iconName<span class="token punctuation">,</span> ElementPlusIconsVue<span class="token punctuation">[</span>iconName<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>article-views<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-icon</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-icon</span><span class="token punctuation">></span></span>
    阅读量：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>万
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="firebase"><a href="#firebase" class="headerlink" title="firebase"></a>firebase</h3><h4 id="基础使用"><a href="#基础使用" class="headerlink" title="基础使用"></a>基础使用</h4><p>在组件中使用</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 获取一次数据</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> db <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"@/firebase"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> collection<span class="token punctuation">,</span> getDocs <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"firebase/firestore"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> todos <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// get todo</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> querySnapshot <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getDocs</span><span class="token punctuation">(</span><span class="token function">collection</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">"todos"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
    <span class="token keyword">let</span> fbTodos <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    querySnapshot<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">doc</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token string">" => "</span><span class="token punctuation">,</span> doc<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> todo <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
            id<span class="token operator">:</span> doc<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
            conent<span class="token operator">:</span> doc<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>content<span class="token punctuation">,</span>
            done<span class="token operator">:</span> doc<span class="token punctuation">,</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>done
        <span class="token punctuation">&#125;</span>
        fbTodos<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>todo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    todos<span class="token punctuation">.</span>value <span class="token operator">=</span> fbTodos<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>显示文章列表</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 实时检测数据</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> db <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"@/firebase"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> collection<span class="token punctuation">,</span> onSnapshot <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"firebase/firestore"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> onMounted<span class="token punctuation">,</span> ref <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> cards <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token function">onSnapshot</span><span class="token punctuation">(</span><span class="token function">collection</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">"test"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">querySnapshot</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">let</span> db_cards <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    querySnapshot<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">doc</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token comment">// console.log(doc.id, " => ", doc.data());</span>
      <span class="token keyword">const</span> card <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
        id<span class="token operator">:</span> doc<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>id<span class="token punctuation">,</span>
        title<span class="token operator">:</span> doc<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>title<span class="token punctuation">,</span>
        description<span class="token operator">:</span> doc<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>description<span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
      db_cards<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>card<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    cards<span class="token punctuation">.</span>value <span class="token operator">=</span> db_cards<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>查询请求</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> db <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"@/firebase"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> collection<span class="token punctuation">,</span> query<span class="token punctuation">,</span> where<span class="token punctuation">,</span> getDocs <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"firebase/firestore"</span><span class="token punctuation">;</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// query to firebase</span>
  <span class="token keyword">const</span> q <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token function">collection</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">"test"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">where</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> <span class="token string">"=="</span><span class="token punctuation">,</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 需要对应类型</span>

  <span class="token keyword">const</span> querySnapshot <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getDocs</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>

  querySnapshot<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">doc</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token string">" => "</span><span class="token punctuation">,</span> doc<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h4 id="存储文章"><a href="#存储文章" class="headerlink" title="存储文章"></a>存储文章</h4><p>🟢通过存储 base64 编码来解决换行问题</p>
<p>工具：<a target="_blank" rel="noopener" href="https://www.base64encode.org/">Base64 Encode and Decode - Online</a></p>
<p>参考：<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/30106476/using-javascripts-atob-to-decode-base64-doesnt-properly-decode-utf-8-strings">encoding - Using Javascript’s atob to decode base64 doesn’t properly decode utf-8 strings - Stack Overflow</a></p>
<p>使用 <code>marked</code> 来解析 markdown</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> marked
<span class="token function">npm</span> <span class="token function">install</span> highlight.js<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> marked <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"marked"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> ref<span class="token punctuation">,</span> computed <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> hljs <span class="token keyword">from</span> <span class="token string">"highlight.js"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">"highlight.js/styles/atom-one-dark.css"</span><span class="token punctuation">;</span>

marked<span class="token punctuation">.</span><span class="token function">setOptions</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  renderer<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">marked<span class="token punctuation">.</span>Renderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">highlight</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">code<span class="token punctuation">,</span> lang</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// const hljs = require("highlight.js");</span>
    <span class="token keyword">const</span> language <span class="token operator">=</span> hljs<span class="token punctuation">.</span><span class="token function">getLanguage</span><span class="token punctuation">(</span>lang<span class="token punctuation">)</span> <span class="token operator">?</span> lang <span class="token operator">:</span> <span class="token string">"plaintext"</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>language<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> hljs<span class="token punctuation">.</span><span class="token function">highlight</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> language <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token comment">// return hljs.highlightAuto(code).value;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  langPrefix<span class="token operator">:</span> <span class="token string">"hljs language-"</span><span class="token punctuation">,</span> <span class="token comment">// highlight.js css expects a top-level 'hljs' class.</span>
  pedantic<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  gfm<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  breaks<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  sanitize<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  smartLists<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  smartypants<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  xhtml<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">const</span> db_post <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  title<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
  createAt<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
  description<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
  content<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> markdownToHtml <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">marked</span><span class="token punctuation">(</span>db_post<span class="token punctuation">.</span>value<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// query to firebase</span>
    
    <span class="token comment">// destruct from doc.data()</span>
    
    <span class="token comment">// decode base4 content</span>
    db_post<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
      title<span class="token punctuation">,</span>
      createAt<span class="token punctuation">,</span>
      description<span class="token punctuation">,</span>
      content<span class="token operator">:</span> <span class="token function">b64DecodeUnicode</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

<span class="token comment">// 可以提取为 utils </span>
<span class="token keyword">function</span> <span class="token function">b64DecodeUnicode</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>
    <span class="token function">atob</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token string">"%"</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token string">"00"</span> <span class="token operator">+</span> c<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="使用-mock-server"><a href="#使用-mock-server" class="headerlink" title="使用 mock server"></a>使用 mock server</h3><p><a target="_blank" rel="noopener" href="https://github.com/vbenjs/vite-plugin-mock">vbenjs/vite-plugin-mock: A mock plugin for vite.use mockjs. (github.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/blackhub/article/details/124587427">vue3+vite2中使用mock_zasulan的博客-CSDN博客_vite 使用mock</a></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> -D mockjs vite-plugin-mock<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><code>/src/mock/test.js</code></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// test.js 仅做示例: 通过GET请求返回一个名字数组</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">[</span>
  <span class="token punctuation">&#123;</span>
    url<span class="token operator">:</span> <span class="token string">"/api/getUser"</span><span class="token punctuation">,</span>
    method<span class="token operator">:</span> <span class="token string">"get"</span><span class="token punctuation">,</span>
    <span class="token function-variable function">response</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
        code<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
        message<span class="token operator">:</span> <span class="token string">"ok"</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"tom"</span><span class="token punctuation">,</span> <span class="token string">"jerry"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> viteMockServe <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vite-plugin-mock"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">viteMockServe</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      mockPath<span class="token operator">:</span> <span class="token string">"./src/mock"</span><span class="token punctuation">,</span>
      localEnabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token operator">...</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script setup&gt;
import axios from &quot;axios&quot;;
import &#123; onMounted &#125; from &quot;vue&quot;;

onMounted(() &#x3D;&gt; &#123;
  axios.get(&quot;&#x2F;api&#x2F;getUser&quot;).then((res) &#x3D;&gt; &#123;
    console.log(res);
  &#125;);
&#125;);
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="Router"><a href="#Router" class="headerlink" title="Router"></a>Router</h3><ul>
<li>可以嵌套路由或解构路由组</li>
<li>可以在行内直接引入页面组件<br><code>component: () =&gt; import(&quot;@/pages/login/index.vue&quot;)</code></li>
</ul>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> adminRoutes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token keyword">const</span> componentRouter <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    path<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    meta<span class="token operator">:</span> <span class="token punctuation">&#123;</span> title<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> Layout<span class="token punctuation">,</span>
    redirect<span class="token operator">:</span> <span class="token string">'noRedirect'</span><span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span>


<span class="token keyword">export</span> <span class="token keyword">const</span> constantRoutes <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>
   	 path<span class="token operator">:</span> <span class="token string">"/admin"</span><span class="token punctuation">,</span>
   	 redirect<span class="token operator">:</span> <span class="token string">"/admin/dashboard"</span><span class="token punctuation">,</span>
 	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token comment">// 可以解构路由组</span>
    <span class="token operator">...</span>adminRoutes<span class="token punctuation">,</span> 
    <span class="token comment">// 可以嵌套路由</span>
    componentsRouter<span class="token punctuation">,</span>

    <span class="token punctuation">&#123;</span>
        path<span class="token operator">:</span> <span class="token string">"/login"</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">"Login"</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"@/pages/login/index.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    
    <span class="token comment">// 404 page must be placed at the end !!!</span>
    <span class="token punctuation">&#123;</span> path<span class="token operator">:</span> <span class="token string">"/:pathMatch(.*)*"</span><span class="token punctuation">,</span> redirect<span class="token operator">:</span> <span class="token string">"/404"</span><span class="token punctuation">,</span> hidden<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h4 id="嵌套路由"><a href="#嵌套路由" class="headerlink" title="嵌套路由"></a>嵌套路由</h4><ol>
<li>只能一层一层 children 嵌套</li>
<li>子层的 path 不用写 <code>/</code>，重定向需要写<strong>完整路径</strong></li>
</ol>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>
        path<span class="token operator">:</span> <span class="token string">"/"</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> Layout<span class="token punctuation">,</span>
        redirect<span class="token operator">:</span> <span class="token string">"/dashboard"</span><span class="token punctuation">,</span>
        children<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">&#123;</span>
                path<span class="token operator">:</span> <span class="token string">"dashboard"</span><span class="token punctuation">,</span>
                <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"@/views/dashboard/index"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                name<span class="token operator">:</span> <span class="token string">"Dashboard"</span><span class="token punctuation">,</span>
                meta<span class="token operator">:</span> <span class="token punctuation">&#123;</span> title<span class="token operator">:</span> <span class="token string">"Dashboard"</span><span class="token punctuation">,</span> icon<span class="token operator">:</span> <span class="token string">"dashboard"</span><span class="token punctuation">,</span> affix<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
        path<span class="token operator">:</span> <span class="token string">"/guide"</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> Layout<span class="token punctuation">,</span>
        redirect<span class="token operator">:</span> <span class="token string">"/guide/index"</span><span class="token punctuation">,</span>
        children<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">&#123;</span>
                path<span class="token operator">:</span> <span class="token string">"index"</span><span class="token punctuation">,</span>
                <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"@/views/guide/index"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                name<span class="token operator">:</span> <span class="token string">"Guide"</span><span class="token punctuation">,</span>
                meta<span class="token operator">:</span> <span class="token punctuation">&#123;</span> title<span class="token operator">:</span> <span class="token string">"Guide"</span><span class="token punctuation">,</span> icon<span class="token operator">:</span> <span class="token string">"guide"</span><span class="token punctuation">,</span> noCache<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h4 id="创建路由"><a href="#创建路由" class="headerlink" title="创建路由"></a>创建路由</h4><p>必须使用 WebHistory 模式，否则会有页面路由异常</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  history<span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  routes<span class="token operator">:</span> constantRoutes<span class="token punctuation">,</span>
  <span class="token comment">// eslint-disable-next-line no-unused-vars</span>
  <span class="token function">scrollBehavior</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> savedPosition</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 始终滚动到顶部</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span> top<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>🟢可以配置拦截器，如果没有登录就访问后台会跳转到 <code>/admin/login</code>，<strong>具体写法查看项目</strong>。</p>
<h4 id="重置路由"><a href="#重置路由" class="headerlink" title="重置路由"></a><strong>重置路由</strong></h4><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// Detail see: https://github.com/vuejs/vue-router/issues/1234#issuecomment-357941465</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">resetRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> newRouter <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    history<span class="token operator">:</span> <span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    routes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  router<span class="token punctuation">.</span>matcher <span class="token operator">=</span> newRouter<span class="token punctuation">.</span>matcher<span class="token punctuation">;</span> <span class="token comment">// reset router</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h4 id="在组件中使用"><a href="#在组件中使用" class="headerlink" title="在组件中使用"></a>在组件中使用</h4><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// tag.vue</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> useRouter <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vue-router"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">taglink</span><span class="token punctuation">(</span><span class="token parameter">tag</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        name<span class="token operator">:</span> <span class="token string">"tag"</span><span class="token punctuation">,</span>
        params<span class="token operator">:</span> <span class="token punctuation">&#123;</span> id<span class="token operator">:</span> tag <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// index.js</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token operator">...</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
    path<span class="token operator">:</span> <span class="token string">"/tag/:id"</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">"tag"</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> Archive<span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>















<h2 id="项目结构-1"><a href="#项目结构-1" class="headerlink" title="项目结构"></a>项目结构</h2><h3 id="结构概述"><a href="#结构概述" class="headerlink" title="结构概述"></a>结构概述</h3><p><img src="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202209291451898.png" alt="image-20220929145127784"></p>
<p>components -&gt; 路由页面中使用的公用组件</p>
<p>layout -&gt; 前后台模板，包裹着 <code>&lt;router-view&gt;</code></p>
<ul>
<li>back</li>
<li>front</li>
<li>components 子组件</li>
</ul>
<p>pages -&gt; 路由中切换的页面，代表 <code>&lt;router-view&gt;</code></p>
<ul>
<li>front</li>
<li>back</li>
<li>error-page</li>
<li>login</li>
</ul>
<h3 id="切换模板"><a href="#切换模板" class="headerlink" title="切换模板"></a>切换模板</h3><p>前台和后台在 <code>MainLayout.vue</code> 组件中切换显示，并且在外层包裹了 <code>&lt;slot&gt;</code> 标签，表示可以在应用的入口组件 <code>App.vue</code> 通过插入登录页面组件覆盖 slot 来实现不使用前后台模板的单页面显示。</p>
<p><code>App.vue</code></p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;main-layout&gt;&lt;router-view v-if&#x3D;&quot;toLogIn&quot; &#x2F;&gt;&lt;&#x2F;main-layout&gt;
&lt;&#x2F;template&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p><code>MainLayout.vue</code></p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div class&#x3D;&quot;w-full&quot;&gt;
    &lt;slot&gt;
      &lt;blog-back-end v-if&#x3D;&quot;isAdmin&quot; &#x2F;&gt;
      &lt;blog-front-end v-if&#x3D;&quot;!isAdmin&quot; &#x2F;&gt;
    &lt;&#x2F;slot&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>前台模板：header + main + footer</p>
<p>后台模板：sidebar + (header + main)</p>
<p><strong>管理布局</strong>：</p>
<ol>
<li>使用 element plus 的 <code>&lt;el-row&gt;</code> 和 <code>&lt;el-col&gt;</code></li>
<li>使用 flexbox</li>
</ol>
<h3 id="【旧】前后台-layout-分离"><a href="#【旧】前后台-layout-分离" class="headerlink" title="【旧】前后台 layout 分离"></a>【旧】前后台 layout 分离</h3><p>使用的特性：</p>
<ol>
<li><p>插槽 <a target="_blank" rel="noopener" href="https://vuejs.org/guide/components/slots.html">Slots</a><br>插槽中的前后端组件在不渲染 <code>&lt;router-view&gt;</code> 的时候作为 Fallback Content 存在，否则会被覆盖。</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;!-- App.vue --&gt;
&lt;template&gt;
  &lt;main-layout&gt;&lt;router-view v-if&#x3D;&quot;toLogIn&quot; &#x2F;&gt;&lt;&#x2F;main-layout&gt;
&lt;&#x2F;template&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;!-- MainLayout.vue --&gt;
&lt;template&gt;
  &lt;div class&#x3D;&quot;w-full&quot;&gt;
    &lt;slot&gt;
      &lt;blog-back-end v-if&#x3D;&quot;isAdmin&quot; &#x2F;&gt;
      &lt;blog-front-end v-if&#x3D;&quot;!isAdmin&quot; &#x2F;&gt;
    &lt;&#x2F;slot&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>通过 Pinia 的 <code>store.$subscribe()</code> 来监视状态的改变，从而切换不同的 layout：</p>
<ul>
<li>前台，header、main、footer</li>
<li>后台，aside、header、main</li>
<li>登录页面，整个页面</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://pinia.vuejs.org/core-concepts/state.html#subscribing-to-the-state">subscribing-to-the-state</a></p>
</li>
<li><p>在 <code>router/index.js</code> 中的 <code>beforeEach</code> 模块通过 <code>usersStore</code> 来更改 <code>toLogin</code> 和 <code>isAdmin</code> 的状态，从而影响模板组件的切换。<br>🟠需要在 <code>beforeEach</code> 模块中声明 store，否则 Pinia 还没有初始化。<a target="_blank" rel="noopener" href="https://pinia.vuejs.org/core-concepts/outside-component-usage.html#single-page-applications">详见</a></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> useUsersStore <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"@/stores/user"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> usersStore <span class="token operator">=</span> <span class="token function">useUsersStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// if show Fallback Content of Slots</span>
<span class="token keyword">let</span> toLogIn <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

usersStore<span class="token punctuation">.</span><span class="token function">$subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">mutation<span class="token punctuation">,</span> state</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"tracked!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"toLogin"</span> <span class="token operator">+</span> state<span class="token punctuation">.</span>toLogin<span class="token punctuation">)</span><span class="token punctuation">;</span>

  toLogIn<span class="token punctuation">.</span>value <span class="token operator">=</span> state<span class="token punctuation">.</span>toLogin<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>为了模板组件在路由切换时候能够正常切换，需要在创建 router 的时候指定 <code>history: createWebHistory()</code> 模式。<a target="_blank" rel="noopener" href="https://router.vuejs.org/guide/essentials/history-mode.html#html5-mode">Different History modes | Vue Router (vuejs.org)</a></p>
</li>
<li><p>🟠在登陆之后需要再切换一次 layout，因此要在 <code>@/views/login/index.vue</code> 中的 <code>handleLogin</code> 方法中调用 userStore 切换页面状态</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">handleLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    userStore<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>loginForm<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
        userStore<span class="token punctuation">.</span><span class="token function">notLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<p><strong>切换 layout 参考</strong>：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://itnext.io/anyway-heres-how-to-create-a-multiple-layout-system-with-vue-and-vue-router-b379baa91a05">Anyway, here’s how to create a multiple layout system with Vue and Vue-router | by @maisonfutari | ITNEXT</a></li>
</ul>
<p>前后端 layout 切换的依据是 地址是否含有 <code>/admin</code>，进而通过判断 <code>token</code> 来决定是否跳转到登录页面。</p>
<h2 id="基础样式"><a href="#基础样式" class="headerlink" title="基础样式"></a>基础样式</h2><p>仍使用兼容旧项目的 sass 样式。</p>
<p>切换路由视图的时候可以使用动画效果。<a target="_blank" rel="noopener" href="https://cn.vuejs.org/guide/built-ins/transition.html#css-based-transitions">Transition | Vue.js (vuejs.org)</a></p>
<p><strong>使用响应式布局</strong></p>
<p>在页面较小的时候隐藏组件</p>
<p><code>class=&quot;side-img hidden-sm-and-down&quot;</code> 响应式隐藏</p>
<p><a target="_blank" rel="noopener" href="https://element-plus.org/en-US/component/layout.html#col-attributes">Layout | Element Plus (element-plus.org)</a> 响应式布局 <code>:span=&quot;20&quot; :md=&quot;12&quot;</code></p>
<h3 id="修改-element-plus-样式"><a href="#修改-element-plus-样式" class="headerlink" title="修改 element plus 样式"></a>修改 element plus 样式</h3><p>以修改 <code>&lt;el-menu&gt;</code> 背景颜色为例。</p>
<ol>
<li><p>直接在 <code>.vue</code> 中声明</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;style scoped&gt;
.el-menu &#123;
  --el-menu-bg-color: #304156;
&#125;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>使用 <code>background-color</code> 属性，指定十六进制的值，可以动态绑定<br><strong>通过解构使用</strong></p>
<p>引入整体 <code>variables.module.scss</code> 然后再解构</p>
<pre class="line-numbers language-scss" data-language="scss"><code class="language-scss"><span class="token comment">// sidebar</span>
<span class="token property"><span class="token variable">$menuBg</span></span><span class="token punctuation">:</span>#304156<span class="token punctuation">;</span>

<span class="token selector">:export </span><span class="token punctuation">&#123;</span>
  <span class="token property">menuBg</span><span class="token punctuation">:</span> <span class="token variable">$menuBg</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> variables <span class="token keyword">from</span> <span class="token string">"@/styles/variables.module.scss"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">&#123;</span> menuBg <span class="token punctuation">&#125;</span> <span class="token operator">=</span> variables<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li>
<li><p>使用 tailwindcss</p>
</li>
<li><p>使用 CSS Modules</p>
<p>感觉很像 tailwindcss ，都是操作 class<br>另外，dom 中是 className，html 就是 class</p>
<pre class="line-numbers language-scss" data-language="scss"><code class="language-scss"><span class="token comment">// test.module.scss</span>
<span class="token property"><span class="token variable">$pageBackground</span></span><span class="token punctuation">:</span> #f4fa58<span class="token punctuation">;</span>

<span class="token selector">.menu </span><span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token variable">$pageBackground</span> <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 4rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
&lt;el-menu :class&#x3D;&quot;test.menu&quot;&gt; &lt;&#x2F;el-menu&gt;
&lt;&#x2F;template&gt;
&lt;script setup&gt;
import test from &quot;@&#x2F;styles&#x2F;test.module.scss&quot;;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<h3 id="style-css-参考"><a href="#style-css-参考" class="headerlink" title="style.css 参考"></a>style.css 参考</h3><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">html,
body</span> <span class="token punctuation">&#123;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>

  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">#app</span> <span class="token punctuation">&#123;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>

  <span class="token comment">/* min-height: 1500px; */</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100vw<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">a</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> 500<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #646cff<span class="token punctuation">;</span>
  <span class="token property">text-decoration</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">a:hover</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #535bf2<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">/* 主页中的链接样式 */</span>
<span class="token selector">.main-content * > a</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> 500<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #383737<span class="token punctuation">;</span>
  <span class="token property">text-decoration</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.main-content * > a:hover</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #409eff <span class="token important">!important</span><span class="token punctuation">;</span> <span class="token comment">/* 强制覆盖属性 */</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h2 id="重构组件"><a href="#重构组件" class="headerlink" title="重构组件"></a>重构组件</h2><h3 id="一些效果"><a href="#一些效果" class="headerlink" title="一些效果"></a>一些效果</h3><p><strong>自动调整大小、吸顶效果</strong></p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-row</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>flex<span class="token punctuation">"</span></span> <span class="token attr-name">justify</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-col</span> <span class="token attr-name">:xs</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20<span class="token punctuation">"</span></span> <span class="token attr-name">:md</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20<span class="token punctuation">"</span></span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;<span class="token punctuation">'</span>minHeight<span class="token punctuation">'</span>:minHeight+<span class="token punctuation">'</span>px<span class="token punctuation">'</span>&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-col</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-row</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
            minHeight<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            navBarFixed<span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">const</span> that <span class="token operator">=</span> <span class="token keyword">this</span>
        that<span class="token punctuation">.</span>minHeight <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight
        window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> that<span class="token punctuation">.</span>watchScroll<span class="token punctuation">)</span>
        window<span class="token punctuation">.</span><span class="token function-variable function">onresize</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            that<span class="token punctuation">.</span>minHeight <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token function">watchScroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">var</span> scrollTop <span class="token operator">=</span> window<span class="token punctuation">.</span>pageYOffset <span class="token operator">||</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop
            <span class="token comment">//  当滚动超过 50 时，实现吸顶效果</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>navBarFixed <span class="token operator">=</span> scrollTop <span class="token operator">></span> <span class="token number">50</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="About"><a href="#About" class="headerlink" title="About"></a>About</h3><h4 id="表单-el-form"><a href="#表单-el-form" class="headerlink" title="表单 el-form"></a>表单 el-form</h4><p>基础结构</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;el-card shadow&#x3D;&quot;always&quot;&gt;
        &lt;el-form&gt;
            &lt;el-form-item label&#x3D;&quot;昵称&quot;&gt;
                &lt;el-input &#x2F;&gt;
            &lt;&#x2F;el-form-item&gt;
            &lt;el-form-item label&#x3D;&quot;邮箱&quot;&gt;
                &lt;el-input &#x2F;&gt;
            &lt;&#x2F;el-form-item&gt;
            &lt;el-form-item label&#x3D;&quot;评论&quot;&gt;
                &lt;el-input type&#x3D;&quot;textarea&quot; &#x2F;&gt;
            &lt;&#x2F;el-form-item&gt;
        &lt;&#x2F;el-form&gt;
    &lt;&#x2F;el-card&gt;
&lt;&#x2F;template&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>注意：<code>&lt;el-form&gt;</code> 的 <code>:model</code> 是专有属性，<code>&lt;el-input&gt;</code> 的 <code>v-model</code> 是双向绑定指令，没有简写的形式。</p>
<p><strong>校验规则</strong></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> ref <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ruleFormRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> formSize <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">"default"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ruleForm <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  name<span class="token operator">:</span> <span class="token string">"Hello"</span><span class="token punctuation">,</span>
  email<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
  comment<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> rules <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  name<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>
      required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      message<span class="token operator">:</span> <span class="token string">"Please input Activity name"</span><span class="token punctuation">,</span>
      trigger<span class="token operator">:</span> <span class="token string">"change"</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span> min<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> max<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">"Length should be 3 to 5"</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">"blur"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>

  email<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>
      type<span class="token operator">:</span> <span class="token string">"email"</span><span class="token punctuation">,</span>
      required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      message<span class="token operator">:</span> <span class="token string">"请输入正确的地址"</span><span class="token punctuation">,</span>
      trigger<span class="token operator">:</span> <span class="token string">"change"</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  comment<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>
      required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      message<span class="token operator">:</span> <span class="token string">"请输入内容"</span><span class="token punctuation">,</span>
      trigger<span class="token operator">:</span> <span class="token string">"blur"</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>&lt;el-input&gt;</code> 中只绑定了输入值，外层 <code>&lt;el-form-item&gt;</code> 的 <code>prop</code> 属性才对应着验证规则中的每一项。（也就是说表单和验证规则中的变量名可以不同 ）</p>
<p><code>trigger</code> 属性：</p>
<ul>
<li><code>blur</code> 点击空白时校验</li>
<li><code>change</code> 修改时校验</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://element-plus.gitee.io/zh-CN/component/form.html#%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C">Form 表单 | Element Plus (gitee.io)</a></p>
<p><strong>提交表单 &amp; 重置表单</strong></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/wj1713520/article/details/123515108">参考文章</a></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">submitForm</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">formEl</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>formEl<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> formEl<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">valid<span class="token punctuation">,</span> fields</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"submit!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"error submit!"</span><span class="token punctuation">,</span> fields<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">resetForm</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">formEl</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>formEl<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  formEl<span class="token punctuation">.</span><span class="token function">resetFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="Article"><a href="#Article" class="headerlink" title="Article"></a>Article</h3><p>代码高亮</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> highlight.js<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// main.js</span>
<span class="token keyword">import</span> <span class="token string">"highlight.js/styles/atom-one-dark.css"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>



<h3 id="Tag"><a href="#Tag" class="headerlink" title="Tag"></a>Tag</h3><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;el-card class&#x3D;&quot;tag-box&quot;&gt;
    &lt;template #header&gt;
      &lt;span&gt;标签&lt;&#x2F;span&gt;
    &lt;&#x2F;template&gt;
    &lt;div class&#x3D;&quot;tag-item flex justify-around&quot;&gt;
      &lt;el-tag type&#x3D;&quot;success&quot;&gt;生活&lt;&#x2F;el-tag&gt;
      &lt;el-tag type&#x3D;&quot;success&quot;&gt;科技&lt;&#x2F;el-tag&gt;
      &lt;el-tag type&#x3D;&quot;success&quot;&gt;历史&lt;&#x2F;el-tag&gt;
    &lt;&#x2F;div&gt;
  &lt;&#x2F;el-card&gt;
&lt;&#x2F;template&gt;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>标签 <code>slot</code> 的写法过时了</p>
<h3 id="Markdown"><a href="#Markdown" class="headerlink" title="Markdown"></a>Markdown</h3><p><a target="_blank" rel="noopener" href="https://code-farmer-i.github.io/vue-markdown-editor/zh/">介绍 | v-md-editor (code-farmer-i.github.io)</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/code-farmer-i/vue-markdown-editor">code-farmer-i/vue-markdown-editor: A markdown editor built on Vue (github.com)</a></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i @kangc/v-md-editor@next -S<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createApp <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> VMdEditor <span class="token keyword">from</span> <span class="token string">'@kangc/v-md-editor'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'@kangc/v-md-editor/lib/style/base-editor.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> vuepressTheme <span class="token keyword">from</span> <span class="token string">'@kangc/v-md-editor/lib/theme/vuepress.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'@kangc/v-md-editor/lib/theme/style/vuepress.css'</span><span class="token punctuation">;</span>

<span class="token comment">// Prism</span>
<span class="token keyword">import</span> Prism <span class="token keyword">from</span> <span class="token string">'prismjs'</span><span class="token punctuation">;</span>
<span class="token comment">// highlight code</span>
<span class="token keyword">import</span> <span class="token string">'prismjs/components/prism-json'</span><span class="token punctuation">;</span>

VMdEditor<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>vuepressTheme<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
  Prism<span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span><span class="token comment">/*...*/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VMdEditor<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;v-md-editor v-model&#x3D;&quot;text&quot; height&#x3D;&quot;400px&quot;&gt;&lt;&#x2F;v-md-editor&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
  import &#123; ref &#125; from &#39;vue&#39;;

  export default &#123;
    setup() &#123;
      const text &#x3D; ref(&#39;&#39;);

      return &#123;
        text,
      &#125;;
    &#125;,
  &#125;;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>如果渲染出来的文字是居中的样式，需要查看是否继承了 <code>style.css</code> 中的 <code>text-align: center</code> 属性。</p>
<h3 id="404-page"><a href="#404-page" class="headerlink" title="404 page"></a>404 page</h3><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> constantRoutes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">&#123;</span>
    path<span class="token operator">:</span> <span class="token string">"/404"</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"@/views/error-page/404.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    hidden<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#123;</span>
    path<span class="token operator">:</span> <span class="token string">"/401"</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"@/views/error-page/401.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    hidden<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    
  <span class="token comment">// 404 page must be placed at the end !!!</span>
  <span class="token punctuation">&#123;</span> path<span class="token operator">:</span> <span class="token string">"/:pathMatch(.*)*"</span><span class="token punctuation">,</span> redirect<span class="token operator">:</span> <span class="token string">"/404"</span><span class="token punctuation">,</span> hidden<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://router.vuejs.org/guide/essentials/dynamic-matching.html#catch-all-404-not-found-route">Dynamic Route Matching with Params | Vue Router (vuejs.org)</a></p>
<h3 id="Login"><a href="#Login" class="headerlink" title="Login"></a>Login</h3><blockquote>
<p>问题：<code>&lt;el-input&gt;</code> 无法输入。</p>
<p>输入异常，只会在 blur 之后输入一个字符。</p>
</blockquote>
<p>原因是外层的 <code>&lt;el-form&gt;</code> 使用了 <code>ref</code> 属性绑定到了表单值，需要绑定到另一个 Ref 上。</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;el-form
      ref&#x3D;&quot;loginRef&quot;
      :model&#x3D;&quot;loginForm&quot;
      :rules&#x3D;&quot;loginRules&quot;
      class&#x3D;&quot;login-form&quot;
      autocomplete&#x3D;&quot;on&quot;
      label-position&#x3D;&quot;left&quot;
    &gt;
    &lt;&#x2F;el-form&gt;
&lt;&#x2F;template&gt;
&lt;script setup&gt;
const loginForm &#x3D; ref(&#123;
  username: &quot;admin&quot;,
  password: &quot;111111&quot;,
&#125;);

const loginRules &#x3D; ref(&#123;
  username: [&#123; required: true, trigger: &quot;blur&quot;, validator: validateUsername &#125;],
  password: [&#123; required: true, trigger: &quot;blur&quot;, validator: validatePassword &#125;],
&#125;);
    
&#x2F;&#x2F; ref 组件
const username &#x3D; ref();
const password &#x3D; ref();
const loginRef &#x3D; ref();
    
&#x2F;&#x2F; 验证提交的表单值
function handleLogin() &#123;
  &#x2F;&#x2F; 这里获取的不是表单值 而是表单的引用
  loginRef.value.validate((valid) &#x3D;&gt; &#123;&#125;)
&#125;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>🟢项目中还有的其他使用功能：</p>
<ul>
<li>加载页面的时候自动对焦输入栏</li>
<li>具体的验证表单步骤</li>
<li>使用 <code>&lt;el-tooltip&gt;</code> 实现大小写框提示、显示密码</li>
</ul>
<p>参考：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://cn.vuejs.org/guide/essentials/reactivity-fundamentals.html">响应式基础 | Vue.js (vuejs.org)</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/ZYS10000/article/details/125679946">Vue3中 ref 属性详解_明天也要努力的博客-CSDN博客_vue3 组件ref</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_47886687/article/details/112919563">vue3中ref的理解_山竹回家了的博客-CSDN博客_ref vue3</a></li>
</ul>
<p>🟢Vue3 中没有 <code>$ref</code> 用来获取单个 DOM，只能在 <code>setup()</code> 中声明然后会在 mounted 时候挂载。</p>
<blockquote>
<p>创建响应式，不管对象还是基础类型，都使用 <code>ref()</code>，然后通过 <code>.value</code> 获取值。</p>
</blockquote>
<h3 id="归档-标签归档"><a href="#归档-标签归档" class="headerlink" title="归档 /标签归档"></a>归档 /标签归档</h3><p><code>Archive</code> 页面、<code>TagArchive</code> 页面调用 <code>PostTimeLine</code> 组件，传入不同的 <code>byTag</code> 属性，在 <code>onMounted()</code> 时候请求不同的接口。 </p>
<h3 id="TagManage"><a href="#TagManage" class="headerlink" title="TagManage"></a>TagManage</h3><p><img src="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202209261236200.png" alt="image-20220926123631150"></p>
<ol>
<li><p>因为多个组件都需要使用 tagList，所以使用全局状态 TagStore 来管理。<br>TagStore 的各个方法通过调用 <code>/api/tag.js</code> 来实现。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// setup</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">"tagStore"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
        tagList<span class="token punctuation">,</span>
        postTags<span class="token punctuation">,</span> <span class="token comment">// 当前文章的标签</span>
        postId<span class="token punctuation">,</span> <span class="token comment">// 当前文章 id</span>

        setPostTags<span class="token punctuation">,</span> <span class="token comment">// 更新文章的标签</span>
        addTag<span class="token punctuation">,</span>
        usePost<span class="token punctuation">,</span>
        removeTag<span class="token punctuation">,</span>
        updateTagList<span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>有两个重要的变量，<code>tagList</code> 表示所有标签，<code>postTags</code> 表示某个文章的所有标签。</p>
<p>在使用 <code>&lt;el-check-group&gt;</code> 的时候需要使用 <code>tagList</code> 渲染所有的 <code>&lt;el-checkbox&gt;</code> 选项，但是表单值绑定的是 <code>postTags</code> 用来更改文章的标签。</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;el-checkbox-group v-model&#x3D;&quot;postTags&quot; :tag-list&#x3D;&quot;tagList&quot;&gt;
    &lt;div v-for&#x3D;&quot;c in tagList&quot; :key&#x3D;&quot;c&quot; class&#x3D;&quot;mb-4&quot;&gt;
      &lt;el-checkbox :label&#x3D;&quot;c&quot; &#x2F;&gt;
    &lt;&#x2F;div&gt;
  &lt;&#x2F;el-checkbox-group&gt;
&lt;&#x2F;template&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>🟢通过 <code>&lt;el-row&gt;</code> 和 <code>&lt;el-col :span=&quot;&quot; :offset=&quot;&quot;&gt;</code> 来管理不对称的布局比使用 Flexbox 更有用。</p>
</li>
<li><p><code>list</code> 组件有两个悬浮页面组件 <code>TagListWindow</code> 、<code>AddTagWindow</code>，这两个窗口组件可以被 <code>&lt;transition&gt;</code> 包裹来实现动画效果，并且他们的显示和关闭由外层 <code>list</code> 组件控制。</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;transition name&#x3D;&quot;bounce&quot; mode&#x3D;&quot;out-in&quot;&gt;
      &lt;tag-list-window
        v-if&#x3D;&quot;showTagList&quot;
        @close&#x3D;&quot;closeModal&quot;
        @show-add-tag&#x3D;&quot;showAddTagWindow&quot;
        @update-post-tag&#x3D;&quot;getList&quot;
      &#x2F;&gt;
    &lt;&#x2F;transition&gt;
    &lt;transition&gt;
      &lt;add-tag-window v-if&#x3D;&quot;showAddTag&quot; @close&#x3D;&quot;showAddTag &#x3D; false&quot; &#x2F;&gt;
    &lt;&#x2F;transition&gt;
&lt;&#x2F;template&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>@close</code> 是声明的处理窗口关闭的回调方法。</p>
</li>
<li><p>子组件中声明的 props 和 emit 在外层组件的模板上使用时需要分别使用 <code>:</code> 和 <code>@</code><br>🟢emit 可以在执行回调的时候传递参数</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// TagListWindow.vue</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"pid"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> pid <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>pid<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> emits <span class="token operator">=</span> defineEmits<span class="token punctuation">[</span><span class="token string">"close"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">handleSubmit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token function">emits</span><span class="token punctuation">(</span><span class="token string">"close"</span><span class="token punctuation">,</span> <span class="token string">'someValue'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;tag-list-window v-if&#x3D;&quot;showList&quot; :pid &#x3D; &quot;postId&quot; @close&#x3D;&quot;closeModal&quot;&#x2F;&gt;
&lt;&#x2F;template&gt;
&lt;script setup&gt;
    let postId &#x3D; ref(1);
    let showList &#x3D; ref(false);
    function clseModal() &#123;
        
    &#125;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>在 <code>TagListWindow</code> 组件中需要确保标签列表是实时更新的，不管是在自身 delMod 中删除标签还是在 <code>AddTagWindow</code> 中增加标签后。但是通过读取 TagStore 的值来声明的标签列表不是响应式的，需要通过 Pinia 的 <code>$subscribe()</code> 方法来监视 TagStore 中状态的改变从而更新标签列表。<br><a target="_blank" rel="noopener" href="https://pinia.vuejs.org/core-concepts/state.html#subscribing-to-the-state">参考文档 | Pinia (vuejs.org)</a></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> tagStore <span class="token operator">=</span> <span class="token function">TagStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 需要最先声明</span>

<span class="token keyword">const</span> tagList <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>tagStore<span class="token punctuation">.</span>tagList<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 用于渲染 el-checkbox 列表的全局标签数组，只需要标题的值</span>
<span class="token comment">// ["科技", "生活"]</span>
<span class="token keyword">const</span> checkListAll <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>tagList<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token operator">=></span> t<span class="token punctuation">.</span>slug<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// el-checkbox-group 绑定的表单值，是单个文章的</span>
<span class="token keyword">const</span> checkList <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>tagStore<span class="token punctuation">.</span>postTags<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span><span class="token operator">=></span> t<span class="token punctuation">.</span>slug<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// store改变则更新内部状态</span>
tagStore<span class="token punctuation">.</span><span class="token function">$subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">mutation<span class="token punctuation">,</span> state</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  tagList<span class="token punctuation">.</span>value <span class="token operator">=</span> state<span class="token punctuation">.</span>tagList<span class="token punctuation">;</span>
  <span class="token comment">// 修改数据结构</span>
  checkListAll<span class="token punctuation">.</span>value <span class="token operator">=</span> state<span class="token punctuation">.</span>tagList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token operator">=></span> t<span class="token punctuation">.</span>slug<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// console.log("postTags", state.postTags);</span>
  checkList<span class="token punctuation">.</span>value <span class="token operator">=</span> state<span class="token punctuation">.</span>postTags<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token operator">=></span> t<span class="token punctuation">.</span>slug<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<h3 id="SidebarItem"><a href="#SidebarItem" class="headerlink" title="SidebarItem"></a>SidebarItem</h3><p><code>sidebar</code> 中的 <code>&lt;el-menu&gt;</code> 包含了 <code>sidebar-item</code> ，而 <code>sidebar-item</code> 内层也嵌套了自己，用来实现 <strong>分级菜单</strong> 的功能。</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;&#x2F; SidebarItem.vue
&lt;template&gt;
	&lt;el-menu-item&gt;&lt;&#x2F;el-menu-item&gt;
	&lt;el-sub-menu&gt;
    	&lt;sidebar-item &#x2F;&gt;
    &lt;&#x2F;el-sub-menu&gt;
&lt;&#x2F;template&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>sidebar</code> 中的 <code>&lt;el-menu&gt;</code> 的属性：</p>
<ul>
<li>mode 垂直模式</li>
<li>collapse 是否水平折叠菜单，只显示图标</li>
<li>default-active 页面加载时默认高亮的 item，一般就是对应当前路由</li>
<li><del>background-color 十六进制</del> 使用 <code>--el-menu-bg-color</code></li>
<li><del>text-color</del></li>
<li><del>active-text-color</del></li>
<li>unique-opened 是否只保持一个子菜单的展开</li>
<li>collapse-transition 折叠动画</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://element-plus.gitee.io/zh-CN/component/menu.html#menu-%E5%B1%9E%E6%80%A7">Menu 菜单 | Element Plus (gitee.io)</a></p>
<p>这些属性都绑定了全局状态 <code>@/stores/app.js</code></p>
<hr>
<p>为 <code>sidebar-item</code> 传入的路径数据来源于全局状态 <code>@/stores/permission.js</code></p>
<p>在 router 中声明了静态路由和根据权限的动态路由，在 <code>permission.js</code> 中获取路由数据。</p>
<p>router 中的 <code>hidden</code> 是自定义属性，用在 <code>sidebar-item</code> 控制显示。</p>
<p><strong>子菜单的结构</strong> </p>
<p>注意 element-plus 中是 <code>&lt;el-sub-menu&gt;</code></p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-sub-menu</span>
      <span class="token attr-name">v-else</span>
      <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>subMenu<span class="token punctuation">"</span></span>
      <span class="token attr-name">:index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>resolvePath(item.path)<span class="token punctuation">"</span></span>
      <span class="token attr-name">popper-append-to-body</span>
    <span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#title</span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!-- &lt;item
          v-if="item.meta"
          :icon="item.meta &amp;&amp; item.meta.icon"
          :title="item.meta.title"
        /> --></span>
        &#123;&#123; item.meta.title &#125;&#125;
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sidebar-item</span>
        <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>child in item.children<span class="token punctuation">"</span></span>
        <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>child.path<span class="token punctuation">"</span></span>
        <span class="token attr-name">:is-nest</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
        <span class="token attr-name">:item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>child<span class="token punctuation">"</span></span>
        <span class="token attr-name">:base-path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>resolvePath(child.path)<span class="token punctuation">"</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nest-menu<span class="token punctuation">"</span></span>
      <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-sub-menu</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="修改-Item-中的渲染函数"><a href="#修改-Item-中的渲染函数" class="headerlink" title="修改 Item 中的渲染函数"></a>修改 Item 中的渲染函数</h3><p><a target="_blank" rel="noopener" href="https://cn.vuejs.org/guide/extras/render-function.html#creating-vnodes">渲染函数 &amp; JSX | Vue.js (vuejs.org)</a></p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script&gt;
import &#123; h &#125; from &quot;vue&quot;;

export default &#123;
  props: &#123;
    icon: &#123;
      type: String,
      default: &quot;&quot;,
    &#125;,
    title: &#123;
      type: String,
      default: &quot;&quot;,
    &#125;,
  &#125;,
  setup(props) &#123;
    function render() &#123;
      const &#123; icon, title &#125; &#x3D; props;
      const vnodes &#x3D; [];

      if (icon) &#123;
        if (icon.includes(&quot;el-icon&quot;)) &#123;
          vnodes.push(h(&quot;i&quot;, &#123; class: [icon, &quot;sub-el-icon&quot;] &#125;));
        &#125; else &#123;
          vnodes.push(h(&quot;svg-icon&quot;, &#123; iconClass: icon &#125;));
        &#125;
      &#125;

      if (title) &#123;
        vnodes.push(h(&quot;span&quot;, &#123; slot: title, innerHTML: title &#125;));
      &#125;
      return vnodes;
    &#125;

    &#x2F;&#x2F; 返回渲染函数
    return render;
  &#125;,
&#125;;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h3 id="Article-List"><a href="#Article-List" class="headerlink" title="Article List"></a>Article List</h3><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;div class&#x3D;&quot;app-container&quot;&gt;
        &lt;el-table&gt;
            &lt;el-table-column&gt;&lt;&#x2F;el-table-column&gt;
    	&lt;&#x2F;el-table&gt;
        &lt;pagination &#x2F;&gt;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>vue3 不再支持 filters，修改为方法或计算属性。</p>
<p><a target="_blank" rel="noopener" href="https://v3-migration.vuejs.org/breaking-changes/filters.html">Filters | Vue 3 Migration Guide (vuejs.org)</a></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">statusFilter</span><span class="token punctuation">(</span><span class="token parameter">status</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> statusMap <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    published<span class="token operator">:</span> <span class="token string">"success"</span><span class="token punctuation">,</span>
    draft<span class="token operator">:</span> <span class="token string">"info"</span><span class="token punctuation">,</span>
    deleted<span class="token operator">:</span> <span class="token string">"danger"</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> statusMap<span class="token punctuation">[</span>status<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>&lt;el-table-column&gt;</code> 可以嵌套内容</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>180px<span class="token punctuation">"</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Date<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scope<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>&#123;&#123;
            parseTime(scope.row.timestamp, "&#123;y&#125;-&#123;m&#125;-&#123;d&#125; &#123;h&#125;:&#123;i&#125;")
            &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">class-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>status-col<span class="token punctuation">"</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Status<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>110<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123; row &#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-tag</span> <span class="token attr-name">:type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>statusFilter(row.status)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            &#123;&#123; row.status &#125;&#125;
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-tag</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">min-width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>300px<span class="token punctuation">"</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123; row &#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">'</span>/post/<span class="token punctuation">'</span> + row.id<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link-type<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>&#123;&#123; row.title &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>&lt;pagination&gt;</code> 封装了 <code>&lt;el-pagination&gt;</code> </p>
<ul>
<li>el 暴露了 page 等参数并绑定相应的组件属性上，如 <code>v-model:current-page</code></li>
<li>el 暴露了 emit ，并绑定到 <code>@current-change</code>，发生改变就会调用外部的 <code>getList</code> 重新获取列表数据</li>
</ul>
<hr>
<p><strong>添加 Tag 栏</strong></p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">min-width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>200px<span class="token punctuation">"</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Tag<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123; row &#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-tag</span>
                <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tag in row.tag<span class="token punctuation">"</span></span>
                <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tag<span class="token punctuation">"</span></span>
                <span class="token attr-name">:type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span>
                <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mr-4<span class="token punctuation">"</span></span>
                <span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">'</span>/tag/<span class="token punctuation">'</span> + tag.slug<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link-type<span class="token punctuation">"</span></span>
                         <span class="token punctuation">></span></span>&#123;&#123; tag.title &#125;&#125;
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-tag</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在 <code>getList()</code> 中成功生成测试数据，使用随机的方法🟢</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getPostList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> d <span class="token keyword">in</span> data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// console.log(data[d]);</span>
        data<span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token punctuation">.</span>timestamp <span class="token operator">=</span> <span class="token function">parseTime2</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token punctuation">.</span>createAt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        data<span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token punctuation">.</span>tag <span class="token operator">=</span>
            Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span>
            <span class="token operator">?</span> <span class="token punctuation">[</span>
            <span class="token punctuation">&#123;</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">"生活"</span><span class="token punctuation">,</span> slug<span class="token operator">:</span> <span class="token string">"生活"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            <span class="token punctuation">&#123;</span> id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">"读书"</span><span class="token punctuation">,</span> slug<span class="token operator">:</span> <span class="token string">"读书"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
        <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">"科技"</span><span class="token punctuation">,</span> slug<span class="token operator">:</span> <span class="token string">"科技"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>🔴对每个文章请求标签，性能太低</p>
<p><del>直接在后端查询 <code>getPostList()</code> 的时候进行<strong>连表查询</strong>。</del></p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select p.id, p.title, p.description, p.createAt, t.* 
from post p , post_has_tag  pt, tag t
where p.id &#x3D; pt.post_id  and pt.tag_id &#x3D; t.id;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p><strong>使用 mybatis @Many 注解处理一对多关系</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202209241254152.png" alt="image-20220924125433368"></p>
<p><a target="_blank" rel="noopener" href="https://medium.com/@hsvdahiya/mybatis-annotations-result-mapping-spring-79944ff74b84">MyBatis Spring Annotations — Result Mapping | Medium | Medium</a></p>
<p>修改 Post 类，添加一个 <code>List&lt;Tag&gt;</code> 字段。</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**
     * 【新】返回文章列表
     * @return 返回含有标签列表信息的多个文章(不含内容)
     */</span>
    <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"title"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"title"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"description"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"description"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// @Result(property = "content", column = "content"),</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"createAt"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"createAt"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"tagList"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span> many <span class="token operator">=</span> <span class="token annotation punctuation">@Many</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">"selectTagsForPost"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select id, title, description, createAt from post"</span><span class="token punctuation">)</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Post</span><span class="token punctuation">></span></span> <span class="token function">getPostList3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 【新】查询一个文章
     * @param post_id
     * @return 返回带有标签列表的单个Post对象
     */</span>
    <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"title"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"title"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"description"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"description"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"content"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"content"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"createAt"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"createAt"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"tagList"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span> many <span class="token operator">=</span> <span class="token annotation punctuation">@Many</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">"selectTagsForPost"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from post where id = #&#123;id&#125;"</span><span class="token punctuation">)</span>
    <span class="token class-name">Post</span> <span class="token function">selectPost</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token keyword">long</span> post_id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 查询单个文章的标签 @Results可以省略因为属性和字段同名
     * @param post_id
     * @return 返回标签列表
     */</span>
    <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"title"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"title"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"slug"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"slug"</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select tag.* from tag, post_has_tag pt where pt.post_id = #&#123;pid&#125; &amp;&amp; pt.tag_id = tag.id"</span><span class="token punctuation">)</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Tag</span><span class="token punctuation">></span></span> <span class="token function">selectTagsForPost</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"pid"</span><span class="token punctuation">)</span> <span class="token keyword">long</span> post_id<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>因为在后端的 Post 类中使用了 <code>@JsonProperty()</code> ，在前端注释掉测试数据就能够直接显示标签。</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@JsonProperty</span><span class="token punctuation">(</span><span class="token string">"tag"</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Tag</span><span class="token punctuation">></span></span> tagList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
   * Get taglist
   * @return taglist
   **/</span>
<span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>example <span class="token operator">=</span> <span class="token string">"[&#123;id:1, title:'科技', slug:'科技'&#125;]"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span>

<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Tag</span><span class="token punctuation">></span></span> <span class="token function">getTagList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> tagList<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">public</span> <span class="token class-name">Post</span> <span class="token function">setTagList</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Tag</span><span class="token punctuation">></span></span> tags<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Tag</span> tag <span class="token operator">:</span> tags<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        tagList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="Article-Detail"><a href="#Article-Detail" class="headerlink" title="Article Detail"></a>Article Detail</h3><ol>
<li><p>通过 ref 属性来获取 <code>&lt;el-form&gt;</code> 的引用，从而在提交表单的方法中验证输入值 <code>postFormRef.value.validate()</code> （<code>el-form</code> 的特殊用法 <a target="_blank" rel="noopener" href="https://element-plus.org/zh-CN/component/form.html#form-%E6%96%B9%E6%B3%95">文档</a>）</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script&gt;
&#x2F;&#x2F; component ref
const postFormRef &#x3D; ref();
&lt;&#x2F;script&gt;
&lt;template&gt;
&lt;el-form
         ref&#x3D;&quot;postFormRef&quot;
         :model&#x3D;&quot;postForm&quot;
         :rules&#x3D;&quot;rules&quot;
         class&#x3D;&quot;form-container&quot;
         &gt;
    &lt;&#x2F;el-form&gt;
&lt;&#x2F;template&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>使用 <a target="_blank" rel="noopener" href="https://element-plus.org/zh-CN/component/notification.html">Notification 通知</a></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> ElNotification <span class="token keyword">as</span> Notify <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"element-plus"</span><span class="token punctuation">;</span>

Notify<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    title<span class="token operator">:</span> <span class="token string">"成功"</span><span class="token punctuation">,</span>
    message<span class="token operator">:</span> <span class="token string">"发布文章成功"</span><span class="token punctuation">,</span>
    duration<span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>传入的参数不能直接访问，需要声明一个 props 常量</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// props</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> isEdit<span class="token operator">:</span> <span class="token punctuation">&#123;</span> type<span class="token operator">:</span> Boolean<span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>isEdit<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>Composition API 风格的计算属性 Getter / Setter<br><a target="_blank" rel="noopener" href="https://vuejs.org/guide/essentials/computed.html#writable-computed">Computed Properties | Vue.js (vuejs.org)</a></p>
</li>
<li><p>在 <code>submitForm</code> 方法中进行表单值验证后，调用 <code>createPost()</code> 方法也需要 <code>await</code> ，并且需要修改传入值的属性。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> timestamp <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"display_time"</span><span class="token punctuation">,</span> postForm<span class="token punctuation">.</span>value<span class="token punctuation">.</span>display_time<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>postForm<span class="token punctuation">.</span>value<span class="token punctuation">.</span>display_time <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>postForm<span class="token punctuation">.</span>value<span class="token punctuation">.</span>display_time<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">submitForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    postFormRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">valid</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
     	<span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            
            <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
                content<span class="token operator">:</span> postForm<span class="token punctuation">.</span>value<span class="token punctuation">.</span>content<span class="token punctuation">,</span>
                title<span class="token operator">:</span> postForm<span class="token punctuation">.</span>value<span class="token punctuation">.</span>title<span class="token punctuation">,</span>
                description<span class="token operator">:</span> postForm<span class="token punctuation">.</span>value<span class="token punctuation">.</span>content_short<span class="token punctuation">,</span>
                createAt<span class="token operator">:</span> timestamp<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
            
            <span class="token keyword">await</span> <span class="token function">createPost</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"submit failed"</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
            
        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>提交成功后需要重置表单，防止 <code>v-md-editor</code> 组件 no propertiy hide 报错</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 重置表单</span>
postFormRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">resetFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li>
<li><p>根据 <code>isEdit</code> 请求数据，实现更新功能。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>isEdit<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> id <span class="token operator">=</span> route<span class="token punctuation">.</span>params <span class="token operator">&amp;&amp;</span> route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"id "</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">fetchData</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">await</span> <span class="token function">getPostById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token comment">// console.log("res.data", data);</span>

      postForm<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
        title<span class="token operator">:</span> data<span class="token punctuation">.</span>title<span class="token punctuation">,</span>
        id<span class="token operator">:</span> data<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
        content<span class="token operator">:</span> data<span class="token punctuation">.</span>content<span class="token punctuation">,</span>
        content_short<span class="token operator">:</span> data<span class="token punctuation">.</span>description<span class="token punctuation">,</span>
        display_time<span class="token operator">:</span> <span class="token function">parseTime2</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>createAt<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<h2 id="功能实现"><a href="#功能实现" class="headerlink" title="功能实现"></a>功能实现</h2><h3 id="全局登录拦截"><a href="#全局登录拦截" class="headerlink" title="全局登录拦截"></a>全局登录拦截</h3><p><a target="_blank" rel="noopener" href="https://router.vuejs.org/guide/advanced/navigation-guards.html#global-before-guards">Navigation Guards | Vue Router (vuejs.org)</a></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// router/index.js</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> userToken <span class="token operator">=</span> window<span class="token punctuation">.</span>sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    <span class="token comment">// make sure the user is authenticated</span>
    <span class="token operator">!</span>userToken <span class="token operator">&amp;&amp;</span>
    <span class="token comment">// ❗️ Avoid an infinite redirect</span>
    to<span class="token punctuation">.</span>name <span class="token operator">!==</span> <span class="token string">"Login"</span>
  <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// redirect the user to the login page</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">"Login"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="登录逻辑"><a href="#登录逻辑" class="headerlink" title="登录逻辑"></a>登录逻辑</h3><p>登录功能调用顺序：</p>
<ol>
<li><code>login/index.vue</code> 中点击按钮</li>
<li>调用处理方法 <code>handleLogin()</code> ，验证输入值合法后调用 <code>userStore</code> 中的 <code>login</code> 方法，处理返回的 Promise</li>
<li><code>userStore</code> 中的 <code>login</code> 方法会调用 <code>@/api/user.js</code> 中的 <code>login</code> 接口</li>
<li>api 接口会使用封装的 <code>@/utils/request</code> 向 mock server 发起请求，该请求会解析到 <code>@/mock/user.js</code> ，最后会返回登录后的 token</li>
</ol>
<h3 id="换用-Spring-Boot-API"><a href="#换用-Spring-Boot-API" class="headerlink" title="换用 Spring Boot API"></a>换用 Spring Boot API</h3><ul>
<li>如果不需要全局状态，例如首页的文章列表就直接调用 <code>/api/article.js</code></li>
<li>组件中使用请求的时候需要 <code>async / await</code></li>
<li>像是标签管理这种涉及多个组件的情况就需要全局状态管理 <code>/stores/TagStore.js</code></li>
</ul>
<p>使用 axios 直接请求成功</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1:8080/post"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// this.postList = data.data;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>修改 vite 配置文件，使用 proxy 转发解决跨域问题。</p>
<p><a target="_blank" rel="noopener" href="https://zxuqian.cn/vite-proxy-config/">Vite 配置代理 Proxy，避免跨域和重复编写url的问题 - 峰华前端工程师 (zxuqian.cn)</a></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// vite.config.js</span>
server<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    host<span class="token operator">:</span> <span class="token string">"0.0.0.0"</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">5173</span><span class="token punctuation">,</span>
    open<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    cors<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    proxy<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token string">"/v2/api"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        target<span class="token operator">:</span> <span class="token string">"http://localhost:8080"</span><span class="token punctuation">,</span>
        changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token function-variable function">rewrite</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token operator">=></span> path<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/v2\/api</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在 <code>request.js</code> 中修改 <code>service.interceptors.response.use()</code> 方法，跳过处理返回代码。</p>
<p>在 <code>/api/article.js</code> 中添加请求接口</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getPostList</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    url<span class="token operator">:</span> <span class="token string">"/v2/api/post"</span><span class="token punctuation">,</span>
    method<span class="token operator">:</span> <span class="token string">"get"</span><span class="token punctuation">,</span>
    data<span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="工具类"><a href="#工具类" class="headerlink" title="工具类"></a>工具类</h3><blockquote>
<p>parseTime is not a function</p>
<p>解决方法就是声明出来</p>
</blockquote>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// list.vue</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> parseTime <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"@/utils"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token function">parseTime</span><span class="token punctuation">(</span><span class="token parameter">time<span class="token punctuation">,</span> cFormat</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token function">parseTime</span><span class="token punctuation">(</span>time<span class="token punctuation">,</span> cFormat<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="封装请求"><a href="#封装请求" class="headerlink" title="封装请求"></a>封装请求</h3><p><code>/api/request.js</code> 需要重点修改</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// element-ui -> element-plus, Message -> ElMessage</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> ElMessageBox<span class="token punctuation">,</span> ElMessage <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"element-plus"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> service <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  baseURL<span class="token operator">:</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VITE_VUE_APP_BASE_API</span><span class="token punctuation">,</span> <span class="token comment">// url = base url + request url</span>
  timeout<span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span> <span class="token comment">// request timeout</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在项目根目录创建环境变量文件 <code>.env</code><br><a target="_blank" rel="noopener" href="https://cn.vitejs.dev/guide/env-and-mode.html#env-files">环境变量和模式 | Vite 官方中文文档 (vitejs.dev)</a></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">VITE_VUE_APP_BASE_API <span class="token operator">=</span> <span class="token string">'/dev-api'</span> <span class="token comment">#注入本地 api 的根路径</span>
VITE_VUE_APP_BASE_API2 <span class="token operator">=</span> <span class="token string">'/dev-api2'</span> <span class="token comment">#注入本地 api2 的根路径</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<hr>
<blockquote>
<p><code>request.js</code> 是基于 axios 的封装，便于统一处理 POST，GET 等请求参数，请求头，以及错误提示信息等。</p>
<p>封装了全局 <code>request拦截器</code>、<code>response拦截器</code>、<code>统一的错误处理</code>、<code>统一做了超时处理</code>、<code>baseURL设置等</code>。</p>
<p><a target="_blank" rel="noopener" href="https://panjiachen.github.io/vue-element-admin-site/zh/guide/essentials/server.html#%E5%89%8D%E7%AB%AF%E8%AF%B7%E6%B1%82%E6%B5%81%E7%A8%8B">和服务端进行交互 | vue-element-admin (panjiachen.github.io)</a></p>
</blockquote>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/vue/" rel="tag"><i class="fa fa-tag"></i> vue</a>
              <a href="/tags/web/" rel="tag"><i class="fa fa-tag"></i> web</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/09/28/Spring%E6%A6%82%E5%BF%B5/" rel="prev" title="Spring 概念研究">
                  <i class="fa fa-chevron-left"></i> Spring 概念研究
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>







<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nova-mist</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.4.0/pjax.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '.page-configurations',
    '.main-inner',
    '.post-toc-wrap',
    '.languages',
    '.pjax'
  ],
  analytics: false,
  cacheBust: false,
  scrollRestoration: false,
  scrollTo: !CONFIG.bookmark.enable
});

document.addEventListener('pjax:success', () => {
  pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  const hasTOC = document.querySelector('.post-toc');
  document.querySelector('.sidebar-inner').classList.toggle('sidebar-nav-active', hasTOC);
  document.querySelector(hasTOC ? '.sidebar-nav-toc' : '.sidebar-nav-overview').click();
  NexT.utils.updateSidebarPosition();
});
</script>


  






  



    <div class="pjax">


    </div>
</body>
</html>
