<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"nova-mist.github.io","root":"/","images":"/images","scheme":"Gemini","version":"8.2.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"}};
  </script>
<meta property="og:type" content="article">
<meta property="og:title" content="Java åç«¯ç¬”è®°">
<meta property="og:url" content="https://nova-mist.github.io/2022/09/27/backend-note/index.html">
<meta property="og:site_name" content="novamist blog">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202209272151039.jpg">
<meta property="article:published_time" content="2022-09-27T13:52:00.000Z">
<meta property="article:modified_time" content="2022-09-27T14:00:26.645Z">
<meta property="article:author" content="Nova-mist">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="Spring">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202209272151039.jpg">


<link rel="canonical" href="https://nova-mist.github.io/2022/09/27/backend-note/">


<script data-pjax class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>
<title>Java åç«¯ç¬”è®° | novamist blog</title>
  




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">novamist blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£<span class="badge">74</span></a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾<span class="badge">31</span></a></li>
        <li class="menu-item menu-item-stars"><a href="/stars/" rel="section"><i class="fa fa-heart fa-fw"></i>æ”¶é›†</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#SSM"><span class="nav-number">1.</span> <span class="nav-text">SSM</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#mybatis-insert-%E8%BF%94%E5%9B%9E%E8%87%AA%E5%A2%9E%E4%B8%BB%E9%94%AE"><span class="nav-number">1.1.</span> <span class="nav-text">mybatis insert è¿”å›è‡ªå¢ä¸»é”®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Mybatis-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2-TypeHandler"><span class="nav-number">1.2.</span> <span class="nav-text">Mybatis è‡ªå®šä¹‰ç±»å‹è½¬æ¢ TypeHandler</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Java-8%E6%97%A5%E6%9C%9F%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E6%97%A5%E6%9C%9F%E7%9A%84%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB"><span class="nav-number">1.3.</span> <span class="nav-text">Java 8æ—¥æœŸä¸æ•°æ®åº“æ—¥æœŸçš„æ˜ å°„å…³ç³»</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%99API%E5%92%8CMySQL%E9%80%89%E6%8B%A9%E6%AD%A3%E7%A1%AE%E7%9A%84%E6%97%B6%E9%97%B4%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.4.</span> <span class="nav-text">ç»™APIå’ŒMySQLé€‰æ‹©æ­£ç¡®çš„æ—¶é—´ç±»å‹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring-Boot"><span class="nav-number">2.</span> <span class="nav-text">Spring Boot</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90-MyBatis-%E7%9A%842%E7%A7%8D%E6%96%B9%E6%B3%95"><span class="nav-number">2.1.</span> <span class="nav-text">é›†æˆ MyBatis çš„2ç§æ–¹æ³•</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E7%9B%B8%E5%85%B3"><span class="nav-number">3.</span> <span class="nav-text">é…ç½®ç›¸å…³</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#maven"><span class="nav-number">3.1.</span> <span class="nav-text">maven</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SpringMVC"><span class="nav-number">4.</span> <span class="nav-text">SpringMVC</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A6%82%E5%BF%B5"><span class="nav-number">4.1.</span> <span class="nav-text">æ¦‚å¿µ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#controller%E9%85%8D%E7%BD%AE"><span class="nav-number">4.2.</span> <span class="nav-text">controlleré…ç½®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91%E5%92%8C%E8%BD%AC%E5%8F%91"><span class="nav-number">4.3.</span> <span class="nav-text">é‡å®šå‘å’Œè½¬å‘</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RestFul%E9%A3%8E%E6%A0%BC"><span class="nav-number">4.4.</span> <span class="nav-text">RestFulé£æ ¼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSON"><span class="nav-number">4.5.</span> <span class="nav-text">JSON</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MyBatis"><span class="nav-number">5.</span> <span class="nav-text">MyBatis</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="nav-number">5.1.</span> <span class="nav-text">æ³¨è§£å¼€å‘</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A8%E6%80%81SQL"><span class="nav-number">5.2.</span> <span class="nav-text">åŠ¨æ€SQL</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Nova-mist"
      src="/uploads/avatar.png">
  <p class="site-author-name" itemprop="name">Nova-mist</p>
  <div class="site-description" itemprop="description">My blog about daily life and learning. :b</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">74</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">31</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Nova-mist" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;Nova-mist" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fas fa-cat fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.bilibili.com/" title="https:&#x2F;&#x2F;www.bilibili.com&#x2F;" rel="noopener" target="_blank">Bilibili</a>
        </li>
    </ul>
  </div>

        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://nova-mist.github.io/2022/09/27/backend-note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.png">
      <meta itemprop="name" content="Nova-mist">
      <meta itemprop="description" content="My blog about daily life and learning. :b">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="novamist blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Java åç«¯ç¬”è®°
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>
      

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-09-27 21:52:00 / ä¿®æ”¹æ—¶é—´ï¼š22:00:26" itemprop="dateCreated datePublished" datetime="2022-09-27T21:52:00+08:00">2022-09-27</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p><img src="https://cdn.jsdelivr.net/gh/Nova-mist/HexoBlogResources/images/2022/202209272151039.jpg" alt="blog-image-20220927-1664286679"></p>
<span id="more"></span>

<h2 id="SSM"><a href="#SSM" class="headerlink" title="SSM"></a>SSM</h2><h3 id="mybatis-insert-è¿”å›è‡ªå¢ä¸»é”®"><a href="#mybatis-insert-è¿”å›è‡ªå¢ä¸»é”®" class="headerlink" title="mybatis insert è¿”å›è‡ªå¢ä¸»é”®"></a>mybatis insert è¿”å›è‡ªå¢ä¸»é”®</h3><p>ğŸŸ¢æ–¹æ³•ä¸€ï¼š</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>--</span> <span class="token attr-name">xml</span> <span class="token attr-name">æ˜ å°„çš„æ–¹å¼</span> <span class="token attr-name">--</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>insert<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.kebi.User<span class="token punctuation">"</span></span> <span class="token attr-name">useGeneratedKeys</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">keyColumn</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
	INSERT INTO user (
		username, password
	) VALUES (
		#&#123;username&#125;, #&#123;password&#125;
	)
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>useGeneratedKeys</td>
<td>ä¸º true åˆ™è¿”å›ä¸»é”®çš„å€¼</td>
</tr>
<tr>
<td>keyProperty</td>
<td>å®ä½“ç±»ä¸­å±æ€§å</td>
</tr>
<tr>
<td>keyColumn</td>
<td>æ•°æ®åº“ä¸»é”®å­—æ®µå å¦‚æœå’Œå®ä½“å±æ€§åä¸€æ ·å¯ä»¥ä¸ç”¨å†™</td>
</tr>
</tbody></table>
<p>æ‰§è¡Œæ’å…¥æ•°æ®æ“ä½œä¹‹åï¼Œå®ä½“ç±»æ•°æ®ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œä½†å®ä½“ç±»ä¸­ id å±æ€§å­—æ®µä¸€å®šéœ€è¦ set ä»¥åŠ get æ–¹æ³•ã€‚</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UsertMapper</span> userMapper<span class="token punctuation">;</span>

    <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setUserName</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setPassWord</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span>

    userMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è·å–è‡ªå¢ä¸»é”®:"</span><span class="token operator">+</span> user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>insertã€delete çš„è¿”å›å€¼æ˜¯æ“ä½œå½±å“çš„è¡Œæ•°ï¼Œå¹¶ä¸æ˜¯è¿”å›çš„ id</p>
</blockquote>
<p>ğŸŸ¢æ–¹æ³•äºŒï¼šä½¿ç”¨selectKey æŸ¥è¯¢ä¸»é”®</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>--</span> <span class="token attr-name">xml</span> <span class="token attr-name">æ˜ å°„çš„æ–¹å¼</span> <span class="token attr-name">--</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>INSERT<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.kebi.User<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selectKey</span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>int<span class="token punctuation">"</span></span> <span class="token attr-name">order</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>AFTER<span class="token punctuation">"</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">keyColumn</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        SELECT LAST_INSERT_ID()
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>selectKey</span><span class="token punctuation">></span></span>
    INSERT INTO users (
    	username, password
    ) VALUES (
    	#&#123;username&#125;, #&#123;password&#125;
    )
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>resultType</td>
<td>ç»“æœç±»å‹</td>
</tr>
<tr>
<td>order</td>
<td>è¿™å¯ä»¥è¢«è®¾ç½®ä¸º BEFORE æˆ– AFTERã€‚å¦‚æœè®¾ç½®ä¸º BEFOREï¼Œé‚£ä¹ˆå®ƒä¼šé¦–å…ˆé€‰æ‹©ä¸»é”®ï¼Œè®¾ç½® keyProperty ç„¶åæ‰§è¡Œæ’å…¥è¯­å¥ã€‚å¦‚æœè®¾ç½®ä¸º AFTERï¼Œé‚£ä¹ˆå…ˆæ‰§è¡Œæ’å…¥è¯­å¥ï¼Œç„¶åæ˜¯ selectKey å…ƒç´  - è¿™å’Œåƒ Oracle çš„æ•°æ®åº“ç›¸ä¼¼ï¼Œåœ¨æ’å…¥è¯­å¥å†…éƒ¨å¯èƒ½æœ‰åµŒå…¥ç´¢å¼•è°ƒç”¨.</td>
</tr>
</tbody></table>
<h3 id="Mybatis-è‡ªå®šä¹‰ç±»å‹è½¬æ¢-TypeHandler"><a href="#Mybatis-è‡ªå®šä¹‰ç±»å‹è½¬æ¢-TypeHandler" class="headerlink" title="Mybatis è‡ªå®šä¹‰ç±»å‹è½¬æ¢ TypeHandler"></a>Mybatis è‡ªå®šä¹‰ç±»å‹è½¬æ¢ TypeHandler</h3><p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000040484998">SpringBootç³»åˆ— Mybatis ä¹‹è‡ªå®šä¹‰ç±»å‹è½¬æ¢ TypeHandler - SegmentFault æ€å¦</a></p>
<p><a target="_blank" rel="noopener" href="https://cubox.pro/my/card?id=ff80808183493a41018350ae4f6b4e40">SpringBootç³»åˆ— Mybatis ä¹‹è‡ªå®šä¹‰ç±»å‹è½¬æ¢ TypeHandler - SegmentFault æ€å¦ - Cubox</a></p>
<ol>
<li><p>mapper ä¸­æŸ¥è¯¢æ“ä½œè¿”å›æ•°æ®ä¸€èˆ¬éƒ½æ˜¯å®ä½“ç±»çš„å½¢å¼</p>
</li>
<li><p>db ä¸­çš„å­—æ®µç±»å‹å’Œ java bean çš„å±æ€§ç±»å‹æœ€å¥½å¯¹åº”ï¼Œå› ä¸ºæœ‰é»˜è®¤çš„ typeHandler å¤„ç†ç±»å‹è½¬æ¢ <code>JdbcType.TIMESTAMP</code> &lt;-&gt; <code>TimeStamp</code>ï¼Œä½“ç°åœ¨ mapper ä¸­çš„ @Results æ³¨è§£ã€‚</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from money where id = #&#123;id&#125;"</span><span class="token punctuation">)</span>
<span class="token comment">// æŒ‡å®š id ä¾¿äºå¤ç”¨</span>
<span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token string">"moneyResultMap"</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
        <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span> id <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> jdbcType <span class="token operator">=</span> <span class="token class-name">JdbcType</span><span class="token punctuation">.</span>INTEGER<span class="token punctuation">)</span><span class="token punctuation">,</span>
    	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>        
        <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"createAt"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"create_at"</span><span class="token punctuation">,</span> jdbcType <span class="token operator">=</span> <span class="token class-name">JdbcType</span><span class="token punctuation">.</span>TIMESTAMP<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"updateAt"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"update_at"</span><span class="token punctuation">,</span> jdbcType <span class="token operator">=</span> <span class="token class-name">JdbcType</span><span class="token punctuation">.</span>TIMESTAMP<span class="token punctuation">,</span> typeHandler <span class="token operator">=</span> <span class="token class-name">Timestamp2LongHandler</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token class-name">MoneyPo</span> <span class="token function">getById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>ä½†å¦‚æœå°† db ä¸­çš„ timestamp ç±»å‹è½¬æ¢æˆ java bean ä¸­çš„ Long ç±»å‹ï¼Œå°±éœ€è¦è‡ªå®šä¹‰ typeHandlerã€‚<br>ä¾‹å­ä¸­ä½¿ç”¨çš„æ˜¯ <code>Timestamp2LongHandler</code> ï¼Œç»§æ‰¿äº† <code>BaseTypeHandler</code> ç±»ï¼Œæ³›å‹ä¸º Longã€‚<br>å®ç°ä¸¤ç±»æ–¹æ³•ï¼š</p>
<ul>
<li>setNonNullParameterï¼šå°† java ç±»å‹ï¼Œè½¬æ¢ä¸º jdbc ç±»å‹</li>
<li>getNullableResultï¼šå°† jdbc ç±»å‹è½¬ java ç±»å‹</li>
</ul>
</li>
<li><p>æ³¨å†Œ typeHandler çš„æ–¹æ³•ï¼š</p>
<ul>
<li><p>ğŸŸ¢result æ ‡ç­¾ä¸­æ˜¾ç¤ºæŒ‡å®šï¼Œxml æˆ– æ³¨è§£</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>update_at<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>updateAt<span class="token punctuation">"</span></span> <span class="token attr-name">jdbcType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>TIMESTAMP<span class="token punctuation">"</span></span> <span class="token attr-name">typeHandler</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.git.hui.boot.mybatis.handler.Timestamp2LongHandler<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
<li><p>ã€å…¨å±€ã€‘åœ¨æ³¨å…¥çš„é…ç½®ç±» <code>MyBatisConfig</code> ä¸­æŒ‡å®š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBatisConfig</span> <span class="token punctuation">&#123;</span>
  <span class="token annotation punctuation">@Bean</span>
  <span class="token keyword">public</span> <span class="token class-name">SqlSessionFactory</span> <span class="token function">sqlSessionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>ã€å…¨å±€ã€‘åœ¨ <code>mybatis-config.xml</code> ä¸­æ³¨å†Œï¼Œç„¶åç»™ SpringBoot æŒ‡å®šæ­¤é…ç½®æ–‡ä»¶</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!-- é©¼å³°ä¸‹åˆ’çº¿æ ¼å¼æ”¯æŒ --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mapUnderscoreToCamelCase<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeHandlers</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeHandler</span> <span class="token attr-name">handler</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.git.hui.boot.mybatis.handler.Timestamp2LongHandler<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeHandlers</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>ã€å…¨å±€ã€‘ç›´æ¥åœ¨ SpringBoot é…ç½®ä¸­æŒ‡å®š <code>type-handlers-package</code></p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">mybatis</span><span class="token punctuation">:</span>
  <span class="token key atrule">type-handlers-package</span><span class="token punctuation">:</span> com.git.hui.boot.mybatis.handler<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li>
</ul>
</li>
</ol>
<h3 id="Java-8æ—¥æœŸä¸æ•°æ®åº“æ—¥æœŸçš„æ˜ å°„å…³ç³»"><a href="#Java-8æ—¥æœŸä¸æ•°æ®åº“æ—¥æœŸçš„æ˜ å°„å…³ç³»" class="headerlink" title="Java 8æ—¥æœŸä¸æ•°æ®åº“æ—¥æœŸçš„æ˜ å°„å…³ç³»"></a>Java 8æ—¥æœŸä¸æ•°æ®åº“æ—¥æœŸçš„æ˜ å°„å…³ç³»</h3><p><a target="_blank" rel="noopener" href="https://www.ujcms.com/knowledge/552.html">Java 8æ—¥æœŸä¸æ•°æ®åº“æ—¥æœŸçš„æ˜ å°„å…³ç³» - åç«¯çŸ¥è¯† - UJCMS</a></p>
<p><strong>JDBC 4.2 è§„èŒƒ</strong></p>
<table>
<thead>
<tr>
<th>Java æ—¥æœŸ</th>
<th>æ•°æ®åº“æ—¥æœŸ</th>
</tr>
</thead>
<tbody><tr>
<td>java.sql.Date</td>
<td>DATE</td>
</tr>
<tr>
<td>java.sql.Time</td>
<td>TIME</td>
</tr>
<tr>
<td>java.sql.Timestamp</td>
<td>TIMESTAMP</td>
</tr>
<tr>
<td>java.util.Calendar</td>
<td>TIMESTAMP</td>
</tr>
<tr>
<td>java.util.Date</td>
<td>TIMESTAMP</td>
</tr>
<tr>
<td>java.time.LocalDate</td>
<td>DATE</td>
</tr>
<tr>
<td>java.time.LocalTime</td>
<td>TIME</td>
</tr>
<tr>
<td><strong>java.time.LocalDateTime</strong></td>
<td><strong>TIMESTAMP</strong></td>
</tr>
<tr>
<td>java.time.OffsetTime</td>
<td>TIME_WITH_TIMEZONE</td>
</tr>
<tr>
<td>java.time.OffsetDatetime</td>
<td>TIMESTAMP_WITH_TIMEZONE</td>
</tr>
</tbody></table>
<p><strong>MySQL æ•°æ®åº“</strong></p>
<ul>
<li>date</li>
<li>dateTimeï¼Œä¸å—æ—¶åŒºå½±å“</li>
<li>time</li>
<li>timestamp ğŸ”´ 2038å¹´æº¢å‡ºé—®é¢˜ä¸èƒ½ä½¿ç”¨ï¼Œè¯»å–ä¼šå— time zone å½±å“</li>
</ul>
<p>MySQLç”šè‡³æ²¡æœ‰æä¾›<code>TIMESTAMP WITH TIME ZONE</code>çš„ç±»å‹ï¼Œæ—¥æœŸæ—¶é—´ç±»å‹åªæœ‰<code>DateTime</code>ï¼Œæ²¡æœ‰ Time Zone æ¦‚å¿µã€‚å¿…é¡»ä½¿ç”¨jdbcè¿æ¥ä¸­çš„<code>serverTimezone</code>ç¡®å®šæ—¶åŒºã€‚å¦‚<code>jdbc:mysql://localhost/ujcms?serverTimezone=Asia/Shanghai</code>ã€‚</p>
<h3 id="ç»™APIå’ŒMySQLé€‰æ‹©æ­£ç¡®çš„æ—¶é—´ç±»å‹"><a href="#ç»™APIå’ŒMySQLé€‰æ‹©æ­£ç¡®çš„æ—¶é—´ç±»å‹" class="headerlink" title="ç»™APIå’ŒMySQLé€‰æ‹©æ­£ç¡®çš„æ—¶é—´ç±»å‹"></a>ç»™APIå’ŒMySQLé€‰æ‹©æ­£ç¡®çš„æ—¶é—´ç±»å‹</h3><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/2a8abc5bbe8b">ç»™APIå’ŒMySQLé€‰æ‹©æ­£ç¡®çš„æ—¶é—´ç±»å‹ - ç®€ä¹¦ (jianshu.com)</a></p>
<blockquote>
<p>å¯¹äºæ•°æ®åº“è€Œè¨€ï¼Œæ—¶é—´å¤„ç†çš„æµç¨‹å¦‚ï¼š<code>Java&lt;--MyBatis(TypeHandler)è½¬æ¢--&gt;JDBC&lt;--è½¬æ¢-&gt;MySQL</code>ã€‚æ•°æ®åº“é‡Œé¢å¿…é¡»ä¿å­˜UTCæ—¶é—´ã€‚å¦å¤–éœ€è¦é¿å…å¤šä½™çš„è½¬æ¢ï¼Œè€—è´¹æ€§èƒ½ã€‚</p>
</blockquote>
<ol>
<li>JDBC <code>Timestamp</code> ç±»å‹å…¶å®ç›¸å½“äºJava DateTimeç±»å‹ï¼Œèƒ½åŒ…å«å¹´æœˆæ—¥æ—¶åˆ†ç§’ä¿¡æ¯</li>
<li>JDBC <code>Timestamp</code> å¯ä»¥æ˜ å°„åˆ°MySQLçš„ <code>timestamp</code> å’Œ <code>datetime</code>ã€‚<ul>
<li>æ˜ å°„åˆ° MySQL çš„ <code>timestamp</code> è¦è€ƒè™‘ Java è¿›ç¨‹å’Œ MySQL çš„æ—¶åŒºå·®å¼‚</li>
<li>ğŸŸ¢æ˜ å°„åˆ° MySQL çš„ <code>datetime</code> ï¼ˆæ²¡æœ‰æ—¶åŒºä¿¡æ¯ï¼‰ï¼ŒJDBC ä¼šæ ¹æ® <code>serverTimezone</code> åšä¸€æ¬¡è½¬æ¢</li>
</ul>
</li>
<li>swagger-codegenä¼šå°†<code>type=string,format=date-time</code>æ˜ å°„æˆ<code>OffsetDateTime</code></li>
<li>SpringBootå¯¹æ—¶é—´ç±»å‹çš„å±æ€§æä¾›äº†æ ¡éªŒåŠŸèƒ½ã€‚æ¯”å¦‚å¯¹<code>OffsetDateTime</code>ç±»å‹ï¼ŒåŠ ä¸Š<code>@DateTimeFormat</code>æ³¨è§£ï¼Œå°±å¯ä»¥æ ¡éªŒæ—¶é—´æ˜¯å¦åˆæ³•ã€‚</li>
<li>Mybatisé»˜è®¤å®ç°äº†å¾ˆå¤š<code>TypeHandler</code>ç”¨äºåšJavaç±»å‹å’ŒJDBCç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼Œæ¯”å¦‚<code>OffsetDateTimeTypeHandler</code>ï¼Œç”¨äºå¤„ç†<code>OffsetDateTime</code>åˆ°JDBC <code>Timestamp</code>ç±»å‹çš„è½¬æ¢ï¼ˆæ— æ³•è‡ªåŠ¨å¤„ç† OffsetDateTime -&gt; datetimeï¼Œå³ swagger ç”Ÿæˆçš„æ˜¯ OffsetDateTimeï¼Œæ•°æ®æ˜¯ datetimeï¼‰ã€‚</li>
</ol>
<p>å¦‚ä½•é€‰æ‹©ï¼š</p>
<ul>
<li>ğŸŸ¢Java Bean ä½¿ç”¨ <code>datetime</code>ï¼Œæ•°æ®åº“ä½¿ç”¨ <code>datetime</code><ul>
<li>å°†JavaæœåŠ¡è¿›ç¨‹çš„æ—¶åŒºè®¾ç½®æˆUTC+0</li>
<li>æ•°æ®åº“URLè®¾ç½®<code>serverTimezone=UTC</code>ï¼Œå­—æ®µä½¿ç”¨<code>datetime</code>ç±»å‹ï¼Œæ—¶é—´ä¿¡æ¯ä¸€ç›®äº†ç„¶ï¼Œä½¿ç”¨SQLè¯­å¥æ›´åŠ æ–¹ä¾¿</li>
</ul>
</li>
<li>Swagger æ¥å£æ–‡æ¡£ç”Ÿæˆçš„ Java Bean ä½¿ç”¨ <code>OffsetDateTime</code>ï¼Œæ•°æ®åº“ä½¿ç”¨ <code>timestamp</code>ï¼ŒJDBC è‡ªåŠ¨è½¬æ¢</li>
</ul>
<p>ğŸŸ å‰ç«¯çš„è§’åº¦</p>
<ol>
<li><p>åƒåç«¯ä¼ é€’ <code>timestamp</code> æœ€æ–¹ä¾¿</p>
</li>
<li><p>ä¼ é€’ <code>OffsetDateTime</code> éœ€è¦è¿›è¡Œè½¬æ¢</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> timestamp <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// el-date-picker ç»‘å®šçš„å€¼</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"display_time"</span><span class="token punctuation">,</span> postForm<span class="token punctuation">.</span>value<span class="token punctuation">.</span>display_time<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>postForm<span class="token punctuation">.</span>value<span class="token punctuation">.</span>display_time <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>postForm<span class="token punctuation">.</span>value<span class="token punctuation">.</span>display_time<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<h2 id="Spring-Boot"><a href="#Spring-Boot" class="headerlink" title="Spring Boot"></a>Spring Boot</h2><h3 id="é›†æˆ-MyBatis-çš„2ç§æ–¹æ³•"><a href="#é›†æˆ-MyBatis-çš„2ç§æ–¹æ³•" class="headerlink" title="é›†æˆ MyBatis çš„2ç§æ–¹æ³•"></a>é›†æˆ MyBatis çš„2ç§æ–¹æ³•</h3><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/nuccch/p/9060594.html">Spring Booté›†æˆMyBatisçš„2ç§æ–¹å¼ - nuccch - åšå®¢å›­ (cnblogs.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://cubox.pro/my/card?id=ff80808183493c38018350cfa1975fcd">Spring Booté›†æˆMyBatisçš„2ç§æ–¹å¼ - nuccch - åšå®¢å›­ - Cubox</a></p>
<ol>
<li>åœ¨ Spring æ¡†æ¶ä¸­åŸç”Ÿé›†æˆ MyBatis ==TODOï¼šå¤ä¹ ç›¸å…³é…ç½®==</li>
<li>ç›´æ¥ä½¿ç”¨ <code>MyBatis-Spring-Boot-Starter</code> ä¾èµ–é›†æˆã€‚<br>åœ¨ Spring Boot çš„ yaml é…ç½®æ–‡ä»¶ä¸­å®šåˆ¶ MyBatis è¿è¡Œæ—¶å‚æ•°å’Œ xml é…ç½®æ–‡ä»¶  </li>
</ol>
<p>ğŸŸ¢æ–¹æ³•äºŒï¼šä½¿ç”¨é›†æˆä¾èµ–</p>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://myjavaacademy.com/spring-mybatis-integration-and-junit-testing-using-springs-embedded-database/">My {Java} Academy (myjavaacademy.com)</a></li>
<li><a target="_blank" rel="noopener" href="https://cubox.pro/my/card?id=ff80808183493a41018354eb0e127796">My {Java} Academy - Cubox</a></li>
</ul>
<ol>
<li><p>åˆ›å»º SpringBoot é¡¹ç›®</p>
</li>
<li><p>å®‰è£… <code>pom.xml</code> ä¾èµ–</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--   æ³¨æ„ï¼šä¸å¼•å…¥æ­¤ä¾èµ– @Mapper @MapperScan æ³¨è§£æ— æ•ˆ--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>8.0.13<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>SpringBoot çš„ <code>application.yaml</code> é…ç½®æ–‡ä»¶</p>
<ul>
<li>æ•°æ®åº“</li>
<li>mybatis é©¼å³°ä¸‹åˆ’çº¿æ ¼å¼æ”¯æŒ</li>
</ul>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//127.0.0.1<span class="token punctuation">:</span>3306/review_mybatis<span class="token punctuation">?</span>serverTimezone=UTC
    <span class="token key atrule">username</span><span class="token punctuation">:</span> ysama
    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver


<span class="token key atrule">mybatis</span><span class="token punctuation">:</span>
  <span class="token key atrule">configuration</span><span class="token punctuation">:</span>
    <span class="token comment"># é©¼å³°ä¸‹åˆ’çº¿æ ¼å¼æ”¯æŒ</span>
    <span class="token key atrule">map-underscore-to-camel-case</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>åˆ›å»º mapper å’Œ pojo ç±»<br>æ•°æ®åº“çš„åˆ›å»ºå’Œ <code>Employee.java</code> ï¼ˆä¸éœ€è¦ <code>@Component</code>ï¼‰æŒ‰ç…§æ–‡ç« ä¸­æ­¥éª¤<br>è¦æ³¨æ„ <code>EmployeeMapper.java</code> æ˜¯ä¸€ä¸ªæ¥å£</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmployeeMapper</span> <span class="token punctuation">&#123;</span>
<span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">"insert into employee (empid, first_name, last_name) values(#&#123;empid&#125;, #&#123;firstName&#125;, #&#123;lastName&#125;)"</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">insertEmployee</span><span class="token punctuation">(</span><span class="token class-name">Employee</span> employee<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select distinct first_name, last_name from employee where empid = #&#123;empid&#125;"</span><span class="token punctuation">)</span>
    <span class="token class-name">Employee</span> <span class="token function">getEmployeeName</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"empid"</span><span class="token punctuation">)</span> <span class="token keyword">long</span> empid<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>ç¼–å†™æµ‹è¯•ç±»<br>é»˜è®¤çš„ JUnit5 åªéœ€è¦ <code>@SpringBootTest</code> æ³¨è§£ï¼Œä¸éœ€è¦ <code>@RunWith(SpringJUnit4ClassRunner.class)</code></p>
<p><code>@Before</code> ä¸èµ·ä½œç”¨å› ä¸ºæ˜¯ JUnit4 çš„æ³¨è§£ï¼Œåœ¨ JUnit5 ä¸­æ˜¯ <code>@BeforeEach</code></p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">SpringbootMybatisApplicationTests</span> <span class="token punctuation">&#123;</span>
    
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">EmployeeMapper</span> employeeMapper<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@BeforeEach</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insertEmployee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token class-name">Employee</span> emp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        emp<span class="token punctuation">.</span><span class="token function">setEmpid</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        emp<span class="token punctuation">.</span><span class="token function">setFirstName</span><span class="token punctuation">(</span><span class="token string">"Manik"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        emp<span class="token punctuation">.</span><span class="token function">setLastName</span><span class="token punctuation">(</span><span class="token string">"Magar"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        employeeMapper<span class="token punctuation">.</span><span class="token function">insertEmployee</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"insertEmployee"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>


    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testEmployee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"testEmployee"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Employee</span> emp <span class="token operator">=</span> employeeMapper<span class="token punctuation">.</span><span class="token function">getEmployeeName</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">assertNotNull</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<h2 id="é…ç½®ç›¸å…³"><a href="#é…ç½®ç›¸å…³" class="headerlink" title="é…ç½®ç›¸å…³"></a>é…ç½®ç›¸å…³</h2><h3 id="maven"><a href="#maven" class="headerlink" title="maven"></a>maven</h3><p>é…ç½®é•œåƒåŠ é€Ÿï¼Œ<strong>ä¿®æ”¹é…ç½®æ–‡ä»¶ settings.xml</strong> æ·»åŠ é˜¿é‡Œé•œåƒ</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>nexus-aliyun<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">></span></span>central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>Nexus aliyun<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span>http://maven.aliyun.com/nexus/content/groups/public<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>é™æ€èµ„æºè¿‡æ»¤é—®é¢˜ï¼Œpom.xml</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">></span></span>src/main/java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">></span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">></span></span>**/*.properties<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">></span></span>**/*.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filtering</span><span class="token punctuation">></span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filtering</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">></span></span>src/main/resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">></span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">></span></span>**/*.properties<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">></span></span>**/*.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filtering</span><span class="token punctuation">></span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filtering</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="SpringMVC"><a href="#SpringMVC" class="headerlink" title="SpringMVC"></a>SpringMVC</h2><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><blockquote>
<p>Spring MVCæ˜¯Spring Frameworkçš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯åŸºäºJavaå®ç°MVCçš„è½»é‡çº§Webæ¡†æ¶ã€‚</p>
</blockquote>
<p><strong>MVC æ¡†æ¶</strong></p>
<ul>
<li>æ¨¡å‹ Model</li>
<li>è§†å›¾ View</li>
<li>æ§åˆ¶å™¨ Controller</li>
</ul>
<blockquote>
<p>MVCä¸»è¦ä½œç”¨æ˜¯<strong>é™ä½äº†è§†å›¾ä¸ä¸šåŠ¡é€»è¾‘é—´çš„åŒå‘å¶åˆ</strong>ã€‚</p>
<p>æœ€å…¸å‹çš„MVCå°±æ˜¯JSP + servlet + javabeançš„æ¨¡å¼ã€‚</p>
</blockquote>
<p><strong>å„éƒ¨åˆ†çš„åŠŸèƒ½</strong></p>
<p>Modelï¼š</p>
<ul>
<li>ä¸šåŠ¡é€»è¾‘</li>
<li>ä¿å­˜æ•°æ®çš„çŠ¶æ€</li>
</ul>
<p>Viewï¼šï¼ˆJSP æˆ–è€…å…¶ä»–è§†å›¾æ¨¡æ¿ Thymeleaf / Freemarkerï¼‰</p>
<ul>
<li>æ˜¾ç¤ºé¡µé¢</li>
</ul>
<p>Controllerï¼šï¼ˆServletï¼‰</p>
<ul>
<li>å–å¾—è¡¨å•æ•°æ®</li>
<li>è°ƒç”¨ä¸šåŠ¡é€»è¾‘</li>
<li>è½¬å‘æŒ‡å®šçš„ç•Œé¢</li>
</ul>
<p>==<strong>Springçš„webæ¡†æ¶å›´ç»• DispatcherServletï¼ˆè°ƒåº¦Servlet ï¼‰è®¾è®¡ã€‚</strong>==</p>
<h3 id="controlleré…ç½®"><a href="#controlleré…ç½®" class="headerlink" title="controlleré…ç½®"></a>controlleré…ç½®</h3><p>æ–¹æ³•ä¸€ï¼šå®ç°Controlleræ¥å£ï¼Œä¸€ä¸ªæ§åˆ¶å™¨ä¸­åªæœ‰ä¸€ä¸ªæ–¹æ³•ã€‚</p>
<p><strong>æ–¹æ³•äºŒï¼šä½¿ç”¨æ³¨è§£ï¼ŒåŒä¸€ä¸ªç±»ä¸­å¯ä»¥æœ‰å¤šä¸ªæ–¹æ³•ï¼Œå¯ä»¥ä½œä¸ºå¤ç”¨çš„æ¨¡æ¿ã€‚</strong></p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ControllerTest2</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hello2"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"ControllerTest2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"test"</span><span class="token punctuation">;</span> <span class="token comment">// WEB-INF/jsp/test.jsp</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hello3"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"ControllerTest3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"test"</span><span class="token punctuation">;</span> <span class="token comment">// WEB-INF/jsp/test.jsp</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>@RequestMapping</strong> æ³¨è§£ç”¨äºæ˜ å°„urlåˆ°æ§åˆ¶å™¨ç±»æˆ–ä¸€ä¸ªç‰¹å®šçš„å¤„ç†ç¨‹åºæ–¹æ³•ã€‚å¯ç”¨äºç±»æˆ–æ–¹æ³•ä¸Šã€‚ç”¨äºç±»ä¸Šï¼Œè¡¨ç¤ºç±»ä¸­çš„æ‰€æœ‰å“åº”è¯·æ±‚çš„æ–¹æ³•éƒ½æ˜¯ä»¥è¯¥åœ°å€ä½œä¸ºçˆ¶è·¯å¾„ã€‚</p>
<h3 id="é‡å®šå‘å’Œè½¬å‘"><a href="#é‡å®šå‘å’Œè½¬å‘" class="headerlink" title="é‡å®šå‘å’Œè½¬å‘"></a>é‡å®šå‘å’Œè½¬å‘</h3><p>è®¾ç½® ModelAndView å¯¹è±¡ï¼Œä¼šæ ¹æ® ViewName å’Œè§†å›¾è§£æå™¨è·³è½¬åˆ°ï¼š<br><strong>{è§†å›¾è§£æå™¨å‰ç¼€} + ViewName + {è§†å›¾è§£æå™¨åç¼€}</strong></p>
<pre class="line-numbers language-xml-dtd" data-language="xml-dtd"><code class="language-xml-dtd">&lt;!-- è§†å›¾è§£æå™¨ --&gt;
&lt;bean class&#x3D;&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;
     id&#x3D;&quot;internalResourceViewResolver&quot;&gt;
   &lt;!-- å‰ç¼€ --&gt;
   &lt;property name&#x3D;&quot;prefix&quot; value&#x3D;&quot;&#x2F;WEB-INF&#x2F;jsp&#x2F;&quot; &#x2F;&gt;
   &lt;!-- åç¼€ --&gt;
   &lt;property name&#x3D;&quot;suffix&quot; value&#x3D;&quot;.jsp&quot; &#x2F;&gt;
&lt;&#x2F;bean&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å¯¹åº” Controller ç±» ğŸŸ æ²¡ç”¨æ³¨è§£</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ControllerTest1</span> <span class="token keyword">implements</span> <span class="token class-name">Controller</span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">handleRequest</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> httpServletRequest<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> httpServletResponse<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//è¿”å›ä¸€ä¸ªæ¨¡å‹è§†å›¾å¯¹è±¡</span>
        <span class="token class-name">ModelAndView</span> mv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mv<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"ControllerTest1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mv<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> mv<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>é€šè¿‡è®¾ç½® ServletAPI å°±ä¸éœ€è¦è§†å›¾è§£æå™¨</strong></p>
<ul>
<li>è¾“å‡º</li>
<li>é‡å®šå‘</li>
<li>è½¬å‘</li>
</ul>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResultGo</span> <span class="token punctuation">&#123;</span>

   <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/result/t1"</span><span class="token punctuation">)</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> rsp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
       rsp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hello,Spring BY servlet API"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

   <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/result/t2"</span><span class="token punctuation">)</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> rsp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
       rsp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"/index.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

   <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/result/t3"</span><span class="token punctuation">)</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> rsp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
       <span class="token comment">//è½¬å‘</span>
       req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"/result/t3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/WEB-INF/jsp/test.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>rsp<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>é€šè¿‡ SpringMVC å®ç°è½¬å‘å’Œé‡å®šå‘æ— éœ€è§†å›¾è§£æå™¨</strong></p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/rsm/t1"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// è½¬å‘</span>
    <span class="token keyword">return</span> <span class="token string">"/index.jsp"</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/rsm/t2"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token string">"forward:/index.jsp"</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/rsm/t3"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// é‡å®šå‘</span>
    <span class="token keyword">return</span> <span class="token string">"redirect:/index.jsp"</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="RestFulé£æ ¼"><a href="#RestFulé£æ ¼" class="headerlink" title="RestFulé£æ ¼"></a>RestFulé£æ ¼</h3><p><strong>ä½¿ç”¨ Restful æ“ä½œèµ„æºï¼Œå¯ä»¥é€šè¿‡ä¸åŒçš„è¯·æ±‚æ–¹å¼æ¥å®ç°ä¸åŒçš„æ•ˆæœã€‚</strong></p>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://localhost:8080/springmvc_04_controller_war_exploded/add/1/4">http://localhost:8080/springmvc_04_controller_war_exploded/add/1/4</a></p>
</blockquote>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RestFulController</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/add/&#123;a&#125;/&#123;b&#125;"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">restful</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token annotation punctuation">@PathVariable</span> <span class="token keyword">int</span> b<span class="token punctuation">,</span> <span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"ç»“æœæ˜¯ï¼š"</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"test"</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å†æ ¹æ® @PostMapping ç­‰æ¥é€‰æ‹©æ“ä½œä»è€Œè¾¾åˆ°ä¸åŒçš„æ•ˆæœ</p>
<blockquote>
<p>@GetMapping<br>@PostMapping<br>@PutMapping<br>@DeleteMapping<br>@PatchMapping</p>
</blockquote>
<p>æˆ–è€…ä½¿ç”¨ method å±æ€§æŒ‡å®šè¯·æ±‚ç±»å‹</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/hello"</span><span class="token punctuation">,</span>method <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">index2</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
   model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"hello!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">"test"</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æµè§ˆå™¨åœ°å€æ è¿›è¡Œè®¿é—®é»˜è®¤æ˜¯Getè¯·æ±‚ï¼Œä¼šæŠ¥é”™405</p>
<p><strong>è¡¨å•çš„æµ‹è¯•</strong></p>
<p>å¦‚æœåœ°å€å‰ç¼€æ˜¯ <code>http://localhost:8080/springmvc_04_controller_war_exploded/</code> ç›´æ¥å†™æˆ <code>/add/1/45</code> ä¼šè·³è½¬åˆ° <code>http://localhost:8080/add/1/45</code> è¿”å›404</p>
<p><code>xx.jsp</code></p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;form action&#x3D;&quot;$&#123;pageContext.request.contextPath&#125;&#x2F;add&#x2F;1&#x2F;45&quot; method&#x3D;&quot;post&quot;&gt;
    &lt;input type&#x3D;&quot;submit&quot;&gt;
&lt;&#x2F;form&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<h3 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h3><p>å¤„ç† java å¯¹è±¡ä¸ json è½¬æ¢çš„åŒ…ï¼š</p>
<ul>
<li>Jackson</li>
<li>FastJson</li>
</ul>
<h2 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h2><p><a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/">mybatis â€“ MyBatis 3 | Introduction</a></p>
<p><strong>MyBatis æ˜¯ä¸€ä¸ª Java æŒä¹…å±‚æ¡†æ¶ã€‚</strong></p>
<p>MyBatis æ¡†æ¶ç®€åŒ–äº†ä¹‹å‰å­¦ä¹  JDBC æ—¶çš„ç¹çæ­¥éª¤ï¼Œæ›´å¤šçš„ä¸“æ³¨äºé…ç½®æ–‡ä»¶ï¼Œå°¤å…¶æ˜¯ <code>mybatis-config.xml</code> å’Œ <code>mapper.xml</code> ï¼Œå¹¶ä¸”ä¹Ÿæ”¯æŒæ³¨è§£çš„å½¢å¼æ¥è¿›è¡Œé…ç½®ã€‚</p>
<p>ğŸŸ¢é…ç½® <code>pom.xml</code> ä¸­ä¾èµ–ï¼š</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.5.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
<span class="token comment">&lt;!--  jdbcé©±åŠ¨åŒ… --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>8.0.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ol>
<li>ä»…éœ€è¦é…ç½® sql æ˜ å°„æ–‡ä»¶ã€‚</li>
<li>sql å†™åœ¨ xml æ–‡ä»¶ä¸­ï¼Œä¾¿äºç»Ÿä¸€ç®¡ç†ã€‚</li>
<li>å°†ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è®¿é—®é€»è¾‘åˆ†ç¦»ã€‚</li>
</ol>
<p><strong>ğŸŸ åˆ›å»ºæ•°æ®åº“</strong></p>
<p>ğŸŸ¢MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ <strong>mybatis-config.xml</strong></p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span>
  <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Config 3.0//EN"</span>
  <span class="token string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>development<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>development<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>JDBC<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>POOLED<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>driver<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;driver&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;url&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;username&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;password&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org/mybatis/example/BlogMapper.xml<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å¯¹åº”ç€æ•°æ®åº“é…ç½®æ–‡ä»¶ db.properties</p>
<p>==æ•´åˆssmçš„æ—¶å€™å°±å¯ä»¥å†™å…¥ spring-dao.xmlä¸­==</p>
<pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">driver</span><span class="token punctuation">=</span><span class="token attr-value">com.mysql.jdbc.Driver</span>
<span class="token attr-name">url</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://localhost:3306/mybatis?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf8</span>
<span class="token attr-name">username</span><span class="token punctuation">=</span><span class="token attr-value">ysama</span>
<span class="token attr-name">pwd</span><span class="token punctuation">=</span><span class="token attr-value">123456</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>



<p><strong>å®ä½“ç±»</strong></p>
<p><strong>Mapperæ¥å£ç±» ç­‰ä»·äºDAO</strong></p>
<p><strong>æ¥å£å®ç°ç±»ç”±åŸæ¥çš„ UserDaoImpl è½¬å˜ä¸º Mapper é…ç½®æ–‡ä»¶</strong></p>
<h3 id="æ³¨è§£å¼€å‘"><a href="#æ³¨è§£å¼€å‘" class="headerlink" title="æ³¨è§£å¼€å‘"></a>æ³¨è§£å¼€å‘</h3><p>ğŸ’¥ä½¿ç”¨ Java æ³¨è§£å¼€å‘ï¼Œä¸éœ€è¦ <code>mapper.xml</code> æ–‡ä»¶ã€‚</p>
<blockquote>
<p>@Select()</p>
<p>@Update()</p>
<p>@Insert()</p>
<p>@Delete()</p>
<p>@Param()</p>
<p>@Results({<br>       @Result(property = â€œuidâ€, column = â€œidâ€),<br>       @Result(property = â€œuserNameâ€, column = â€œnameâ€),<br>     })</p>
<p>å¦‚æœåç§°ä¸å¯¹åº”å°±éœ€è¦å¯¹ç»“æœè¿›è¡Œæ˜ å°„ï¼Œè¿˜èƒ½æ·»åŠ  id å±æ€§æ¥å¤ç”¨ @Results</p>
</blockquote>
<ol>
<li>æ¥å£ä¸­æ·»åŠ æ³¨è§£</li>
</ol>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//æŸ¥è¯¢å…¨éƒ¨ç”¨æˆ·</span>
<span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select id,name,pwd as password from user"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> <span class="token function">getAllUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<ol start="2">
<li>mybatis æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å…¥</li>
</ol>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--ä½¿ç”¨classç»‘å®šæ¥å£--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.ysama.mapper.UserMapper<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<ol start="3">
<li>æµ‹è¯•</li>
</ol>
<p>MybatisUtilså·¥å…·ç±»çš„getSession( ) æ–¹æ³•</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// å®ç°è‡ªåŠ¨æäº¤äº‹åŠ¡</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SqlSession</span> <span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token function">getSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SqlSession</span> <span class="token function">getSession</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> flag<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// æ ¹æ®idæŸ¥è¯¢</span>
<span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from user where id=#&#123;id&#125;"</span><span class="token punctuation">)</span><span class="token class-name">User</span> <span class="token function">selectUserById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// æ·»åŠ ä¸€ä¸ªç”¨æˆ·</span>
<span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">"insert into user (id,name,pwd) values (#&#123;id&#125;,#&#123;name&#125;,#&#123;pwd&#125;)"</span><span class="token punctuation">)</span><span class="token keyword">int</span> <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ä¿®æ”¹</span>
<span class="token annotation punctuation">@Update</span><span class="token punctuation">(</span><span class="token string">"update user set name=#&#123;name&#125;,pwd=#&#123;pwd&#125; where id = #&#123;id&#125;"</span><span class="token punctuation">)</span><span class="token keyword">int</span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// åˆ é™¤</span>
<span class="token annotation punctuation">@Delete</span><span class="token punctuation">(</span><span class="token string">"delete from user where id=#&#123;id&#125;"</span><span class="token punctuation">)</span><span class="token keyword">int</span> <span class="token function">deleteUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h3 id="åŠ¨æ€SQL"><a href="#åŠ¨æ€SQL" class="headerlink" title="åŠ¨æ€SQL"></a>åŠ¨æ€SQL</h3><p>ã€‚ã€‚ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://www.concretepage.com/mybatis-3/mybatis-3-annotation-example-with-select-insert-update-and-delete">MyBatis 3 Annotation Example with @Select, @Insert, @Update and @Delete (concretepage.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/java-api.html">mybatis â€“ MyBatis 3 | Java API</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_15239532/5202881">MyBatis-07MyBatisæ³¨è§£æ–¹å¼ä¹‹@Select_å°å°å·¥åŒ çš„æŠ€æœ¯åšå®¢_51CTOåšå®¢</a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Java/" rel="tag"><i class="fa fa-tag"></i> Java</a>
              <a href="/tags/Spring/" rel="tag"><i class="fa fa-tag"></i> Spring</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/09/27/ssm-jsp/" rel="prev" title="ssm-jsp é…ç½®ç¯å¢ƒ">
                  <i class="fa fa-chevron-left"></i> ssm-jsp é…ç½®ç¯å¢ƒ
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/09/27/springboot-note/" rel="next" title="SpringBoot å†æ¬¡ç¬”è®°">
                  SpringBoot å†æ¬¡ç¬”è®° <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>







<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nova-mist</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.4.0/pjax.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '.page-configurations',
    '.main-inner',
    '.post-toc-wrap',
    '.languages',
    '.pjax'
  ],
  analytics: false,
  cacheBust: false,
  scrollRestoration: false,
  scrollTo: !CONFIG.bookmark.enable
});

document.addEventListener('pjax:success', () => {
  pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  const hasTOC = document.querySelector('.post-toc');
  document.querySelector('.sidebar-inner').classList.toggle('sidebar-nav-active', hasTOC);
  document.querySelector(hasTOC ? '.sidebar-nav-toc' : '.sidebar-nav-overview').click();
  NexT.utils.updateSidebarPosition();
});
</script>


  






  



    <div class="pjax">


    </div>
</body>
</html>
